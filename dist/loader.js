var $__TypeError = TypeError,
    $__Object = Object,
    $__toObject = function(value) {
      if (value == null) throw $__TypeError();
      return $__Object(value);
    },
    $__spread = function() {
      var rv = [],
          k = 0;
      for (var i = 0; i < arguments.length; i++) {
        var value = $__toObject(arguments[i]);
        for (var j = 0; j < value.length; j++) {
          rv[k++] = value[j];
        }
      }
      return rv;
    };
(function(global) {
  "use strict";
  var std_Function_call = Function.prototype.call;
  var std_Function_bind = Function.prototype.bind;
  var bind = std_Function_call.bind(std_Function_bind);
  var callFunction = bind(std_Function_call, std_Function_call);
  var std_Object_create = Object.create;
  var std_Object_defineProperty = Object.defineProperty;
  var std_Object_keys = Object.keys;
  var std_Object_preventExtensions = Object.preventExtensions;
  var std_Array_push = Array.prototype.push;
  var std_Array_sort = Array.prototype.sort;
  var std_Set = Set;
  var std_Set_get_size = Object.getOwnPropertyDescriptor(Set.prototype, "size").get;
  var std_Set_has = Set.prototype.has;
  var std_Set_add = Set.prototype.add;
  var std_Set_delete = Set.prototype.delete;
  var std_Set_clear = Set.prototype.clear;
  var std_Set_iterator = Set.prototype["@@iterator"];
  var std_Set_iterator_next = new Set()["@@iterator"]().next;
  var std_Map = Map;
  var std_Map_has = Map.prototype.has;
  var std_Map_get = Map.prototype.get;
  var std_Map_set = Map.prototype.set;
  var std_Map_delete = Map.prototype.delete;
  var std_Map_entries = Map.prototype.entries;
  var std_Map_keys = Map.prototype.keys;
  var std_Map_values = Map.prototype.values;
  var std_Map_iterator_next = new Map().keys().next;
  var std_WeakMap = WeakMap;
  var std_WeakMap_has = WeakMap.prototype.has;
  var std_WeakMap_get = WeakMap.prototype.get;
  var std_WeakMap_set = WeakMap.prototype.set;
  var std_Promise = Promise;
  var std_Promise_all = Promise.all;
  var std_Promise_resolve = Promise.resolve;
  var std_Promise_then = Promise.prototype.then;
  var std_Promise_catch = Promise.prototype. catch;
  var std_TypeError = TypeError;
  function ToBoolean(v) {
    return !!v;
  }
  function ToString(v) {
    return "" + v;
  }
  function IsObject(v) {
    return v !== null && v !== undefined && typeof v !== "boolean" && typeof v !== "number" && typeof v !== "string" && typeof v !== "symbol";
  }
  function IsCallable(v) {
    return typeof v === "function";
  }
  function CreateSet() {
    return new std_Set;
  }
  function CreateMap() {
    return new std_Map;
  }
  function CreateWeakMap() {
    return new std_WeakMap;
  }
  function IteratorToArray(iter, next) {
    var a = [];
    for (var x = callFunction(next, iter); !x.done; x = callFunction(next, iter)) callFunction(std_Array_push, a, x.value);
    return a;
  }
  function SetToArray(set) {
    return IteratorToArray(callFunction(std_Set_iterator, set), std_Set_iterator_next);
  }
  function MapValuesToArray(map) {
    return IteratorToArray(callFunction(std_Map_values, map), std_Map_iterator_next);
  }
  function PromiseOf(value) {
    return callFunction(std_Promise_resolve, std_Promise, value);
  }
  function Assert(condition) {
    if (typeof assert === "function") assert(condition); else if (typeof assertEq === "function") assertEq(condition, true);
    if (condition !== true) throw "assertion failed";
  }
  var moduleInternalDataMap = CreateWeakMap();
  function GetModuleInternalData(module) {
    return callFunction(std_WeakMap_get, moduleInternalDataMap, module);
  }
  function $CreateModule() {
    var module = std_Object_create(null);
    var moduleData = {
      dependencies: undefined,
      evaluated: false
    };
    callFunction(std_WeakMap_set, moduleInternalDataMap, module, moduleData);
    return module;
  }
  function $IsModule(module) {
    return GetModuleInternalData(module) !== undefined;
  }
  function $GetDependencies(module) {
    return GetModuleInternalData(module).dependencies;
  }
  function $SetDependencies(module, deps) {
    GetModuleInternalData(module).dependencies = deps;
  }
  function $HasBeenEvaluated(module) {
    return GetModuleInternalData(module).evaluated;
  }
  var loaderIteratorInternalDataMap = CreateWeakMap();
  function $SetLoaderIteratorPrivate(iter, value) {
    callFunction(std_WeakMap_set, loaderIteratorInternalDataMap, iter, value);
  }
  function $GetLoaderIteratorPrivate(iter) {
    if (!IsObject(iter)) {
      throw std_TypeError("Loader Iterator method called on an incompatible " + typeof iter);
    }
    if (!callFunction(std_WeakMap_has, loaderIteratorInternalDataMap, iter)) {
      throw std_TypeError("Loader Iterator method called on an incompatible object");
    }
    return callFunction(std_WeakMap_get, loaderIteratorInternalDataMap, iter);
  }
  function CreateLoad(name) {
    return {
      status: "loading",
      name: name,
      linkSets: CreateSet(),
      metadata: {},
      address: undefined,
      source: undefined,
      kind: undefined,
      body: undefined,
      execute: undefined,
      exception: undefined,
      module: null,
      then: undefined
    };
  }
  function MakeClosure_LoadFailed(load) {
    return function(exc) {
      Assert(load.status === "loading");
      load.status = "failed";
      load.exception = exc;
      var linkSets = SetToArray(load.linkSets);
      callFunction(std_Array_sort, linkSets, (function(a, b) {
        return b.timestamp - a.timestamp;
      }));
      {
        try {
          throw undefined;
        } catch ($i) {
          $i = 0;
          for (; $i < linkSets.length; $i++) {
            try {
              throw undefined;
            } catch (i) {
              i = $i;
              try {
                LinkSetFailed(linkSets[i], exc);
              } finally {
                $i = i;
              }
            }
          }
        }
      }
      Assert(callFunction(std_Set_get_size, load.linkSets) === 0);
    };
  }
  function RequestLoad(loader, request, referrerName, referrerAddress) {
    var F = MakeClosure_CallNormalize(loader, request, referrerName, referrerAddress);
    var p = new std_Promise(F);
    p = callFunction(std_Promise_then, p, MakeClosure_GetOrCreateLoad(loader));
    return p;
  }
  function MakeClosure_CallNormalize(loader, request, referrerName, referrerAddress) {
    return function(resolve, reject) {
      resolve(loader.normalize(request, referrerName, referrerAddress));
    };
  }
  function MakeClosure_GetOrCreateLoad(loader) {
    return function(name) {
      var loaderData = GetLoaderInternalData(loader);
      name = ToString(name);
      var existingModule = callFunction(std_Map_get, loaderData.modules, name);
      if (existingModule !== undefined) {
        var load = CreateLoad(name);
        load.status = "linked";
        load.module = existingModule;
        return load;
      }
      var load = callFunction(std_Map_get, loaderData.loads, name);
      if (load !== undefined) {
        Assert(load.status === "loading" || load.status === "loaded");
        return load;
      }
      load = CreateLoad(name);
      callFunction(std_Map_set, loaderData.loads, name, load);
      ProceedToLocate(loader, load);
      return load;
    };
  }
  function ProceedToLocate(loader, load) {
    var p = PromiseOf(undefined);
    p = callFunction(std_Promise_then, p, MakeClosure_CallLocate(loader, load));
    return ProceedToFetch(loader, load, p);
  }
  function ProceedToFetch(loader, load, p) {
    p = callFunction(std_Promise_then, p, MakeClosure_CallFetch(loader, load));
    return ProceedToTranslate(loader, load, p);
  }
  function ProceedToTranslate(loader, load, p) {
    p = callFunction(std_Promise_then, p, MakeClosure_CallTranslate(loader, load));
    p = callFunction(std_Promise_then, p, MakeClosure_CallInstantiate(loader, load));
    p = callFunction(std_Promise_then, p, MakeClosure_InstantiateSucceeded(loader, load));
    callFunction(std_Promise_catch, p, MakeClosure_LoadFailed(load));
  }
  function MakeClosure_CallLocate(loader, load) {
    return function(_) {
      return loader.locate({
        name: load.name,
        metadata: load.metadata
      });
    };
  }
  function MakeClosure_CallFetch(loader, load) {
    return function(address) {
      if (callFunction(std_Set_get_size, load.linkSets) === 0) return;
      load.address = address;
      return loader.fetch({
        name: load.name,
        metadata: load.metadata,
        address: address
      });
    };
  }
  function MakeClosure_CallTranslate(loader, load) {
    return function(source) {
      if (callFunction(std_Set_get_size, load.linkSets) === 0) return;
      return loader.translate({
        name: load.name,
        metadata: load.metadata,
        address: load.address,
        source: source
      });
    };
  }
  function MakeClosure_CallInstantiate(loader, load) {
    return function(source) {
      if (callFunction(std_Set_get_size, load.linkSets) === 0) return;
      load.source = source;
      return loader.instantiate({
        name: load.name,
        metadata: load.metadata,
        address: load.address,
        source: source
      });
    };
  }
  function MakeClosure_InstantiateSucceeded(loader, load) {
    return function(instantiateResult) {
      if (callFunction(std_Set_get_size, load.linkSets) === 0) return;
      var depsList;
      if (instantiateResult === undefined) {
        try {
          throw undefined;
        } catch (body) {
          body = $ParseModule(loader, load.source, load.name, load.address);
          load.body = body;
          load.kind = "declarative";
          depsList = $ModuleRequests(body);
        }
      } else if (IsObject(instantiateResult)) {
        var deps = instantiateResult.deps;
        depsList = deps === undefined ? []: $__spread(deps);
        var execute = instantiateResult.execute;
        load.execute = execute;
        load.kind = "dynamic";
      } else {
        throw std_TypeError("instantiate hook must return an object or undefined");
      }
      ;
      ;
      return ProcessLoadDependencies(load, loader, depsList);
    };
  }
  function ProcessLoadDependencies(load, loader, depsList) {
    var referrerName = load.name;
    load.dependencies = CreateMap();
    var loadPromises = [];
    for (var i = 0; i < depsList.length; i++) {
      var request = depsList[i];
      var p = RequestLoad(loader, request, referrerName, load.address);
      p = callFunction(std_Promise_then, p, MakeClosure_AddDependencyLoad(load, request));
      callFunction(std_Array_push, loadPromises, p);
    }
    var p = callFunction(std_Promise_all, std_Promise, loadPromises);
    p = callFunction(std_Promise_then, p, MakeClosure_LoadSucceeded(load));
    return p;
  }
  function MakeClosure_AddDependencyLoad(parentLoad, request) {
    return function(depLoad) {
      Assert(!callFunction(std_Map_has, parentLoad.dependencies, request));
      callFunction(std_Map_set, parentLoad.dependencies, request, depLoad.name);
      if (depLoad.status !== "linked") {
        var linkSets = SetToArray(parentLoad.linkSets);
        {
          try {
            throw undefined;
          } catch ($j) {
            $j = 0;
            for (; $j < linkSets.length; $j++) {
              try {
                throw undefined;
              } catch (j) {
                j = $j;
                try {
                  AddLoadToLinkSet(linkSets[j], depLoad);
                } finally {
                  $j = j;
                }
              }
            }
          }
        }
      }
    };
  }
  function MakeClosure_LoadSucceeded(load) {
    return function(_) {
      Assert(load.status === "loading");
      load.status = "loaded";
      var linkSets = SetToArray(load.linkSets);
      callFunction(std_Array_sort, linkSets, (function(a, b) {
        return b.timestamp - a.timestamp;
      }));
      {
        try {
          throw undefined;
        } catch ($i) {
          $i = 0;
          for (; $i < linkSets.length; $i++) {
            try {
              throw undefined;
            } catch (i) {
              i = $i;
              try {
                UpdateLinkSetOnLoad(linkSets[i], load);
              } finally {
                $i = i;
              }
            }
          }
        }
      }
    };
  }
  function CreateLinkSet(loader, startingLoad) {
    var loaderData = GetLoaderInternalData(loader);
    var resolve,
        reject;
    var done = new std_Promise(function(res, rej) {
      resolve = res;
      reject = rej;
    });
    var linkSet = {
      loader: loader,
      loads: CreateSet(),
      done: done,
      resolve: resolve,
      reject: reject,
      timestamp: loaderData.linkSetCounter++,
      loadingCount: 0
    };
    AddLoadToLinkSet(linkSet, startingLoad);
    return linkSet;
  }
  function AddLoadToLinkSet(linkSet, load) {
    Assert(load.status === "loading" || load.status === "loaded");
    var loaderData = GetLoaderInternalData(linkSet.loader);
    if (!callFunction(std_Set_has, linkSet.loads, load)) {
      callFunction(std_Set_add, linkSet.loads, load);
      callFunction(std_Set_add, load.linkSets, linkSet);
      if (load.status === "loaded") {
        try {
          throw undefined;
        } catch (names) {
          names = MapValuesToArray(load.dependencies);
          {
            try {
              throw undefined;
            } catch ($i) {
              $i = 0;
              for (; $i < names.length; $i++) {
                try {
                  throw undefined;
                } catch (i) {
                  i = $i;
                  try {
                    try {
                      throw undefined;
                    } catch (name) {
                      name = names[i];
                      if (!callFunction(std_Map_has, loaderData.modules, name)) {
                        try {
                          throw undefined;
                        } catch (depLoad) {
                          depLoad = callFunction(std_Map_get, loaderData.loads, name);
                          if (depLoad !== undefined) AddLoadToLinkSet(linkSet, depLoad);
                        }
                      }
                    }
                  } finally {
                    $i = i;
                  }
                }
              }
            }
          }
        }
      } else {
        linkSet.loadingCount++;
      }
    }
  }
  function UpdateLinkSetOnLoad(linkSet, load) {
    Assert(callFunction(std_Set_has, linkSet.loads, load));
    Assert(load.status === "loaded" || load.status === "linked");
    if (--linkSet.loadingCount !== 0) return;
    var startingLoad = callFunction(std_Set_iterator_next, callFunction(std_Set_iterator, linkSet.loads)).value;
    try {
      Link(linkSet.loads, linkSet.loader);
    } catch (exc) {
      LinkSetFailed(linkSet, exc);
      return;
    }
    Assert(callFunction(std_Set_get_size, linkSet.loads) === 0);
    linkSet.resolve(startingLoad);
  }
  function LinkSetFailed(linkSet, exc) {
    var loaderData = GetLoaderInternalData(linkSet.loader);
    var loads = SetToArray(linkSet.loads);
    for (var i = 0; i < loads.length; i++) {
      var load = loads[i];
      Assert(callFunction(std_Set_has, load.linkSets, linkSet));
      callFunction(std_Set_delete, load.linkSets, linkSet);
      if (callFunction(std_Set_get_size, load.linkSets) === 0) {
        try {
          throw undefined;
        } catch (name) {
          name = load.name;
          if (name !== undefined) {
            try {
              throw undefined;
            } catch (currentLoad) {
              currentLoad = callFunction(std_Map_get, loaderData.loads, name);
              if (currentLoad === load) {
                callFunction(std_Map_delete, loaderData.loads, name);
              }
            }
          }
        }
      }
    }
    return linkSet.reject(exc);
  }
  function FinishLoad(loader, load) {
    var loaderData = GetLoaderInternalData(loader);
    var name = load.name;
    if (name !== undefined) {
      Assert(!callFunction(std_Map_has, loaderData.modules, name));
      callFunction(std_Map_set, loaderData.modules, name, load.module);
    }
    var name = load.name;
    if (name !== undefined) {
      try {
        throw undefined;
      } catch (currentLoad) {
        currentLoad = callFunction(std_Map_get, loaderData.loads, name);
        if (currentLoad === load) {
          callFunction(std_Map_delete, loaderData.loads, name);
        }
      }
    }
    var linkSets = SetToArray(load.linkSets);
    for (var i = 0; i < linkSets.length; i++) {
      callFunction(std_Set_delete, linkSets[i].loads, load);
    }
    callFunction(std_Set_clear, load.linkSets);
  }
  function LoadModule(loader, name, options) {
    var loaderData = GetLoaderInternalData(loader);
    name = ToString(name);
    var address = GetOption(options, "address");
    var F = MakeClosure_AsyncStartLoadPartwayThrough(loader, loaderData, name, address === undefined ? "locate": "fetch", {}, address, undefined);
    return new std_Promise(F);
  }
  function MakeClosure_AsyncStartLoadPartwayThrough(loader, loaderData, name, step, metadata, address, source) {
    return function(resolve, reject) {
      if (callFunction(std_Map_has, loaderData.modules, name)) {
        throw std_TypeError("can't define module \"" + name + "\": already loaded");
      }
      if (callFunction(std_Map_has, loaderData.loads, name)) {
        throw std_TypeError("can't define module \"" + name + "\": already loading");
      }
      var load = CreateLoad(name);
      load.metadata = metadata;
      var linkSet = CreateLinkSet(loader, load);
      callFunction(std_Map_set, loaderData.loads, name, load);
      resolve(linkSet.done);
      if (step == "locate") {
        ProceedToLocate(loader, load);
      } else if (step == "fetch") {
        ProceedToFetch(loader, load, PromiseOf(address));
      } else {
        $Assert(step == "translate");
        load.address = address;
        var sourcePromise = PromiseOf(source);
        ProceedToTranslate(loader, load, sourcePromise);
      }
    };
  }
  function MakeClosure_EvaluateLoadedModule(loader) {
    return function(load) {
      Assert(load.status === "linked");
      var module = load.module;
      EnsureEvaluatedHelper(module, loader);
      return module;
    };
  }
  function Link(loads, loader) {
    loads = SetToArray(loads);
    for (var i = 0; i < loads.length; i++) {
      if (loads[i].kind !== "dynamic") throw new InternalError("Module linking is not implemented.");
    }
    LinkDynamicModules(loads, loader);
  }
  function LinkDynamicModules(loads, loader) {
    for (var i = 0; i < loads.length; i++) {
      var load = loads[i];
      var mod = callFunction(load.execute, undefined);
      if (!$IsModule(mod)) throw std_TypeError("factory.execute callback must return a Module object");
      load.module = mod;
      load.status = "linked";
      FinishLoad(loader, load);
    }
  }
  function EnsureEvaluated(mod, seen, loaderData) {
    callFunction(std_Set_add, seen, mod);
    var deps = $GetDependencies(mod);
    if (deps === undefined) return;
    {
      try {
        throw undefined;
      } catch ($i) {
        $i = 0;
        for (; $i < deps.length; $i++) {
          try {
            throw undefined;
          } catch (i) {
            i = $i;
            try {
              try {
                throw undefined;
              } catch (dep) {
                dep = deps[i];
                if (!callFunction(std_Set_has, seen, dep)) {
                  EnsureEvaluated(dep, seen, loaderData);
                }
              }
            } finally {
              $i = i;
            }
          }
        }
      }
    }
    if (!$HasBeenEvaluated(mod)) {
      $EvaluateModuleBody(loaderData.realm, mod);
    }
  }
  function EnsureEvaluatedHelper(mod, loader) {
    var seen = CreateSet();
    var loaderData = GetLoaderInternalData(loader);
    EnsureEvaluated(mod, seen, loaderData);
    seen = SetToArray(seen);
    {
      try {
        throw undefined;
      } catch ($i) {
        $i = 0;
        for (; $i < seen.length; $i++) {
          try {
            throw undefined;
          } catch (i) {
            i = $i;
            try {
              $SetDependencies(seen[i], undefined);
            } finally {
              $i = i;
            }
          }
        }
      }
    }
  }
  function CreateConstantGetter(key, value) {
    var getter = function() {
      return value;
    };
    return getter;
  }
  function Module(obj) {
    if (!IsObject(obj)) throw std_TypeError("Module argument must be an object");
    var mod = $CreateModule();
    var keys = std_Object_keys(obj);
    for (var i = 0; i < keys.length; i++) {
      var key = keys[i];
      var value = obj[key];
      std_Object_defineProperty(mod, key, {
        configurable: false,
        enumerable: true,
        get: CreateConstantGetter(key, value),
        set: undefined
      });
    }
    std_Object_preventExtensions(mod);
    return mod;
  }
  Module.prototype = null;
  var realmInternalDataMap = CreateWeakMap();
  function GetRealmInternalData(value) {
    if (typeof value !== "object") throw std_TypeError("Realm method or accessor called on incompatible primitive");
    var realmData = callFunction(std_WeakMap_get, realmInternalDataMap, value);
    if (realmData === undefined) throw std_TypeError("Realm method or accessor called on incompatible object");
    return realmData;
  }
  function Realm(options, initializer) {
    var realmObject = callFunction(Realm["@@create"], Realm);
    if (!IsObject(realmObject)) throw std_TypeError("Realm object expected");
    var realmData = callFunction(std_WeakMap_get, realmInternalDataMap, realmObject);
    if (realmData.realm !== undefined) throw std_TypeError("Realm object cannot be intitialized more than once");
    if (options === undefined) options = std_Object_create(null);
    if (!IsObject(options)) throw std_TypeError("options must be an object or undefined");
    var realm = $CreateRealm(realmObject);
    var evalHooks = UnpackOption(options, "eval", (function() {
      return ({});
    }));
    if (!IsObject(evalHooks)) throw std_TypeError("options.eval must be an object or undefined");
    var directEval = UnpackOption(evalHooks, "direct", (function() {
      return ({});
    }));
    if (!IsObject(directEval)) throw std_TypeError("options.eval.direct must be an object or undefined");
    var translate = UnpackOption(directEval, "translate");
    if (translate !== undefined && !IsCallable(translate)) throw std_TypeError("translate hook is not callable");
    realm.translateDirectEvalHook = translate;
    var fallback = UnpackOption(directEval, "fallback");
    if (fallback !== undefined && !IsCallable(fallback)) throw std_TypeError("fallback hook is not callable");
    realm.fallbackDirectEvalHook = fallback;
    var indirectEval = UnpackOption(evalHooks, "indirect");
    if (indirectEval !== undefined && !IsCallable(indirectEval)) throw std_TypeError("indirect eval hook is not callable");
    realm.indirectEvalHook = indirectEval;
    var Function = UnpackOption(options, "Function");
    if (Function !== undefined && !IsCallable(Function)) throw std_TypeError("Function hook is not callable");
    realm.FunctionHook = Function;
    realmData.realm = realm;
    if (initializer !== undefined) {
      if (!IsCallable(initializer)) throw std_TypeError("initializer is not callable");
      callFunction(initializer, realmObject, realm.builtins);
    }
    return realmObject;
  }
  def(Realm.prototype, {
    get global() {
      var realmData = GetRealmInternalData(this);
      return realmData.realm.globalThis;
    },
    eval: function(source) {
      var realmData = GetRealmInternalData(this);
      return $IndirectEval(realmData.realm, source);
    }
  });
  var Realm_create = function create() {
    var realmObject = std_Object_create(this.prototype);
    var realmData = {realm: undefined};
    callFunction(std_WeakMap_set, realmInternalDataMap, realmObject, realmData);
    return realmObject;
  };
  def(Realm, {"@@create": Realm_create});
  var loaderInternalDataMap = CreateWeakMap();
  function GetLoaderInternalData(value) {
    if (typeof value !== "object") throw std_TypeError("Loader method called on incompatible primitive");
    var loaderData = callFunction(std_WeakMap_get, loaderInternalDataMap, value);
    if (loaderData === undefined) throw std_TypeError("Loader method called on incompatible object");
    return loaderData;
  }
  function GetOption(options, name) {
    if (options === undefined) return undefined;
    if (!IsObject(options)) throw std_TypeError("options must be either an object or undefined");
    return options[name];
  }
  function Loader() {
    var options = arguments[0] !== (void 0) ? arguments[0]: {};
    var loader = callFunction(Loader["@@create"], Loader);
    if (!IsObject(loader)) throw std_TypeError("Loader object expected");
    var loaderData = callFunction(std_WeakMap_get, loaderInternalDataMap, loader);
    if (loaderData === undefined) throw std_TypeError("Loader object expected");
    if (loaderData.modules !== undefined) throw std_TypeError("Loader object cannot be intitialized more than once");
    if (!IsObject(options)) throw std_TypeError("options must be an object or undefined");
    var realmObject = options.realm;
    var realm;
    if (realmObject === undefined) {
      realm = undefined;
    } else if (IsObject(realmObject) && callFunction(std_WeakMap_has, realmInternalDataMap, realmObject)) {
      realm = GetRealmInternalData(realmObject).realm;
    } else {
      throw std_TypeError("options.realm is not a Realm object");
    }
    var hooks = ["normalize", "locate", "fetch", "translate", "instantiate"];
    {
      try {
        throw undefined;
      } catch ($i) {
        $i = 0;
        for (; $i < hooks.length; $i++) {
          try {
            throw undefined;
          } catch (i) {
            i = $i;
            try {
              try {
                throw undefined;
              } catch (name) {
                name = hooks[i];
                var hook = options[name];
                if (hook !== undefined) {
                  std_Object_defineProperty(loader, name, {
                    configurable: true,
                    enumerable: true,
                    value: hook,
                    writable: true
                  });
                }
              }
            } finally {
              $i = i;
            }
          }
        }
      }
    }
    loaderData.modules = CreateMap();
    loaderData.loads = CreateMap();
    loaderData.realm = realm;
    return loader;
  }
  function def(obj, props) {
    var names = Object.getOwnPropertyNames(props);
    for (var i = 0; i < names.length; i++) {
      var name = names[i];
      var desc = Object.getOwnPropertyDescriptor(props, name);
      desc.enumerable = false;
      Object.defineProperty(obj, name, desc);
    }
  }
  def(global, {
    Module: Module,
    Loader: Loader
  });
  var Loader_create = function create() {
    var loader = std_Object_create(this.prototype);
    var loaderData = {
      modules: undefined,
      loads: undefined,
      realm: undefined,
      linkSetCounter: 0
    };
    callFunction(std_WeakMap_set, loaderInternalDataMap, loader, loaderData);
    return loader;
  };
  def(Loader, {"@@create": Loader_create});
  function UnpackOption(options, name, thunk) {
    var value;
    return (options === undefined || ((value = options[name]) === undefined)) ? (thunk ? thunk(): undefined): value;
  }
  def(Loader.prototype, {
    get realm() {
      if (!IsObject(this) || !callFunction(std_WeakMap_has, loaderInternalDataMap, this)) {
        throw std_TypeError("not a Loader object");
      }
      return GetLoaderInternalData(this).realm.realmObject;
    },
    get global() {
      if (!IsObject(this) || !callFunction(std_WeakMap_has, loaderInternalDataMap, this)) {
        throw std_TypeError("not a Loader object");
      }
      return GetLoaderInternalData(this).realm.globalThis;
    },
    define: function define(name, source) {
      var options = arguments[2];
      var loader = this;
      var loaderData = GetLoaderInternalData(this);
      name = ToString(name);
      var address = GetOption(options, "address");
      var metadata = GetOption(options, "metadata");
      if (metadata === undefined) metadata = {};
      var f = MakeClosure_AsyncStartLoadPartwayThrough(loader, loaderData, name, "translate", metadata, address, source);
      var p = new std_Promise(f);
      p = callFunction(std_Promise_then, p, function(_) {});
      return p;
    },
    load: function load(name) {
      var options = arguments[1];
      var p = LoadModule(this, name, options);
      p = callFunction(std_Promise_then, p, function(_) {});
      return p;
    },
    module: function module (source) {
      var options = arguments[1];
      var loader = this;
      GetLoaderInternalData(this);
      var address = GetOption(options, "address");
      var load = CreateLoad(undefined);
      load.address = address;
      var linkSet = CreateLinkSet(loader, load);
      var p = callFunction(std_Promise_then, linkSet.done, MakeClosure_EvaluateLoadedModule(loader));
      var sourcePromise = PromiseOf(source);
      ProceedToTranslate(loader, load, sourcePromise);
      return p;
    },
    import: function import_(name) {
      var options = arguments[1];
      var loader = this;
      var p = LoadModule(loader, name, options);
      p = callFunction(std_Promise_then, p, MakeClosure_EvaluateLoadedModule(loader));
      return p;
    },
    eval: function(source) {
      var loaderData = GetLoaderInternalData(this);
      return $IndirectEval(loaderData.realm, source);
    },
    get: function get(name) {
      var loaderData = GetLoaderInternalData(this);
      name = ToString(name);
      var m = callFunction(std_Map_get, loaderData.modules, name);
      if (m !== undefined) EnsureEvaluatedHelper(m, this);
      return m;
    },
    has: function has(name) {
      var loaderData = GetLoaderInternalData(this);
      name = ToString(name);
      return callFunction(std_Map_has, loaderData.modules, name);
    },
    set: function set(name, module) {
      var loaderData = GetLoaderInternalData(this);
      name = ToString(name);
      if (!$IsModule(module)) throw std_TypeError("Module object required");
      callFunction(std_Map_set, loaderData.modules, name, module);
      return this;
    },
    delete: function delete_(name) {
      var loaderData = GetLoaderInternalData(this);
      name = ToString(name);
      return callFunction(std_Map_delete, loaderData.modules, name);
    },
    entries: function entries() {
      var loaderData = GetLoaderInternalData(this);
      return new LoaderIterator(callFunction(std_Map_entries, loaderData.modules));
    },
    keys: function keys() {
      var loaderData = GetLoaderInternalData(this);
      return new LoaderIterator(callFunction(std_Map_keys, loaderData.modules));
    },
    values: function values() {
      var loaderData = GetLoaderInternalData(this);
      return new LoaderIterator(callFunction(std_Map_values, loaderData.modules));
    },
    normalize: function normalize(name, referrerName, referrerAddress) {
      return name;
    },
    locate: function locate(load) {
      return load.name;
    },
    fetch: function fetch(load) {
      throw std_TypeError("Loader.prototype.fetch was called");
    },
    translate: function translate(load) {
      return load.source;
    },
    instantiate: function instantiate(load) {}
  });
  def(Loader.prototype, {"@@iterator": Loader.prototype.entries});
  function LoaderIterator(iterator) {
    $SetLoaderIteratorPrivate(this, iterator);
  }
  LoaderIterator.prototype = {
    next: function next() {
      return callFunction(std_Map_iterator_next, $GetLoaderIteratorPrivate(this));
    },
    "@@iterator": function() {
      return this;
    },
    "@@toStringTag": "Loader Iterator"
  };
})(typeof global !== 'undefined' ? global: this);

//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzL2pzLWxvYWRlcnMvTG9hZGVyLmpzLmVzNiIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL2pzLWxvYWRlcnMvTG9hZGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZ0NBLENBQUMsUUFBQSxDQUFVLE1BQUE7QUFDWCxjQUFBO0FBS0ksS0FBQSxrQkFBQSxFQUFvQixTQUFBLENBQUEsU0FBQSxDQUFBLElBQUE7QUFDcEIsS0FBQSxrQkFBQSxFQUFvQixTQUFBLENBQUEsU0FBQSxDQUFBLElBQUE7QUFDcEIsS0FBQSxLQUFBLEVBQU8sa0JBQUEsQ0FBQSxJQUFzQixDQUFDLGlCQUFBLENBQUE7QUFDOUIsS0FBQSxhQUFBLEVBQWUsS0FBSSxDQUFDLGlCQUFBLENBQW1CLGtCQUFBLENBQUE7QUFFdkMsS0FBQSxrQkFBQSxFQUFvQixPQUFBLENBQUEsTUFBQTtBQUNwQixLQUFBLDBCQUFBLEVBQTRCLE9BQUEsQ0FBQSxjQUFBO0FBQzVCLEtBQUEsZ0JBQUEsRUFBa0IsT0FBQSxDQUFBLElBQUE7QUFDbEIsS0FBQSw2QkFBQSxFQUErQixPQUFBLENBQUEsaUJBQUE7QUFDL0IsS0FBQSxlQUFBLEVBQWlCLE1BQUEsQ0FBQSxTQUFBLENBQUEsSUFBQTtBQUNqQixLQUFBLGVBQUEsRUFBaUIsTUFBQSxDQUFBLFNBQUEsQ0FBQSxJQUFBO0FBQ2pCLEtBQUEsUUFBQSxFQUFVLElBQUE7QUFDVixLQUFBLGlCQUFBLEVBQW1CLE9BQUEsQ0FBQSx3QkFBK0IsQ0FBQyxHQUFBLENBQUEsU0FBQSxDQUFlLE9BQUEsQ0FBQSxDQUFBLEdBQUE7QUFDbEUsS0FBQSxZQUFBLEVBQWMsSUFBQSxDQUFBLFNBQUEsQ0FBQSxHQUFBO0FBQ2QsS0FBQSxZQUFBLEVBQWMsSUFBQSxDQUFBLFNBQUEsQ0FBQSxHQUFBO0FBQ2QsS0FBQSxlQUFBLEVBQWlCLElBQUEsQ0FBQSxTQUFBLENBQUEsTUFBQTtBQUNqQixLQUFBLGNBQUEsRUFB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QU0sRUFBQTtBQUFBLEdBQUEsQ0FBQTtBQVc1QyxLQUFHLENBQUMsTUFBQSxDQUFBLFNBQUEsQ0FBa0IsRUFBQyxZQUFBLENBQWMsT0FBQSxDQUFBLFNBQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTtBQXNDckMsVUFBUyxlQUFBLENBQWUsUUFBQSxDQUFVO0FBQzlCLDZCQUF5QixDQUFDLElBQUEsQ0FBTSxTQUFBLENBQUE7QUFBQTtBQVdwQyxnQkFBQSxDQUFBLFNBQUEsRUFBMkI7QUFxQ3ZCLFFBQUEsQ0FBTSxTQUFTLEtBQUEsQ0FBSyxDQUFFO0FBQ2xCLFlBQU8sYUFBWSxDQUFDLHFCQUFBLENBQXVCLDBCQUF5QixDQUFDLElBQUEsQ0FBQSxDQUFBO0FBQUEsS0FBQTtBQU96RSxnQkFBQSxDQUFjLFNBQUEsQ0FBVSxDQUFFO0FBRXRCLFlBQU8sS0FBQTtBQUFBLEtBQUE7QUFlWCxtQkFBQSxDQUFpQjtBQUFBLEdBQUE7QUFBQSxDQUFBLENBR25CLENBQUMsTUFBTyxPQUFBLElBQVcsWUFBQSxFQUFjLE9BQUEsQ0FBUyxLQUFBLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLiAqL1xuXG4vLyAjIExvYWRlci5qcyAtIEVTNiBtb2R1bGUgbG9hZGVycyBpbGx1c3RyYXRlZFxuLy9cbi8vIFRoaXMgaXMgYSBzYW1wbGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIEVTNiBtb2R1bGUgbG9hZGVyLiAgVGhlIGNvZGUgaXNcbi8vIGludGVybGVhdmVkIHdpdGggY29tbWVudHMgY29udGFpbmluZyBkcmFmdCBzcGVjaWZpY2F0aW9uIGxhbmd1YWdlIGZvciB0aGVcbi8vIEVTNiBtb2R1bGUgc3lzdGVtLlxuLy9cbi8vIFNvdXJjZSBjb2RlIGlzIG9uIGdpdGh1Yjpcbi8vIFtqb3JlbmRvcmZmL2pzLWxvYWRlcnNdKGh0dHBzOi8vZ2l0aHViLmNvbS9qb3JlbmRvcmZmL2pzLWxvYWRlcnMpLlxuXG5cbi8vICMjIEN1cnJlbnQgc3RhdHVzXG4vL1xuLy8gVGhpcyBjb2RlIGRvZXMgbm90IHdvcmsgeWV0LCB0aG91Z2ggaXQgcGFzc2VzIFthIGZldyB2ZXJ5IGJhc2ljXG4vLyB0ZXN0c10oaHR0cHM6Ly9naXRodWIuY29tL2pvcmVuZG9yZmYvanMtbG9hZGVycy90cmVlL21hc3Rlci90ZXN0KS4gIFdlJ3JlXG4vLyBmb2N1c2luZyBvbiBwcm9kdWNpbmcgYSBjb2hlcmVudCBzcGVjIGRvY3VtZW50LiAgSSdtIGFsc28gdmVyeSBpbnRlcmVzdGVkIGluXG4vLyBzdGFuZGluZyB0aGUgc3lzdGVtIHVwIGFuZCBydW5uaW5nIHRlc3RzLCBidXQgdGhhdCB3aWxsIGhhdmUgdG8gd2FpdCBhIHdlZWtcbi8vIG9yIHR3by5cbi8vXG4vLyBUaGlzIGlzIG5vdCBhbiBpbnRyb2R1Y3Rpb24gdG8gdGhlIEVTNiBtb2R1bGUgc3lzdGVtLiBJdCdzIG5vdCBhIHR1dG9yaWFsIG9yXG4vLyBhIHJhdGlvbmFsZSBkb2N1bWVudC4gSXQncyBtYWlubHkgc3BlY2lmaWNhdGlvbiB0ZXh0IHdpdGggYSBmZXcgZXhwbGFuYXRvcnlcbi8vIGNvbW1lbnRzLlxuXG5cbi8vICMjIFByZWx1ZGVcbi8vXG4vLyBUaGlzIHNlY3Rpb24gaXMgbm90IGV4YWN0bHkgcml2ZXRpbmcgcmVhZGluZy4gSXQncyBzYWZlIHRvIHNraXAgZG93biB0b1xuLy8gJmxkcXVvO1ByaW1pdGl2ZXMmcmRxdW87LlxuLy9cbihmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiB1c2VzIHNvbWUgRVMgYnVpbHRpbnMuIFVzZXIgc2NyaXB0cyBtYXkgbXV0YXRlIG9yIGRlbGV0ZVxuLy8gdGhvc2UgYnVpbHRpbnMsIHNvIHdlIGNhcHR1cmUgZXZlcnl0aGluZyB3ZSBuZWVkIHVwIGZyb250LlxuLy9cbnZhciBzdGRfRnVuY3Rpb25fY2FsbCA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsO1xudmFyIHN0ZF9GdW5jdGlvbl9iaW5kID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ7XG52YXIgYmluZCA9IHN0ZF9GdW5jdGlvbl9jYWxsLmJpbmQoc3RkX0Z1bmN0aW9uX2JpbmQpO1xudmFyIGNhbGxGdW5jdGlvbiA9IGJpbmQoc3RkX0Z1bmN0aW9uX2NhbGwsIHN0ZF9GdW5jdGlvbl9jYWxsKTtcblxudmFyIHN0ZF9PYmplY3RfY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbnZhciBzdGRfT2JqZWN0X2RlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIHN0ZF9PYmplY3Rfa2V5cyA9IE9iamVjdC5rZXlzO1xudmFyIHN0ZF9PYmplY3RfcHJldmVudEV4dGVuc2lvbnMgPSBPYmplY3QucHJldmVudEV4dGVuc2lvbnM7XG52YXIgc3RkX0FycmF5X3B1c2ggPSBBcnJheS5wcm90b3R5cGUucHVzaDtcbnZhciBzdGRfQXJyYXlfc29ydCA9IEFycmF5LnByb3RvdHlwZS5zb3J0O1xudmFyIHN0ZF9TZXQgPSBTZXQ7XG52YXIgc3RkX1NldF9nZXRfc2l6ZSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoU2V0LnByb3RvdHlwZSwgXCJzaXplXCIpLmdldDtcbnZhciBzdGRfU2V0X2hhcyA9IFNldC5wcm90b3R5cGUuaGFzO1xudmFyIHN0ZF9TZXRfYWRkID0gU2V0LnByb3RvdHlwZS5hZGQ7XG52YXIgc3RkX1NldF9kZWxldGUgPSBTZXQucHJvdG90eXBlLmRlbGV0ZTtcbnZhciBzdGRfU2V0X2NsZWFyID0gU2V0LnByb3RvdHlwZS5jbGVhcjtcbnZhciBzdGRfU2V0X2l0ZXJhdG9yID0gU2V0LnByb3RvdHlwZVtcIkBAaXRlcmF0b3JcIl07XG52YXIgc3RkX1NldF9pdGVyYXRvcl9uZXh0ID0gbmV3IFNldCgpW1wiQEBpdGVyYXRvclwiXSgpLm5leHQ7XG52YXIgc3RkX01hcCA9IE1hcDtcbnZhciBzdGRfTWFwX2hhcyA9IE1hcC5wcm90b3R5cGUuaGFzO1xudmFyIHN0ZF9NYXBfZ2V0ID0gTWFwLnByb3RvdHlwZS5nZXQ7XG52YXIgc3RkX01hcF9zZXQgPSBNYXAucHJvdG90eXBlLnNldDtcbnZhciBzdGRfTWFwX2RlbGV0ZSA9IE1hcC5wcm90b3R5cGUuZGVsZXRlO1xudmFyIHN0ZF9NYXBfZW50cmllcyA9IE1hcC5wcm90b3R5cGUuZW50cmllcztcbnZhciBzdGRfTWFwX2tleXMgPSBNYXAucHJvdG90eXBlLmtleXM7XG52YXIgc3RkX01hcF92YWx1ZXMgPSBNYXAucHJvdG90eXBlLnZhbHVlcztcbnZhciBzdGRfTWFwX2l0ZXJhdG9yX25leHQgPSBuZXcgTWFwKCkua2V5cygpLm5leHQ7XG52YXIgc3RkX1dlYWtNYXAgPSBXZWFrTWFwO1xudmFyIHN0ZF9XZWFrTWFwX2hhcyA9IFdlYWtNYXAucHJvdG90eXBlLmhhcztcbnZhciBzdGRfV2Vha01hcF9nZXQgPSBXZWFrTWFwLnByb3RvdHlwZS5nZXQ7XG52YXIgc3RkX1dlYWtNYXBfc2V0ID0gV2Vha01hcC5wcm90b3R5cGUuc2V0O1xudmFyIHN0ZF9Qcm9taXNlID0gUHJvbWlzZTtcbnZhciBzdGRfUHJvbWlzZV9hbGwgPSBQcm9taXNlLmFsbDtcbnZhciBzdGRfUHJvbWlzZV9yZXNvbHZlID0gUHJvbWlzZS5yZXNvbHZlO1xudmFyIHN0ZF9Qcm9taXNlX3RoZW4gPSBQcm9taXNlLnByb3RvdHlwZS50aGVuO1xudmFyIHN0ZF9Qcm9taXNlX2NhdGNoID0gUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2g7XG52YXIgc3RkX1R5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxuXG4vLyBBIGhhbmRmdWwgb2YgdXRpbGl0eSBmdW5jdGlvbnMgYnVpbHQgZnJvbSBFUyBzdGFuZGFyZCBmYWNpbGl0aWVzLlxuXG4vLyBFUzYgVG9Cb29sZWFuIGFic3RyYWN0IG9wZXJhdGlvbi5cbmZ1bmN0aW9uIFRvQm9vbGVhbih2KSB7XG4gICAgcmV0dXJuICEhdjtcbn1cblxuLy8gRVM2IFRvU3RyaW5nIGFic3RyYWN0IG9wZXJhdGlvbi5cbmZ1bmN0aW9uIFRvU3RyaW5nKHYpIHtcbiAgICByZXR1cm4gXCJcIiArIHY7XG59XG5cbi8vICoqSXNPYmplY3QodikqKiAmbmRhc2g7IFJldHVybiB0cnVlIGlmIFR5cGUodikgaXMgT2JqZWN0LlxuLy8gUGVyaGFwcyBzdXJwcmlzaW5nbHksIHByb2Nlc3Mgb2YgZWxpbWluYXRpb24gaXMgdGhlIG9ubHkgY29ycmVjdCB3YXkgdG9cbi8vIGltcGxlbWVudCB0aGlzLiAgU2VlIFtFUzUgMTEuNC4zLCBcIlRoZSBgdHlwZW9mYFxuLy8gT3BlcmF0b3JcIl0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5jb20vfmpvcmVuZG9yZmYvZXM1LjEtZmluYWwuaHRtbCNzZWMtMTEuNC4zKS5cbi8vXG5mdW5jdGlvbiBJc09iamVjdCh2KSB7XG4gICAgcmV0dXJuIHYgIT09IG51bGwgJiZcbiAgICAgICAgICAgdiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgIHR5cGVvZiB2ICE9PSBcImJvb2xlYW5cIiAmJlxuICAgICAgICAgICB0eXBlb2YgdiAhPT0gXCJudW1iZXJcIiAmJlxuICAgICAgICAgICB0eXBlb2YgdiAhPT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICB0eXBlb2YgdiAhPT0gXCJzeW1ib2xcIjtcbn1cblxuLy8gRVM2IElzQ2FsbGFibGUgYWJzdHJhY3Qgb3BlcmF0aW9uLlxuZnVuY3Rpb24gSXNDYWxsYWJsZSh2KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2ID09PSBcImZ1bmN0aW9uXCI7XG59XG5cbi8vIFRoaXMgaW1wbGVtZW50YXRpb24gdXNlcyBFUzYgU2V0LCBNYXAsIGFuZCBXZWFrTWFwIG9iamVjdHMgaW4gc29tZSBwbGFjZXNcbi8vIHdoZXJlIHRoZSBzcGVjIHRleHQgcmVmZXJzIHRvIExpc3RzIGFuZCBpbnRlcm5hbCBzbG90cy5cbi8vXG4vLyBCdWc6IEluIGltcGxlbWVudGF0aW9ucyB0aGF0IHN1cHBvcnQgQEBjcmVhdGUsIHRoZSBgQ3JlYXRlU2V0KClgIGZ1bmN0aW9uXG4vLyBnaXZlbiBoZXJlIHdvdWxkIGJlIGFmZmVjdGVkIGJ5IG1vZGlmeWluZyB0aGUgQEBjcmVhdGUgbWV0aG9kIG9mIHRoZSBTZXRcbi8vIGJ1aWx0aW4gKHdoaWNoIGlzIGEgY29uZmlndXJhYmxlIHByb3BlcnR5KS4gVGhpcyBpbXBsZW1lbnRhdGlvbiB3aWxsIGNoYW5nZVxuLy8gd2hlbmV2ZXIgQEBjcmVhdGUgaXMgaW1wbGVtZW50ZWQuIFRoZSBzYW1lIGlzIHRydWUgZm9yIGBDcmVhdGVNYXAoKWAgYW5kXG4vLyBgQ3JlYXRlV2Vha01hcCgpYC5cbi8vXG5mdW5jdGlvbiBDcmVhdGVTZXQoKSB7XG4gICAgcmV0dXJuIG5ldyBzdGRfU2V0O1xufVxuXG5mdW5jdGlvbiBDcmVhdGVNYXAoKSB7XG4gICAgcmV0dXJuIG5ldyBzdGRfTWFwO1xufVxuXG5mdW5jdGlvbiBDcmVhdGVXZWFrTWFwKCkge1xuICAgIHJldHVybiBuZXcgc3RkX1dlYWtNYXA7XG59XG5cbmZ1bmN0aW9uIEl0ZXJhdG9yVG9BcnJheShpdGVyLCBuZXh0KSB7XG4gICAgdmFyIGEgPSBbXTtcbiAgICBmb3IgKHZhciB4ID0gY2FsbEZ1bmN0aW9uKG5leHQsIGl0ZXIpOyAheC5kb25lOyB4ID0gY2FsbEZ1bmN0aW9uKG5leHQsIGl0ZXIpKVxuICAgICAgICBjYWxsRnVuY3Rpb24oc3RkX0FycmF5X3B1c2gsIGEsIHgudmFsdWUpO1xuICAgIHJldHVybiBhO1xufVxuXG5mdW5jdGlvbiBTZXRUb0FycmF5KHNldCkge1xuICAgIHJldHVybiBJdGVyYXRvclRvQXJyYXkoY2FsbEZ1bmN0aW9uKHN0ZF9TZXRfaXRlcmF0b3IsIHNldCksIHN0ZF9TZXRfaXRlcmF0b3JfbmV4dCk7XG59XG5cbmZ1bmN0aW9uIE1hcFZhbHVlc1RvQXJyYXkobWFwKSB7XG4gICAgcmV0dXJuIEl0ZXJhdG9yVG9BcnJheShjYWxsRnVuY3Rpb24oc3RkX01hcF92YWx1ZXMsIG1hcCksIHN0ZF9NYXBfaXRlcmF0b3JfbmV4dCk7XG59XG5cbi8vIFRoZSBMb2FkZXIgc3BlYyB1c2VzIGEgZmV3IG9wZXJhdGlvbnMgdGhhdCB3aWxsIGxpa2VseSBiZSBwcm92aWRlZCBieSB0aGVcbi8vIFByb21pc2Ugc3BlYy5cbmZ1bmN0aW9uIFByb21pc2VPZih2YWx1ZSkge1xuICAgIC8vIEltcGxlbWVudGF0aW9uIG5vdGU6IENhbGxpbmcgYFByb21pc2UucmVzb2x2ZSgpYCBoZXJlIGlzIHVzZXItb2JzZXJ2YWJsZVxuICAgIC8vIHNpbmNlIGBQcm9taXNlW1N5bWJvbC5jcmVhdGVdYCBtYXkgaGF2ZSBiZWVuIG11dGF0ZWQuICBUaGlzIGlzXG4gICAgLy8gY29uc2lkZXJlZCBhIGJ1Zy4gIFVzZXIgY29kZSBzaG91bGQgbm90IGJlIGFibGUgdG8gb2JzZXJ2ZSB3aGV0aGVyIHRoZVxuICAgIC8vIGltcGxlbWVudGF0aW9uIHVzZXMgUHJvbWlzZXMgaW50ZXJuYWxseSBvciBub3QuXG4gICAgLy9cbiAgICAvLyBFdmVyeSB1c2Ugb2YgYG5ldyBQcm9taXNlYCwgYFByb21pc2UuYWxsYCwgYFByb21pc2UucHJvdG90eXBlLnRoZW5gLCBhbmRcbiAgICAvLyBgUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2hgIGluIHRoaXMgc3BlYyBoYXMgdGhlIHNhbWUgcHJvYmxlbS5cbiAgICAvL1xuICAgIC8vIFRoZSBwbGFuIGlzIGZvciB0aGUgUHJvbWlzZSBzcGVjIHRvIGFkZHJlc3MgdGhpcyBieSBleHBvc2luZyBwcmltaXRpdmVzXG4gICAgLy8gdGhhdCBwZXJmb3JtIHRoZXNlIG9wZXJhdGlvbnMgYnV0IGFyZSBpbW11bmUgdG8gdXNlciB0YW1wZXJpbmcuICBUaGlzIGlzXG4gICAgLy8gW2lzc3VlICM3M10oaHR0cHM6Ly9naXRodWIuY29tL2RvbWVuaWMvcHJvbWlzZXMtdW53cmFwcGluZy9pc3N1ZXMvNzMpIGluXG4gICAgLy8gdGhlIEdpdEh1YiByZXBvc2l0b3J5IHdoZXJlIHRoZSBQcm9taXNlIHNwZWMgaXMgYmVpbmcgZGV2ZWxvcGVkLlxuICAgIC8vXG4gICAgcmV0dXJuIGNhbGxGdW5jdGlvbihzdGRfUHJvbWlzZV9yZXNvbHZlLCBzdGRfUHJvbWlzZSwgdmFsdWUpO1xufVxuXG4vLyBgQXNzZXJ0KGNvbmRpdGlvbilgIGlzIHlvdXIgYm9nLXN0YW5kYXJkIGFzc2VydCBmdW5jdGlvbi4gSW4gdGhlb3J5LCBpdCBkb2VzXG4vLyBub3RoaW5nLiBUaGUgZ2l2ZW4gYGNvbmRpdGlvbmAgaXMgYWx3YXlzIHRydWUuXG5mdW5jdGlvbiBBc3NlcnQoY29uZGl0aW9uKSB7XG4gICAgaWYgKHR5cGVvZiBhc3NlcnQgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgYXNzZXJ0KGNvbmRpdGlvbik7XG4gICAgZWxzZSBpZiAodHlwZW9mIGFzc2VydEVxID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIGFzc2VydEVxKGNvbmRpdGlvbiwgdHJ1ZSk7XG5cbiAgICBpZiAoY29uZGl0aW9uICE9PSB0cnVlKVxuICAgICAgICB0aHJvdyBcImFzc2VydGlvbiBmYWlsZWRcIjtcbn1cblxuXG4vLyAjIyBQcmltaXRpdmVzXG4vL1xuLy8gV2UgcmVseSBvbiB0aGUgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiB0byBwcm92aWRlIGEgZmV3IHByaW1pdGl2ZXMuICBZb3Vcbi8vIGNhbiBza2lwIG92ZXIgdGhpcyBzdHVmZiB0b28uICBPbiB0aGUgb3RoZXIgaGFuZCwgaXQgdGVsbHMgd2hhdCBzb3J0IG9mXG4vLyB0aGluZyB3ZSdsbCBiZSBkb2luZyBoZXJlLlxuXG4vLyBUaGUgZmlyc3QgdHdvIHByaW1pdGl2ZXMgcGFyc2UgRUNNQVNjcmlwdCBjb2RlLlxuLy9cbi8vICAgKiBgJFBhcnNlTW9kdWxlKGxvYWRlciwgc291cmNlLCBtb2R1bGVOYW1lLCBhZGRyZXNzKWAgcGFyc2VzIHRoZSBzdHJpbmdcbi8vICAgICBgc291cmNlYCBhcyBhbiBFUzYgTW9kdWxlLiAgUmV0dXJucyBhIE1vZHVsZUJvZHkgb2JqZWN0LlxuLy9cbi8vICAgKiBgJFBhcnNlU2NyaXB0KHNvdXJjZSlgIHBhcnNlcyB0aGUgc3RyaW5nIGBzb3VyY2VgIGFzIGFuIEVTNiBTY3JpcHQuXG4vLyAgICAgUmV0dXJucyBhIFN0YXRlbWVudExpc3Qgb2JqZWN0LlxuLy9cbi8vIEJvdGggcHJpbWl0aXZlcyBkZXRlY3QgRVMgXCJlYXJseSBlcnJvcnNcIiBhbmQgdGhyb3cgYFN5bnRheEVycm9yYCBvclxuLy8gYFJlZmVyZW5jZUVycm9yYC5cbi8vXG4vLyBOb3RlIHRoYXQgbmVpdGhlciBwcmltaXRpdmUgcnVucyBhbnkgb2YgdGhlIGNvZGUgaW4gYHNvdXJjZWAuXG4vL1xuLy8gTW9kdWxlQm9keSBhbmQgU3RhdGVtZW50TGlzdCBvYmplY3RzIGFyZSBuZXZlciBleHBvc2VkIHRvIHVzZXIgY29kZS4gVGhleVxuLy8gYXJlIGZvciB1c2Ugd2l0aCB0aGUgcHJpbWl0aXZlcyBiZWxvdyBvbmx5LiBUaGVzZSB0d28gcGFyc2luZyBwcmltaXRpdmVzIGFyZVxuLy8gdGhlIG9ubHkgd2F5IG9iamVjdHMgb2YgdGhlc2UgdHlwZXMgYXJlIGNyZWF0ZWQuXG4vL1xuLy8gVGhlIGZvbGxvd2luZyBwcmltaXRpdmUgZXh0cmFjdHMgaW5mb3JtYXRpb24gZnJvbSBhIE1vZHVsZUJvZHkgb2JqZWN0LlxuLy9cbi8vICAgKiBgJE1vZHVsZVJlcXVlc3RzKGJvZHkpYCByZXR1cm5zIGFuIEFycmF5IG9mIHN0cmluZ3MsIHRoZSBtb2R1bGVcbi8vICAgICBzcGVjaWZpZXJzIGFzIHRoZXkgYXBwZWFyIGluIGltcG9ydCBkZWNsYXJhdGlvbnMgYW5kIG1vZHVsZSBkZWNsYXJhdGlvbnNcbi8vICAgICBpbiB0aGUgZ2l2ZW4gbW9kdWxlIGJvZHksIHdpdGggZHVwbGljYXRlcyByZW1vdmVkLiAoVGhpcyBjb3JyZXNwb25kcyB0b1xuLy8gICAgIHRoZSBNb2R1bGVSZXF1ZXN0cyBzdGF0aWMgc2VtYW50aWNzIG9wZXJhdGlvbi4pXG4vL1xuLy8gVGhlIGZvbGxvd2luZyBwcmltaXRpdmVzIG9wZXJhdGUgb24gTW9kdWxlIG9iamVjdHMuXG5cbi8vICAgKiBgJENyZWF0ZU1vZHVsZSgpYCByZXR1cm5zIGEgbmV3IGBNb2R1bGVgIG9iamVjdC4gVGhlIG9iamVjdCBpc1xuLy8gICAgIGV4dGVuc2libGUuICBJdCBtdXN0IG5vdCBiZSBleHBvc2VkIHRvIHNjcmlwdHMgdW50aWwgaXQgaGFzIGJlZW5cbi8vICAgICBwb3B1bGF0ZWQgYW5kIGZyb3plbi5cbi8vXG52YXIgbW9kdWxlSW50ZXJuYWxEYXRhTWFwID0gQ3JlYXRlV2Vha01hcCgpO1xuZnVuY3Rpb24gR2V0TW9kdWxlSW50ZXJuYWxEYXRhKG1vZHVsZSkge1xuICAgIHJldHVybiBjYWxsRnVuY3Rpb24oc3RkX1dlYWtNYXBfZ2V0LCBtb2R1bGVJbnRlcm5hbERhdGFNYXAsIG1vZHVsZSk7XG59XG5cbmZ1bmN0aW9uICRDcmVhdGVNb2R1bGUoKSB7XG4gICAgdmFyIG1vZHVsZSA9IHN0ZF9PYmplY3RfY3JlYXRlKG51bGwpO1xuICAgIHZhciBtb2R1bGVEYXRhID0ge1xuICAgICAgICBkZXBlbmRlbmNpZXM6IHVuZGVmaW5lZCxcbiAgICAgICAgZXZhbHVhdGVkOiBmYWxzZVxuICAgIH07XG4gICAgY2FsbEZ1bmN0aW9uKHN0ZF9XZWFrTWFwX3NldCwgbW9kdWxlSW50ZXJuYWxEYXRhTWFwLCBtb2R1bGUsIG1vZHVsZURhdGEpO1xuICAgIHJldHVybiBtb2R1bGU7XG59XG5cbi8vICAgKiBgJElzTW9kdWxlKHYpYCByZXR1cm5zIHRydWUgaWYgYHZgIGlzIGEgYE1vZHVsZWAgb2JqZWN0LlxuLy9cbmZ1bmN0aW9uICRJc01vZHVsZShtb2R1bGUpIHtcbiAgICByZXR1cm4gR2V0TW9kdWxlSW50ZXJuYWxEYXRhKG1vZHVsZSkgIT09IHVuZGVmaW5lZDtcbn1cblxuLy8gICAqIGAkR2V0RGVwZW5kZW5jaWVzKG1vZHVsZSlgIHJldHVybnMgbW9kdWxlLltbRGVwZW5kZW5jaWVzXV0uICBUaGlzIGlzXG4vLyAgICAgZWl0aGVyIHVuZGVmaW5lZCBvciBhbiBhcnJheSBvZiBNb2R1bGUgb2JqZWN0cywgdGhlIG1vZHVsZXMgd2hvc2UgYm9kaWVzXG4vLyAgICAgYXJlIHRvIGJlIGV2YWx1YXRlZCBiZWZvcmUgdGhlIGdpdmVuIG1vZHVsZSdzIGJvZHkuICBBIHJldHVybiB2YWx1ZSBvZlxuLy8gICAgIHVuZGVmaW5lZCBtZWFucyB0aGUgc2FtZSB0aGluZyBhcyByZXR1cm5pbmcgYW4gZW1wdHkgYXJyYXkgdG8gdGhlIHNvbGVcbi8vICAgICBjYWxsZXIsIEVuc3VyZUV2YWx1YXRlZCgpLlxuLy9cbmZ1bmN0aW9uICRHZXREZXBlbmRlbmNpZXMobW9kdWxlKSB7XG4gICAgcmV0dXJuIEdldE1vZHVsZUludGVybmFsRGF0YShtb2R1bGUpLmRlcGVuZGVuY2llcztcbn1cblxuLy8gICAqIGAkU2V0RGVwZW5kZW5jaWVzKG1vZHVsZSwgZGVwcylgIHNldHMgbW9kdWxlLltbRGVwZW5kZW5jaWVzXV0uXG4vL1xuZnVuY3Rpb24gJFNldERlcGVuZGVuY2llcyhtb2R1bGUsIGRlcHMpIHtcbiAgICBHZXRNb2R1bGVJbnRlcm5hbERhdGEobW9kdWxlKS5kZXBlbmRlbmNpZXMgPSBkZXBzO1xufVxuXG4vLyAgICogYCRFdmFsdWF0ZU1vZHVsZUJvZHkocmVhbG0sIG1vZClgIHJ1bnMgdGhlIGJvZHkgb2YgdGhlIGdpdmVuIG1vZHVsZSBpblxuLy8gICAgIHRoZSBjb250ZXh0IG9mIGEgZ2l2ZW4gcmVhbG0uIFJldHVybnMgdW5kZWZpbmVkLlxuLy9cbi8vICAgKiBgJEhhc0JlZW5FdmFsdWF0ZWQobW9kKWAgcmV0dXJucyB0cnVlIGlmIG1vZCBoYXMgZXZlciBiZWVuIHBhc3NlZCB0b1xuLy8gICAgICRFdmFsdWF0ZU1vZHVsZUJvZHkuXG4vL1xuZnVuY3Rpb24gJEhhc0JlZW5FdmFsdWF0ZWQobW9kdWxlKSB7XG4gICAgcmV0dXJuIEdldE1vZHVsZUludGVybmFsRGF0YShtb2R1bGUpLmV2YWx1YXRlZDtcbn1cblxuLy8gTG9hZGVyIGl0ZXJhdG9ycyByZXF1aXJlIGEgbGl0dGxlIHByaXZhdGUgc3RhdGUuXG4vL1xuLy8gICAqIGAkU2V0TG9hZGVySXRlcmF0b3JQcml2YXRlKGl0ZXIsIHZhbHVlKWAgc3RvcmVzIGB2YWx1ZWAgaW4gYW4gaW50ZXJuYWxcbi8vICAgICBzbG90IG9mIGBpdGVyYC5cbi8vXG52YXIgbG9hZGVySXRlcmF0b3JJbnRlcm5hbERhdGFNYXAgPSBDcmVhdGVXZWFrTWFwKCk7XG5mdW5jdGlvbiAkU2V0TG9hZGVySXRlcmF0b3JQcml2YXRlKGl0ZXIsIHZhbHVlKSB7XG4gICAgY2FsbEZ1bmN0aW9uKHN0ZF9XZWFrTWFwX3NldCwgbG9hZGVySXRlcmF0b3JJbnRlcm5hbERhdGFNYXAsIGl0ZXIsIHZhbHVlKTtcbn1cblxuLy8gICAqIGAkR2V0TG9hZGVySXRlcmF0b3JQcml2YXRlKGl0ZXIpYCByZXRyaWV2ZXMgdGhlIHZhbHVlIHByZXZpb3VzbHkgc3RvcmVkXG4vLyAgICAgdXNpbmcgJFNldExvYWRlckl0ZXJhdG9yUHJpdmF0ZS4gSWYgbm8gdmFsdWUgd2FzIHByZXZpb3VzbHkgc3RvcmVkLFxuLy8gICAgIHRocm93IGEgVHlwZUVycm9yLlxuLy9cbmZ1bmN0aW9uICRHZXRMb2FkZXJJdGVyYXRvclByaXZhdGUoaXRlcikge1xuICAgIGlmICghSXNPYmplY3QoaXRlcikpIHtcbiAgICAgICAgdGhyb3cgc3RkX1R5cGVFcnJvcihcbiAgICAgICAgICAgIFwiTG9hZGVyIEl0ZXJhdG9yIG1ldGhvZCBjYWxsZWQgb24gYW4gaW5jb21wYXRpYmxlIFwiICsgdHlwZW9mIGl0ZXIpO1xuICAgIH1cbiAgICBpZiAoIWNhbGxGdW5jdGlvbihzdGRfV2Vha01hcF9oYXMsIGxvYWRlckl0ZXJhdG9ySW50ZXJuYWxEYXRhTWFwLCBpdGVyKSkge1xuICAgICAgICB0aHJvdyBzdGRfVHlwZUVycm9yKFxuICAgICAgICAgICAgXCJMb2FkZXIgSXRlcmF0b3IgbWV0aG9kIGNhbGxlZCBvbiBhbiBpbmNvbXBhdGlibGUgb2JqZWN0XCIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FsbEZ1bmN0aW9uKHN0ZF9XZWFrTWFwX2dldCwgbG9hZGVySXRlcmF0b3JJbnRlcm5hbERhdGFNYXAsIGl0ZXIpO1xufVxuXG4vLyBUaGUgZm9sbG93aW5nIHByaW1pdGl2ZXMgZGVhbCB3aXRoIHJlYWxtcy5cbi8vXG4vLyAgICogYCRDcmVhdGVSZWFsbShyZWFsbU9iamVjdClgIGNyZWF0ZXMgYSBuZXcgcmVhbG0gZm9yIGV2YWx1YXRpbmcgbW9kdWxlXG4vLyAgICAgYW5kIHNjcmlwdCBjb2RlLiBUaGlzIGNhbiBiZSBwb2x5ZmlsbGVkIGluIHRoZSBicm93c2VyIHVzaW5nIGFuIGlmcmFtZSxcbi8vICAgICBbYXMgc2hvd24gaW4gdGhpcyBzYW1wbGVcbi8vICAgICBjb2RlXShodHRwczovL2dpc3QuZ2l0aHViLmNvbS93eWNhdHMvOGY1MjYzYTBiY2M4ZTgxOGI4ZTUpLlxuLy9cbi8vICAgKiBgJEluZGlyZWN0RXZhbChyZWFsbSwgc291cmNlKWAgcGVyZm9ybXMgYW4gaW5kaXJlY3QgZXZhbCBpbiB0aGUgZ2l2ZW5cbi8vICAgICByZWFsbSBmb3IgdGhlIGdpdmVuIHNjcmlwdCBzb3VyY2UuXG4vL1xuXG5cblxuXG4vLz4gIyBNb2R1bGVzOiBTZW1hbnRpY3Ncbi8vPlxuLy8+ICMjIE1vZHVsZSBMb2FkaW5nXG4vLz5cbi8vPiAjIyMgTG9hZCBSZWNvcmRzXG4vLz5cbi8vPiBUaGUgTG9hZCBSZWNvcmQgdHlwZSByZXByZXNlbnRzIGFuIGF0dGVtcHQgdG8gbG9jYXRlLCBmZXRjaCwgdHJhbnNsYXRlLCBhbmRcbi8vPiBwYXJzZSBhIHNpbmdsZSBtb2R1bGUuXG4vLz5cbi8vPiBFYWNoIExvYWQgUmVjb3JkIGhhcyB0aGUgZm9sbG93aW5nIGZpZWxkczpcbi8vPlxuLy8+ICAgKiBsb2FkLltbU3RhdHVzXV0gJm5kYXNoOyBPbmUgb2Y6IGBcImxvYWRpbmdcImAsIGBcImxvYWRlZFwiYCwgYFwibGlua2VkXCJgLCBvclxuLy8+ICAgICBgXCJmYWlsZWRcImAuXG4vLz5cbi8vPiAgICogbG9hZC5bW05hbWVdXSAmbmRhc2g7IFRoZSBub3JtYWxpemVkIG5hbWUgb2YgdGhlIG1vZHVsZSBiZWluZyBsb2FkZWQsXG4vLz4gICAgIG9yICoqdW5kZWZpbmVkKiogaWYgbG9hZGluZyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuLy8+XG4vLz4gICAqIGxvYWQuW1tMaW5rU2V0c11dICZuZGFzaDsgQSBMaXN0IG9mIGFsbCBMaW5rU2V0cyB0aGF0IHJlcXVpcmUgdGhpcyBsb2FkXG4vLz4gICAgIHRvIHN1Y2NlZWQuICBUaGVyZSBpcyBhIG1hbnktdG8tbWFueSByZWxhdGlvbiBiZXR3ZWVuIExvYWRzIGFuZFxuLy8+ICAgICBMaW5rU2V0cy4gIEEgc2luZ2xlIGBpbXBvcnQoKWAgY2FsbCBjYW4gaGF2ZSBhIGxhcmdlIGRlcGVuZGVuY3kgdHJlZSxcbi8vPiAgICAgaW52b2x2aW5nIG1hbnkgTG9hZHMuICBNYW55IGBpbXBvcnQoKWAgY2FsbHMgY2FuIGJlIHdhaXRpbmcgZm9yIGFcbi8vPiAgICAgc2luZ2xlIExvYWQsIGlmIHRoZXkgZGVwZW5kIG9uIHRoZSBzYW1lIG1vZHVsZS5cbi8vPlxuLy8+ICAgKiBsb2FkLltbTWV0YWRhdGFdXSAmbmRhc2g7IEFuIG9iamVjdCB3aGljaCBsb2FkZXIgaG9va3MgbWF5IHVzZSBmb3IgYW55XG4vLz4gICAgIHB1cnBvc2UuICBTZWUgTG9hZGVyLnByb3RvdHlwZS5sb2NhdGUuXG4vLz5cbi8vPiAgICogbG9hZC5bW0FkZHJlc3NdXSAmbmRhc2g7IFRoZSByZXN1bHQgb2YgdGhlIGxvY2F0ZSBob29rLlxuLy8+XG4vLz4gICAqIGxvYWQuW1tTb3VyY2VdXSAmbmRhc2g7IFRoZSByZXN1bHQgb2YgdGhlIHRyYW5zbGF0ZSBob29rLlxuLy8+XG4vLz4gICAqIGxvYWQuW1tLaW5kXV0gJm5kYXNoOyBPbmNlIHRoZSBMb2FkIHJlYWNoZXMgdGhlIGBcImxvYWRlZFwiYCBzdGF0ZSxcbi8vPiAgICAgZWl0aGVyICoqZGVjbGFyYXRpdmUqKiBvciAqKmR5bmFtaWMqKi4gIElmIHRoZSBgaW5zdGFudGlhdGVgIGhvb2tcbi8vPiAgICAgcmV0dXJuZWQgdW5kZWZpbmVkLCB0aGUgbW9kdWxlIGlzIGRlY2xhcmF0aXZlLCBhbmQgbG9hZC5bW0JvZHldXVxuLy8+ICAgICBjb250YWlucyBhIE1vZHVsZSBwYXJzZS4gIE90aGVyd2lzZSwgdGhlIGBpbnN0YW50aWF0ZWAgaG9vayByZXR1cm5lZCBhXG4vLz4gICAgIE1vZHVsZUZhY3Rvcnkgb2JqZWN0OyBsb2FkLltbRXhlY3V0ZV1dIGNvbnRhaW5zIHRoZSBgLmV4ZWN1dGVgIGNhbGxhYmxlXG4vLz4gICAgIG9iamVjdC5cbi8vPlxuLy8+ICAgKiBsb2FkLltbQm9keV1dICZuZGFzaDsgQSBNb2R1bGUgcGFyc2UsIGlmIGxvYWQuW1tLaW5kXV0gaXNcbi8vPiAgICAgKipkZWNsYXJhdGl2ZSoqLiBPdGhlcndpc2UgdW5kZWZpbmVkLlxuLy8+XG4vLz4gICAqIGxvYWQuW1tFeGVjdXRlXV0gJm5kYXNoOyBUaGUgdmFsdWUgb2YgYGZhY3RvcnkuZXhlY3V0ZWAsIGlmXG4vLz4gICAgIGxvYWQuW1tLaW5kXV0gaXMgKipkeW5hbWljKiouIE90aGVyd2lzZSB1bmRlZmluZWQuXG4vLz5cbi8vPiAgICogbG9hZC5bW0RlcGVuZGVuY2llc11dICZuZGFzaDsgT25jZSB0aGUgTG9hZCByZWFjaGVzIHRoZSBgXCJsb2FkZWRcImBcbi8vPiAgICAgc3RhdGUsIGEgTGlzdCBvZiBwYWlycy4gRWFjaCBwYWlyIGNvbnNpc3RzIG9mIHR3byBzdHJpbmdzOiBhIG1vZHVsZVxuLy8+ICAgICBuYW1lIGFzIGl0IGFwcGVhcnMgaW4gYSBgbW9kdWxlYCwgYGltcG9ydGAsIG9yIGBleHBvcnQgZnJvbWBcbi8vPiAgICAgZGVjbGFyYXRpb24gaW4gbG9hZC5bW0JvZHldXSwgYW5kIHRoZSBjb3JyZXNwb25kaW5nIG5vcm1hbGl6ZWQgbW9kdWxlXG4vLz4gICAgIG5hbWUuXG4vLz5cbi8vPiAgICogbG9hZC5bW0V4Y2VwdGlvbl1dICZuZGFzaDsgSWYgbG9hZC5bW1N0YXR1c11dIGlzIGBcImZhaWxlZFwiYCwgdGhlXG4vLz4gICAgIGV4Y2VwdGlvbiB2YWx1ZSB0aGF0IHdhcyB0aHJvd24sIGNhdXNpbmcgdGhlIGxvYWQgdG8gZmFpbC4gT3RoZXJ3aXNlLFxuLy8+ICAgICAqKm51bGwqKi5cbi8vPlxuLy8+ICAgKiBsb2FkLltbTW9kdWxlXV0gJm5kYXNoOyBUaGUgTW9kdWxlIG9iamVjdCBwcm9kdWNlZCBieSB0aGlzIGxvYWQsIG9yXG4vLz4gICAgIHVuZGVmaW5lZC5cbi8vPlxuLy8+ICAgICBJZiB0aGUgYGluc3RhbnRpYXRlYCBob29rIHJldHVybnMgdW5kZWZpbmVkLCBsb2FkLltbTW9kdWxlXV0gaXNcbi8vPiAgICAgcG9wdWxhdGVkIGF0IHRoYXQgcG9pbnQsIGlmIHBhcnNpbmcgc3VjY2VlZHMgYW5kIHRoZXJlIGFyZSBubyBlYXJseVxuLy8+ICAgICBlcnJvcnMuXG4vLz5cbi8vPiAgICAgT3RoZXJ3aXNlIHRoZSBgaW5zdGFudGlhdGVgIGhvb2sgcmV0dXJucyBhIGZhY3Rvcnkgb2JqZWN0LCBhbmRcbi8vPiAgICAgbG9hZC5bW01vZHVsZV1dIGlzIHNldCBkdXJpbmcgdGhlIGxpbmsgcGhhc2UsIHdoZW4gdGhlXG4vLz4gICAgIGBmYWN0b3J5LmV4ZWN1dGUoKWAgbWV0aG9kIHJldHVybnMgYSBNb2R1bGUuXG4vLz5cblxuLy8gQSBMb2FkIGlzIGluIG9uZSBvZiBmb3VyIHN0YXRlczpcbi8vXG4vLyAxLiAgTG9hZGluZzogIFNvdXJjZSBpcyBub3QgYXZhaWxhYmxlIHlldC5cbi8vXG4vLyAgICAgICAgIC5zdGF0dXMgPT09IFwibG9hZGluZ1wiXG4vLyAgICAgICAgIC5saW5rU2V0cyBpcyBhIFNldCBvZiBMaW5rU2V0c1xuLy9cbi8vICAgICBUaGUgbG9hZCBsZWF2ZXMgdGhpcyBzdGF0ZSB3aGVuIChhKSB0aGUgc291cmNlIGlzIHN1Y2Nlc3NmdWxseSBwYXJzZWQ7XG4vLyAgICAgKGIpIGFuIGVycm9yIGNhdXNlcyB0aGUgbG9hZCB0byBmYWlsOyBvciAoYykgdGhlIGBpbnN0YW50aWF0ZWAgbG9hZGVyXG4vLyAgICAgaG9vayByZXR1cm5zIGEgTW9kdWxlIG9iamVjdC5cbi8vXG4vLyAyLiAgTG9hZGVkOiAgU291cmNlIGlzIGF2YWlsYWJsZSBhbmQgaGFzIGJlZW4gdHJhbnNsYXRlZCBhbmQgcGFyc2VkLlxuLy8gICAgIERlcGVuZGVuY2llcyBoYXZlIGJlZW4gaWRlbnRpZmllZC4gIEJ1dCB0aGUgbW9kdWxlIGhhc24ndCBiZWVuIGxpbmtlZCBvclxuLy8gICAgIGV2YWx1YXRlZCB5ZXQuICBXZSBhcmUgd2FpdGluZyBmb3IgZGVwZW5kZW5jaWVzLlxuLy9cbi8vICAgICBUaGlzIGltcGxlbWVudGF0aW9uIHRyZWF0cyB0aGUgYE1vZHVsZWAgb2JqZWN0IGFzIGFscmVhZHkgZXhpc3RpbmcgYXRcbi8vICAgICB0aGlzIHBvaW50IChleGNlcHQgZm9yIGZhY3RvcnktbWFkZSBtb2R1bGVzKS4gIEJ1dCBpdCBoYXMgbm90IGJlZW5cbi8vICAgICBsaW5rZWQgYW5kIHRodXMgbXVzdCBub3QgYmUgZXhwb3NlZCB0byBzY3JpcHQgeWV0LlxuLy9cbi8vICAgICBUaGUgYFwibG9hZGVkXCJgIHN0YXRlIHNheXMgbm90aGluZyBhYm91dCB0aGUgc3RhdHVzIG9mIHRoZSBkZXBlbmRlbmNpZXM7XG4vLyAgICAgdGhleSBtYXkgYWxsIGJlIGxpbmtlZCBhbmQgZXZhbHVhdGVkIGFuZCB5ZXQgdGhlcmUgbWF5IG5vdCBiZSBhbnlcbi8vICAgICBgTGlua1NldGAgdGhhdCdzIHJlYWR5IHRvIGxpbmsgYW5kIGV2YWx1YXRlIHRoaXMgbW9kdWxlLiAgVGhlIGBMaW5rU2V0YFxuLy8gICAgIG1heSBiZSB3YWl0aW5nIGZvciB1bnJlbGF0ZWQgZGVwZW5kZW5jaWVzIHRvIGxvYWQuXG4vL1xuLy8gICAgICAgICAuc3RhdHVzID09PSBcImxvYWRlZFwiXG4vLyAgICAgICAgIC5ib2R5IGlzIGEgTW9kdWxlQm9keSwgb3IgbnVsbFxuLy8gICAgICAgICAuZGVwZW5kZW5jaWVzIGlzIGEgTWFwIG9mIHN0cmluZ3MgKG1vZHVsZSByZXF1ZXN0cylcbi8vICAgICAgICAgICAgIHRvIHN0cmluZ3MgKGZ1bGwgbW9kdWxlIG5hbWVzKVxuLy8gICAgICAgICAuZmFjdG9yeSBpcyBhIGNhbGxhYmxlIG9iamVjdCBvciBudWxsXG4vL1xuLy8gICAgIEV4YWN0bHkgb25lIG9mIGBbLmJvZHksIC5mYWN0b3J5XWAgaXMgbm9uLW51bGwuXG4vLyAgICAgSWYgLmJvZHkgaXMgbnVsbCwgdGhlbiAuZGVwZW5kZW5jaWVzIGlzIG51bGwuXG4vL1xuLy8gICAgIFRoZSBsb2FkIGxlYXZlcyB0aGlzIHN0YXRlIHdoZW4gYSBMaW5rU2V0IHN1Y2Nlc3NmdWxseSBsaW5rcyB0aGUgbW9kdWxlXG4vLyAgICAgYW5kIG1vdmVzIGl0IGludG8gdGhlIGxvYWRlcidzIG1vZHVsZSByZWdpc3RyeS5cbi8vXG4vLyAzLiAgTGlua2VkOiAgVGhlIG1vZHVsZSBoYXMgYmVlbiBsaW5rZWQgYW5kIGFkZGVkIHRvIHRoZSBsb2FkZXIncyBtb2R1bGVcbi8vICAgICByZWdpc3RyeS4gIEl0cyBib2R5IG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBldmFsdWF0ZWQgeWV0IChzZWVcbi8vICAgICBgRW5zdXJlRXZhbHVhdGVkYCkuXG4vL1xuLy8gICAgICAgICAuc3RhdHVzID09PSBcImxpbmtlZFwiXG4vLyAgICAgICAgIC5tb2R1bGUgaXMgYSBNb2R1bGUgb2JqZWN0XG4vL1xuLy8gICAgIChUT0RPOiB0aGlzIGlzIG5vdCB0cnVlIGluIHRoZSBjYXNlIG9mIHRoZSBgaW5zdGFudGlhdGVgIGxvYWRlciBob29rXG4vLyAgICAgcmV0dXJuaW5nIGEgTW9kdWxlIG9iamVjdDsgbWF5IHdhbnQgYSBzZXBhcmF0ZSBzdGF0dXMgZm9yIHRoYXQpIExvYWRzXG4vLyAgICAgdGhhdCBlbnRlciB0aGlzIHN0YXRlIGFyZSByZW1vdmVkIGZyb20gdGhlIGBsb2FkZXIubG9hZHNgIHRhYmxlIGFuZCBmcm9tXG4vLyAgICAgYWxsIExpbmtTZXRzOyB0aGV5IGJlY29tZSBnYXJiYWdlLlxuLy9cbi8vIDQuICBGYWlsZWQ6ICBUaGUgbG9hZCBmYWlsZWQuICBUaGUgbG9hZCBuZXZlciBsZWF2ZXMgdGhpcyBzdGF0ZS5cbi8vXG4vLyAgICAgICAgIC5zdGF0dXMgPT09IFwiZmFpbGVkXCJcbi8vICAgICAgICAgLmV4Y2VwdGlvbiBpcyBhbiBleGNlcHRpb24gdmFsdWVcbi8vXG5cbi8vPiAjIyMjIENyZWF0ZUxvYWQobmFtZSkgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgYWJzdHJhY3Qgb3BlcmF0aW9uIENyZWF0ZUxvYWQgY3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBMb2FkIFJlY29yZC5cbi8vPiBUaGUgYXJndW1lbnQgbmFtZSBpcyBlaXRoZXIgYHVuZGVmaW5lZGAsIGluZGljYXRpbmcgYW4gYW5vbnltb3VzIG1vZHVsZSwgb3Jcbi8vPiBhIG5vcm1hbGl6ZWQgbW9kdWxlIG5hbWUuXG4vLz5cbi8vPiBUaGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gQ3JlYXRlTG9hZChuYW1lKSB7XG4gICAgLy8+IDEuICBMZXQgbG9hZCBiZSBhIG5ldyBMb2FkIFJlY29yZC5cbiAgICByZXR1cm4ge1xuICAgICAgICAvLz4gMi4gIFNldCB0aGUgW1tTdGF0dXNdXSBmaWVsZCBvZiBsb2FkIHRvIGBcImxvYWRpbmdcImAuXG4gICAgICAgIHN0YXR1czogXCJsb2FkaW5nXCIsXG4gICAgICAgIC8vPiAzLiAgU2V0IHRoZSBbW05hbWVdXSBmaWVsZCBvZiBsb2FkIHRvIG5hbWUuXG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIC8vPiA0LiAgU2V0IHRoZSBbW0xpbmtTZXRzXV0gZmllbGQgb2YgbG9hZCB0byBhIG5ldyBlbXB0eSBMaXN0LlxuICAgICAgICBsaW5rU2V0czogQ3JlYXRlU2V0KCksXG4gICAgICAgIC8vPiA1LiAgTGV0IG1ldGFkYXRhIGJlIHRoZSByZXN1bHQgb2YgT2JqZWN0Q3JlYXRlKCVPYmplY3RQcm90b3R5cGUlKS5cbiAgICAgICAgLy8+IDYuICBTZXQgdGhlIFtbTWV0YWRhdGFdXSBmaWVsZCBvZiBsb2FkIHRvIG1ldGFkYXRhLlxuICAgICAgICBtZXRhZGF0YToge30sXG4gICAgICAgIC8vPiA3LiAgU2V0IHRoZSBbW0FkZHJlc3NdXSBmaWVsZCBvZiBsb2FkIHRvIHVuZGVmaW5lZC5cbiAgICAgICAgYWRkcmVzczogdW5kZWZpbmVkLFxuICAgICAgICAvLz4gOC4gIFNldCB0aGUgW1tTb3VyY2VdXSBmaWVsZCBvZiBsb2FkIHRvIHVuZGVmaW5lZC5cbiAgICAgICAgc291cmNlOiB1bmRlZmluZWQsXG4gICAgICAgIC8vPiA5LiAgU2V0IHRoZSBbW0tpbmRdXSBmaWVsZCBvZiBsb2FkIHRvIHVuZGVmaW5lZC5cbiAgICAgICAga2luZDogdW5kZWZpbmVkLFxuICAgICAgICAvLz4gMTAuIFNldCB0aGUgW1tCb2R5XV0gZmllbGQgb2YgbG9hZCB0byB1bmRlZmluZWQuXG4gICAgICAgIGJvZHk6IHVuZGVmaW5lZCxcbiAgICAgICAgLy8+IDExLiBTZXQgdGhlIFtbRXhlY3V0ZV1dIGZpZWxkIG9mIGxvYWQgdG8gdW5kZWZpbmVkLlxuICAgICAgICBleGVjdXRlOiB1bmRlZmluZWQsXG4gICAgICAgIC8vPiAxMi4gU2V0IHRoZSBbW0V4Y2VwdGlvbl1dIGZpZWxkIG9mIGxvYWQgdG8gdW5kZWZpbmVkLlxuICAgICAgICBleGNlcHRpb246IHVuZGVmaW5lZCxcbiAgICAgICAgLy8+IDEzLiBTZXQgdGhlIFtbTW9kdWxlXV0gZmllbGQgb2YgbG9hZCB0byB1bmRlZmluZWQuXG4gICAgICAgIG1vZHVsZTogbnVsbCxcbiAgICAgICAgdGhlbjogdW5kZWZpbmVkXG4gICAgfTtcbiAgICAvLz4gMTQuIFJldHVybiBsb2FkLlxufVxuLy8+XG4vL1xuLy8gSW4gdGhpcyBpbXBsZW1lbnRhdGlvbiwgTG9hZCBvYmplY3RzIGhhdmUgYW4gZXh0cmEgcHJvcGVydHkgYHRoZW46XG4vLyB1bmRlZmluZWRgIHRvIHByZXZlbnQgdGhlbSBmcm9tIGFwcGVhcmluZyB0aGVuYWJsZSBldmVuIGlmIHRoZSB1c2VyIGFzc2lnbnNcbi8vIHRvIE9iamVjdC5wcm90b3R5cGUudGhlbi4gIEFuIGFsdGVybmF0aXZlIHdvdWxkIGJlIHRvIHVzZVxuLy8gT2JqZWN0LmNyZWF0ZShudWxsKSBoZXJlLlxuXG5cbi8vPiAjIyMjIExvYWRGYWlsZWQgRnVuY3Rpb25zXG4vLz5cbi8vPiBBIExvYWRGYWlsZWQgZnVuY3Rpb24gaXMgYW4gYW5vbnltb3VzIGZ1bmN0aW9uIHRoYXQgbWFya3MgYSBMb2FkIFJlY29yZCBhc1xuLy8+IGhhdmluZyBmYWlsZWQuICBBbGwgTGlua1NldHMgdGhhdCBkZXBlbmQgb24gdGhlIExvYWQgYWxzbyBmYWlsLlxuLy8+XG4vLz4gRWFjaCBMb2FkRmFpbGVkIGZ1bmN0aW9uIGhhcyBhIFtbTG9hZF1dIGludGVybmFsIHNsb3QuXG4vLz5cbi8vPiBXaGVuIGEgTG9hZEZhaWxlZCBmdW5jdGlvbiBGIGlzIGNhbGxlZCB3aXRoIGFyZ3VtZW50IGV4YywgdGhlIGZvbGxvd2luZ1xuLy8+IHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gTWFrZUNsb3N1cmVfTG9hZEZhaWxlZChsb2FkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChleGMpIHtcbiAgICAgICAgLy8+IDEuICBMZXQgbG9hZCBiZSBGLltbTG9hZF1dLlxuICAgICAgICAvLz4gMi4gIEFzc2VydDogbG9hZC5bW1N0YXR1c11dIGlzIGBcImxvYWRpbmdcImAuXG4gICAgICAgIEFzc2VydChsb2FkLnN0YXR1cyA9PT0gXCJsb2FkaW5nXCIpO1xuXG4gICAgICAgIC8vPiAzLiAgU2V0IGxvYWQuW1tTdGF0dXNdXSB0byBgXCJmYWlsZWRcIi5cbiAgICAgICAgbG9hZC5zdGF0dXMgPSBcImZhaWxlZFwiO1xuXG4gICAgICAgIC8vPiA0LiAgU2V0IGxvYWQuW1tFeGNlcHRpb25dXSB0byBleGMuXG4gICAgICAgIGxvYWQuZXhjZXB0aW9uID0gZXhjO1xuXG4gICAgICAgIC8vPiA1LiAgTGV0IGxpbmtTZXRzIGJlIGEgY29weSBvZiB0aGUgTGlzdCBsb2FkLltbTGlua1NldHNdXS5cbiAgICAgICAgLy8+IDYuICBGb3IgZWFjaCBsaW5rU2V0IGluIGxpbmtTZXRzLCBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhlIExpbmtTZXRcbiAgICAgICAgLy8+ICAgICBSZWNvcmRzIHdlcmUgY3JlYXRlZCxcbiAgICAgICAgbGV0IGxpbmtTZXRzID0gU2V0VG9BcnJheShsb2FkLmxpbmtTZXRzKTtcbiAgICAgICAgY2FsbEZ1bmN0aW9uKHN0ZF9BcnJheV9zb3J0LCBsaW5rU2V0cyxcbiAgICAgICAgICAgICAgICAgICAgIChhLCBiKSA9PiBiLnRpbWVzdGFtcCAtIGEudGltZXN0YW1wKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rU2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8+ICAgICAxLiAgQ2FsbCBMaW5rU2V0RmFpbGVkKGxpbmtTZXQsIGV4YykuXG4gICAgICAgICAgICBMaW5rU2V0RmFpbGVkKGxpbmtTZXRzW2ldLCBleGMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8+IDcuICBBc3NlcnQ6IGxvYWQuW1tMaW5rU2V0c11dIGlzIGVtcHR5LlxuICAgICAgICBBc3NlcnQoY2FsbEZ1bmN0aW9uKHN0ZF9TZXRfZ2V0X3NpemUsIGxvYWQubGlua1NldHMpID09PSAwKTtcbiAgICB9O1xufVxuLy9cbi8vIFRoZSBhdHRhY2hlZCBMaW5rU2V0cyBmYWlsIGluIHRpbWVzdGFtcCBvcmRlci4gICpSYXRpb25hbGUqOiAgQW55XG4vLyBkZXRlcm1pbmlzdGljIG9yZGVyIHdvdWxkIGRvLlxuXG5cbi8vICMjIFRoZSBsb2FkZXIgcGlwZWxpbmVcblxuLy8+ICMjIyMgUmVxdWVzdExvYWQobG9hZGVyLCByZXF1ZXN0LCByZWZlcnJlck5hbWUsIHJlZmVycmVyQWRkcmVzcykgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgUmVxdWVzdExvYWQgYWJzdHJhY3Qgb3BlcmF0aW9uIG5vcm1hbGl6ZXMgdGhlIGdpdmVuIG1vZHVsZSBuYW1lLFxuLy8+IHJlcXVlc3QsIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSB2YWx1ZSBvZiBhIExvYWQgb2JqZWN0XG4vLz4gZm9yIHRoZSBnaXZlbiBtb2R1bGUuXG4vLz5cbi8vPiBUaGUgbG9hZGVyIGFyZ3VtZW50IGlzIGEgTG9hZGVyIG9iamVjdC5cbi8vPlxuLy8+IHJlcXVlc3QgaXMgdGhlIChub24tbm9ybWFsaXplZCkgbmFtZSBvZiB0aGUgbW9kdWxlIHRvIGJlIGltcG9ydGVkLCBhcyBpdFxuLy8+IGFwcGVhcnMgaW4gdGhlIGltcG9ydC1kZWNsYXJhdGlvbiBvciBhcyB0aGUgYXJndW1lbnQgdG8gYGxvYWRlci5sb2FkKClgIG9yXG4vLz4gYGxvYWRlci5pbXBvcnQoKWAuXG4vLz5cbi8vPiByZWZlcnJlck5hbWUgYW5kIHJlZmVycmVyQWRkcmVzcyBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb250ZXh0IG9mXG4vLz4gdGhlIGBpbXBvcnQoKWAgY2FsbCBvciBpbXBvcnQtZGVjbGFyYXRpb24uICBUaGlzIGluZm9ybWF0aW9uIGlzIHBhc3NlZCB0b1xuLy8+IGFsbCB0aGUgbG9hZGVyIGhvb2tzLlxuLy8+XG4vLz4gSWYgdGhlIHJlcXVlc3RlZCBtb2R1bGUgaXMgYWxyZWFkeSBpbiB0aGUgbG9hZGVyJ3MgbW9kdWxlIHJlZ2lzdHJ5LFxuLy8+IFJlcXVlc3RMb2FkIHJldHVybnMgYSBwcm9taXNlIGZvciBhIExvYWQgd2l0aCB0aGUgW1tTdGF0dXNdXSBmaWVsZCBzZXQgdG9cbi8vPiBgXCJsaW5rZWRcImAuIElmIHRoZSByZXF1ZXN0ZWQgbW9kdWxlIGlzIGxvYWRpbmcgb3IgbG9hZGVkIGJ1dCBub3QgeWV0XG4vLz4gbGlua2VkLCBSZXF1ZXN0TG9hZCByZXR1cm5zIGEgcHJvbWlzZSBmb3IgYW4gZXhpc3RpbmcgTG9hZCBvYmplY3QgZnJvbVxuLy8+IGxvYWRlci5bW0xvYWRzXV0uIE90aGVyd2lzZSwgUmVxdWVzdExvYWQgc3RhcnRzIGxvYWRpbmcgdGhlIG1vZHVsZSBhbmRcbi8vPiByZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSBuZXcgTG9hZCBSZWNvcmQuXG4vLz5cbi8vPiBUaGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gUmVxdWVzdExvYWQobG9hZGVyLCByZXF1ZXN0LCByZWZlcnJlck5hbWUsIHJlZmVycmVyQWRkcmVzcykge1xuICAgIC8vPiAxLiAgTGV0IEYgYmUgYSBuZXcgYW5vbnltb3VzIGZ1bmN0aW9uIGFzIGRlZmluZWQgYnkgQ2FsbE5vcm1hbGl6ZS5cbiAgICAvLz4gMi4gIFNldCB0aGUgW1tMb2FkZXJdXSBpbnRlcm5hbCBzbG90IG9mIEYgdG8gbG9hZGVyLlxuICAgIC8vPiAzLiAgU2V0IHRoZSBbW1JlcXVlc3RdXSBpbnRlcm5hbCBzbG90IG9mIEYgdG8gcmVxdWVzdC5cbiAgICAvLz4gNC4gIFNldCB0aGUgW1tSZWZlcnJlck5hbWVdXSBpbnRlcm5hbCBzbG90IG9mIEYgdG8gcmVmZXJyZXJOYW1lLlxuICAgIC8vPiA1LiAgU2V0IHRoZSBbW1JlZmVycmVyQWRkcmVzc11dIGludGVybmFsIHNsb3Qgb2YgRiB0byByZWZlcnJlckFkZHJlc3MuXG4gICAgdmFyIEYgPSBNYWtlQ2xvc3VyZV9DYWxsTm9ybWFsaXplKGxvYWRlciwgcmVxdWVzdCwgcmVmZXJyZXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcnJlckFkZHJlc3MpO1xuXG4gICAgLy8+IDYuICBMZXQgcCBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgT3JkaW5hcnlDb25zdHJ1Y3QoJVByb21pc2UlLCAoRikpLlxuICAgIHZhciBwID0gbmV3IHN0ZF9Qcm9taXNlKEYpO1xuXG4gICAgLy8+IDcuICBMZXQgRyBiZSBhIG5ldyBhbm9ueW1vdXMgZnVuY3Rpb24gYXMgZGVmaW5lZCBieSBHZXRPckNyZWF0ZUxvYWQuXG4gICAgLy8+IDguICBTZXQgdGhlIFtbTG9hZGVyXV0gaW50ZXJuYWwgc2xvdCBvZiBHIHRvIGxvYWRlci5cbiAgICAvLz4gOS4gIExldCBwIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyBQcm9taXNlVGhlbihwLCBHKS5cbiAgICBwID0gY2FsbEZ1bmN0aW9uKHN0ZF9Qcm9taXNlX3RoZW4sIHAsIFxuICAgICAgICAgICAgICAgICAgICAgTWFrZUNsb3N1cmVfR2V0T3JDcmVhdGVMb2FkKGxvYWRlcikpO1xuXG4gICAgLy8+IDEwLiBSZXR1cm4gcC5cbiAgICByZXR1cm4gcDtcbn1cbi8vPlxuXG4vLz4gIyMjIyBDYWxsTm9ybWFsaXplIEZ1bmN0aW9uc1xuLy8+XG4vLz4gQSBDYWxsTm9ybWFsaXplIGZ1bmN0aW9uIGlzIGFuIGFub255bW91cyBmdW5jdGlvbiB0aGF0IGNhbGxzIGEgbG9hZGVyJ3Ncbi8vPiBub3JtYWxpemUgaG9vay5cbi8vPlxuLy8+IEVhY2ggQ2FsbE5vcm1hbGl6ZSBmdW5jdGlvbiBoYXMgaW50ZXJuYWwgc2xvdHMgW1tMb2FkZXJdXSwgW1tSZXF1ZXN0XV0sXG4vLz4gW1tSZWZlcnJlck5hbWVdXSwgYW5kIFtbUmVmZXJyZXJBZGRyZXNzXV0uXG4vLz5cbi8vPiBXaGVuIGEgQ2FsbE5vcm1hbGl6ZSBmdW5jdGlvbiBGIGlzIGNhbGxlZCB3aXRoIGFyZ3VtZW50cyByZXNvbHZlIGFuZFxuLy8+IHJlamVjdCwgdGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW4uXG4vLz5cbmZ1bmN0aW9uIE1ha2VDbG9zdXJlX0NhbGxOb3JtYWxpemUobG9hZGVyLCByZXF1ZXN0LCByZWZlcnJlck5hbWUsIHJlZmVycmVyQWRkcmVzcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vPiAxLiAgTGV0IGxvYWRlciBiZSBGLltbTG9hZGVyXV0uXG4gICAgICAgIC8vPiAyLiAgTGV0IHJlcXVlc3QgYmUgRi5bW1JlcXVlc3RdXS5cbiAgICAgICAgLy8+IDMuICBMZXQgcmVmZXJyZXJOYW1lIGJlIEYuW1tSZWZlcnJlck5hbWVdXS5cbiAgICAgICAgLy8+IDQuICBMZXQgcmVmZXJyZXJBZGRyZXNzIGJlIEYuW1tSZWZlcnJlckFkZHJlc3NdXS5cbiAgICAgICAgLy8+IDUuICBMZXQgbm9ybWFsaXplSG9vayBiZSB0aGUgcmVzdWx0IG9mIEdldChsb2FkZXIsIGBcIm5vcm1hbGl6ZVwiYCkuXG4gICAgICAgIC8vPiA2LiAgTGV0IG5hbWUgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2RcbiAgICAgICAgLy8+ICAgICBvZiBub3JtYWxpemVIb29rIHBhc3NpbmcgbG9hZGVyIGFuZCAocmVxdWVzdCwgcmVmZXJyZXJOYW1lLFxuICAgICAgICAvLz4gICAgIHJlZmVycmVyQWRkcmVzcykgYXMgYXJndW1lbnRzLlxuICAgICAgICAvLz4gNy4gIFJldHVybklmQWJydXB0KG5hbWUpLlxuICAgICAgICAvLz4gOC4gIENhbGwgdGhlIFtbQ2FsbF1dIGludGVybmFsIG1ldGhvZCBvZiByZXNvbHZlIHBhc3NpbmcgdW5kZWZpbmVkXG4gICAgICAgIC8vPiAgICAgYW5kIChuYW1lKSBhcyBhcmd1bWVudHMuXG4gICAgICAgIHJlc29sdmUobG9hZGVyLm5vcm1hbGl6ZShyZXF1ZXN0LCByZWZlcnJlck5hbWUsIHJlZmVycmVyQWRkcmVzcykpO1xuICAgIH07XG59XG5cbi8vPiAjIyMjIEdldE9yQ3JlYXRlTG9hZCBGdW5jdGlvbnNcbi8vPlxuLy8+IEEgR2V0T3JDcmVhdGVMb2FkIGZ1bmN0aW9uIGlzIGFuIGFub255bW91cyBmdW5jdGlvbiB0aGF0IGdldHMgb3IgY3JlYXRlcyBhIExvYWRcbi8vPiBSZWNvcmQgZm9yIGEgZ2l2ZW4gbW9kdWxlIG5hbWUuXG4vLz5cbi8vPiBFYWNoIEdldE9yQ3JlYXRlTG9hZCBmdW5jdGlvbiBoYXMgYSBbW0xvYWRlcl1dIGludGVybmFsIHNsb3QuXG4vLz5cbi8vPiBXaGVuIGEgR2V0T3JDcmVhdGVMb2FkIGZ1bmN0aW9uIEYgaXMgY2FsbGVkIHdpdGggYXJndW1lbnQgbmFtZSwgdGhlIGZvbGxvd2luZ1xuLy8+IHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gTWFrZUNsb3N1cmVfR2V0T3JDcmVhdGVMb2FkKGxvYWRlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgbG9hZGVyRGF0YSA9IEdldExvYWRlckludGVybmFsRGF0YShsb2FkZXIpO1xuXG4gICAgICAgIC8vPiAxLiAgTGV0IGxvYWRlciBiZSBGLltbTG9hZGVyXV0uXG4gICAgICAgIC8vPiAyLiAgTGV0IG5hbWUgYmUgVG9TdHJpbmcobmFtZSkuXG4gICAgICAgIC8vPiAzLiAgUmV0dXJuSWZBYnJ1cHQobmFtZSkuXG4gICAgICAgIG5hbWUgPSBUb1N0cmluZyhuYW1lKTtcblxuICAgICAgICAvLz4gNC4gIElmIHRoZXJlIGlzIGEgUmVjb3JkIGluIGxvYWRlci5bW01vZHVsZXNdXSB3aG9zZSBbW2tleV1dIGZpZWxkXG4gICAgICAgIC8vPiAgICAgaXMgZXF1YWwgdG8gbmFtZSwgdGhlblxuICAgICAgICB2YXIgZXhpc3RpbmdNb2R1bGUgPSBjYWxsRnVuY3Rpb24oc3RkX01hcF9nZXQsIGxvYWRlckRhdGEubW9kdWxlcywgbmFtZSk7XG4gICAgICAgIGlmIChleGlzdGluZ01vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLz4gICAgIDEuICBMZXQgZXhpc3RpbmdNb2R1bGUgYmUgdGhlIFtbdmFsdWVdXSBmaWVsZCBvZiB0aGF0IFJlY29yZC5cbiAgICAgICAgICAgIC8vPiAgICAgMi4gIExldCBsb2FkIGJlIHRoZSByZXN1bHQgb2YgQ3JlYXRlTG9hZChuYW1lKS5cbiAgICAgICAgICAgIC8vPiAgICAgMy4gIFNldCB0aGUgW1tTdGF0dXNdXSBmaWVsZCBvZiBsb2FkIHRvIGBcImxpbmtlZFwiYC5cbiAgICAgICAgICAgIC8vPiAgICAgNC4gIFNldCB0aGUgW1tNb2R1bGVdXSBmaWVsZCBvZiBsb2FkIHRvIGV4aXN0aW5nTW9kdWxlLlxuICAgICAgICAgICAgLy8+ICAgICA1LiAgUmV0dXJuIGxvYWQuXG4gICAgICAgICAgICB2YXIgbG9hZCA9IENyZWF0ZUxvYWQobmFtZSk7XG4gICAgICAgICAgICBsb2FkLnN0YXR1cyA9IFwibGlua2VkXCI7XG4gICAgICAgICAgICBsb2FkLm1vZHVsZSA9IGV4aXN0aW5nTW9kdWxlO1xuICAgICAgICAgICAgcmV0dXJuIGxvYWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLz4gNS4gIEVsc2UsIGlmIHRoZXJlIGlzIGEgTG9hZCBSZWNvcmQgaW4gdGhlIExpc3QgbG9hZGVyLltbTG9hZHNdXVxuICAgICAgICAvLz4gICAgIHdob3NlIFtbTmFtZV1dIGZpZWxkIGlzIGVxdWFsIHRvIG5hbWUsIHRoZW5cbiAgICAgICAgdmFyIGxvYWQgPSBjYWxsRnVuY3Rpb24oc3RkX01hcF9nZXQsIGxvYWRlckRhdGEubG9hZHMsIG5hbWUpO1xuICAgICAgICBpZiAobG9hZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLz4gICAgIDEuIExldCBsb2FkIGJlIHRoYXQgTG9hZCBSZWNvcmQuXG4gICAgICAgICAgICAvLz4gICAgIDIuIEFzc2VydDogbG9hZC5zdGF0dXMgaXMgZWl0aGVyIGBcImxvYWRpbmdcImAgb3IgYFwibG9hZGVkXCJgLlxuICAgICAgICAgICAgQXNzZXJ0KGxvYWQuc3RhdHVzID09PSBcImxvYWRpbmdcIiB8fCBsb2FkLnN0YXR1cyA9PT0gXCJsb2FkZWRcIik7XG5cbiAgICAgICAgICAgIC8vPiAgICAgMy4gUmV0dXJuIGxvYWQuXG4gICAgICAgICAgICByZXR1cm4gbG9hZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vPiA2LiAgTGV0IGxvYWQgYmUgdGhlIHJlc3VsdCBvZiBDcmVhdGVMb2FkKG5hbWUpLlxuICAgICAgICBsb2FkID0gQ3JlYXRlTG9hZChuYW1lKTtcblxuICAgICAgICAvLz4gNy4gIEFkZCBsb2FkIHRvIHRoZSBMaXN0IGxvYWRlci5bW0xvYWRzXV0uXG4gICAgICAgIGNhbGxGdW5jdGlvbihzdGRfTWFwX3NldCwgbG9hZGVyRGF0YS5sb2FkcywgbmFtZSwgbG9hZCk7XG5cbiAgICAgICAgLy8+IDguICBDYWxsIFByb2NlZWRUb0xvY2F0ZShsb2FkZXIsIGxvYWQpLlxuICAgICAgICBQcm9jZWVkVG9Mb2NhdGUobG9hZGVyLCBsb2FkKTtcblxuICAgICAgICAvLz4gOS4gIFJldHVybiBsb2FkLlxuICAgICAgICByZXR1cm4gbG9hZDtcbiAgICB9O1xufVxuXG4vLz4gIyMjIyBQcm9jZWVkVG9Mb2NhdGUobG9hZGVyLCBsb2FkLCBwKSBBYnN0cmFjdCBPcGVyYXRpb25cbi8vPlxuLy8+IFRoZSBQcm9jZWVkVG9Mb2NhdGUgYWJzdHJhY3Qgb3BlcmF0aW9uIGNvbnRpbnVlcyB0aGUgYXN5bmNocm9ub3VzIGxvYWRpbmdcbi8vPiBwcm9jZXNzIGF0IHRoZSBgbG9jYXRlYCBob29rLlxuLy8+XG4vLz4gUHJvY2VlZFRvTG9jYXRlIHBlcmZvcm1zIHRoZSBmb2xsb3dpbmcgc3RlcHM6XG4vLz5cbmZ1bmN0aW9uIFByb2NlZWRUb0xvY2F0ZShsb2FkZXIsIGxvYWQpIHtcbiAgICAvLz4gMS4gIExldCBwIGJlIHRoZSByZXN1bHQgb2YgUHJvbWlzZVJlc29sdmUodW5kZWZpbmVkKS5cbiAgICB2YXIgcCA9IFByb21pc2VPZih1bmRlZmluZWQpO1xuICAgIC8vPiAxLiAgTGV0IEYgYmUgYSBuZXcgYW5vbnltb3VzIGZ1bmN0aW9uIG9iamVjdCBhcyBkZWZpbmVkIGluXG4gICAgLy8+ICAgICBDYWxsTG9jYXRlLlxuICAgIC8vPiAxLiAgU2V0IEYuW1tMb2FkZXJdXSB0byBsb2FkZXIuXG4gICAgLy8+IDEuICBTZXQgRi5bW0xvYWRdXSB0byBsb2FkLlxuICAgIC8vPiAxLiAgTGV0IHAgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIFByb21pc2VUaGVuKHAsIEYpLlxuICAgIHAgPSBjYWxsRnVuY3Rpb24oc3RkX1Byb21pc2VfdGhlbiwgcCxcbiAgICAgICAgICAgICAgICAgICAgIE1ha2VDbG9zdXJlX0NhbGxMb2NhdGUobG9hZGVyLCBsb2FkKSk7XG4gICAgLy8+IDEuICBSZXR1cm4gUHJvY2VlZFRvRmV0Y2gobG9hZGVyLCBsb2FkLCBwKS5cbiAgICByZXR1cm4gUHJvY2VlZFRvRmV0Y2gobG9hZGVyLCBsb2FkLCBwKTtcbn1cblxuLy8+ICMjIyMgUHJvY2VlZFRvRmV0Y2gobG9hZGVyLCBsb2FkLCBwKSBBYnN0cmFjdCBPcGVyYXRpb25cbi8vPlxuLy8+IFRoZSBQcm9jZWVkVG9GZXRjaCBhYnN0cmFjdCBvcGVyYXRpb24gY29udGludWVzIHRoZSBhc3luY2hyb25vdXMgbG9hZGluZ1xuLy8+IHByb2Nlc3MgYXQgdGhlIGBmZXRjaGAgaG9vay5cbi8vPlxuLy8+IFByb2NlZWRUb0ZldGNoIHBlcmZvcm1zIHRoZSBmb2xsb3dpbmcgc3RlcHM6XG4vLz5cbmZ1bmN0aW9uIFByb2NlZWRUb0ZldGNoKGxvYWRlciwgbG9hZCwgcCkge1xuICAgIC8vPiAxLiAgTGV0IEYgYmUgYSBuZXcgYW5vbnltb3VzIGZ1bmN0aW9uIG9iamVjdCBhcyBkZWZpbmVkIGluXG4gICAgLy8+ICAgICBDYWxsRmV0Y2guXG4gICAgLy8+IDEuICBTZXQgRi5bW0xvYWRlcl1dIHRvIGxvYWRlci5cbiAgICAvLz4gMS4gIFNldCBGLltbTG9hZF1dIHRvIGxvYWQuXG4gICAgLy8+IDEuICBMZXQgcCBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgUHJvbWlzZVRoZW4ocCwgRikuXG4gICAgcCA9IGNhbGxGdW5jdGlvbihzdGRfUHJvbWlzZV90aGVuLCBwLFxuICAgICAgICAgICAgICAgICAgICAgTWFrZUNsb3N1cmVfQ2FsbEZldGNoKGxvYWRlciwgbG9hZCkpO1xuICAgIC8vPiAxLiAgUmV0dXJuIFByb2NlZWRUb1RyYW5zbGF0ZShsb2FkZXIsIGxvYWQsIHApLlxuICAgIHJldHVybiBQcm9jZWVkVG9UcmFuc2xhdGUobG9hZGVyLCBsb2FkLCBwKTtcbn1cblxuLy8+ICMjIyMgUHJvY2VlZFRvVHJhbnNsYXRlKGxvYWRlciwgbG9hZCwgcCkgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgUHJvY2VlZFRvVHJhbnNsYXRlIGFic3RyYWN0IG9wZXJhdGlvbiBjb250aW51ZXMgdGhlIGFzeW5jaHJvbm91cyBsb2FkaW5nXG4vLz4gcHJvY2VzcyBhdCB0aGUgYHRyYW5zbGF0ZWAgaG9vay5cbi8vPlxuLy8+IFByb2NlZWRUb1RyYW5zbGF0ZSBwZXJmb3JtcyB0aGUgZm9sbG93aW5nIHN0ZXBzOlxuLy8+XG5mdW5jdGlvbiBQcm9jZWVkVG9UcmFuc2xhdGUobG9hZGVyLCBsb2FkLCBwKSB7XG4gICAgLy8+IDEuICBMZXQgRiBiZSBhIG5ldyBhbm9ueW1vdXMgZnVuY3Rpb24gb2JqZWN0IGFzIGRlZmluZWQgaW5cbiAgICAvLz4gICAgIENhbGxUcmFuc2xhdGUuXG4gICAgLy8+IDEuICBTZXQgRi5bW0xvYWRlcl1dIHRvIGxvYWRlci5cbiAgICAvLz4gMS4gIFNldCBGLltbTG9hZF1dIHRvIGxvYWQuXG4gICAgLy8+IDEuICBMZXQgcCBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgUHJvbWlzZVRoZW4ocCwgRikuXG4gICAgcCA9IGNhbGxGdW5jdGlvbihzdGRfUHJvbWlzZV90aGVuLCBwLFxuICAgICAgICAgICAgICAgICAgICAgTWFrZUNsb3N1cmVfQ2FsbFRyYW5zbGF0ZShsb2FkZXIsIGxvYWQpKTtcbiAgICAvLz4gMS4gIExldCBGIGJlIGEgbmV3IGFub255bW91cyBmdW5jdGlvbiBvYmplY3QgYXMgZGVmaW5lZCBpblxuICAgIC8vPiAgICAgQ2FsbEluc3RhbnRpYXRlLlxuICAgIC8vPiAxLiAgU2V0IEYuW1tMb2FkZXJdXSB0byBsb2FkZXIuXG4gICAgLy8+IDEuICBTZXQgRi5bW0xvYWRdXSB0byBsb2FkLlxuICAgIC8vPiAxLiAgTGV0IHAgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIFByb21pc2VUaGVuKHAsIEYpLlxuICAgIHAgPSBjYWxsRnVuY3Rpb24oc3RkX1Byb21pc2VfdGhlbiwgcCxcbiAgICAgICAgICAgICAgICAgICAgIE1ha2VDbG9zdXJlX0NhbGxJbnN0YW50aWF0ZShsb2FkZXIsIGxvYWQpKTtcbiAgICAvLz4gMS4gIExldCBGIGJlIGEgbmV3IGFub255bW91cyBmdW5jdGlvbiBvYmplY3QgYXMgZGVmaW5lZCBpblxuICAgIC8vPiAgICAgSW5zdGFudGlhdGVTdWNjZWVkZWQuXG4gICAgLy8+IDEuICBTZXQgRi5bW0xvYWRlcl1dIHRvIGxvYWRlci5cbiAgICAvLz4gMS4gIFNldCBGLltbTG9hZF1dIHRvIGxvYWQuXG4gICAgLy8+IDEuICBMZXQgcCBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgUHJvbWlzZVRoZW4ocCwgRikuXG4gICAgcCA9IGNhbGxGdW5jdGlvbihzdGRfUHJvbWlzZV90aGVuLCBwLFxuICAgICAgICAgICAgICAgICAgICAgTWFrZUNsb3N1cmVfSW5zdGFudGlhdGVTdWNjZWVkZWQobG9hZGVyLCBsb2FkKSk7XG4gICAgLy8+IDEuICBMZXQgRiBiZSBhIG5ldyBhbm9ueW1vdXMgZnVuY3Rpb24gb2JqZWN0IGFzIGRlZmluZWQgaW5cbiAgICAvLz4gICAgIExvYWRGYWlsZWQuXG4gICAgLy8+IDEuICBTZXQgRi5bW0xvYWRdXSB0byBsb2FkLlxuICAgIC8vPiAxLiAgTGV0IHAgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIFByb21pc2VDYXRjaChwLCBGKS5cbiAgICBjYWxsRnVuY3Rpb24oc3RkX1Byb21pc2VfY2F0Y2gsIHAsXG4gICAgICAgICAgICAgICAgIE1ha2VDbG9zdXJlX0xvYWRGYWlsZWQobG9hZCkpO1xufVxuXG4vLz4gIyMjIyBTaW1wbGVEZWZpbmUob2JqLCBuYW1lLCB2YWx1ZSkgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgU2ltcGxlRGVmaW5lIG9wZXJhdGlvbiBkZWZpbmVzIGEgd3JpdGFibGUsIGNvbmZpZ3VyYWJsZSwgZW51bWVyYWJsZVxuLy8+IGRhdGEgcHJvcGVydHkgb24gYW4gb3JkaW5hcnkgb2JqZWN0IGJ5IHRha2luZyB0aGUgZm9sbG93aW5nIHN0ZXBzOlxuLy8+XG4vLz4gMS4gIFJldHVybiB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgT3JkaW5hcnlEZWZpbmVPd25Qcm9wZXJ0eSB3aXRoIGFyZ3VtZW50c1xuLy8+ICAgICBvYmosIG5hbWUsIGFuZCBQcm9wZXJ0eURlc2NyaXB0b3J7W1tWYWx1ZV1dOiB2YWx1ZSwgW1tXcml0YWJsZV1dOiB0cnVlLFxuLy8+ICAgICBbW0VudW1lcmFibGVdXTogdHJ1ZSwgW1tDb25maWd1cmFibGVdXTogdHJ1ZX0uXG4vLz5cblxuLy8+ICMjIyMgQ2FsbExvY2F0ZSBGdW5jdGlvbnNcbi8vPlxuLy8+IEEgQ2FsbExvY2F0ZSBmdW5jdGlvbiBpcyBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gdGhhdCBjYWxscyB0aGUgYGxvY2F0ZWBcbi8vPiBsb2FkZXIgaG9vay5cbi8vPlxuLy8+IEVhY2ggQ2FsbExvY2F0ZSBmdW5jdGlvbiBoYXMgW1tMb2FkZXJdXSBhbmQgW1tMb2FkXV0gaW50ZXJuYWwgc2xvdHMuXG4vLz5cbi8vPiBXaGVuIGEgQ2FsbExvY2F0ZSBmdW5jdGlvbiBGIGlzIGNhbGxlZCwgdGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4vLz5cbmZ1bmN0aW9uIE1ha2VDbG9zdXJlX0NhbGxMb2NhdGUobG9hZGVyLCBsb2FkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChfKSB7XG4gICAgICAgIC8vPiAxLiAgTGV0IGxvYWRlciBiZSBGLltbTG9hZGVyXV0uXG4gICAgICAgIC8vPiAyLiAgTGV0IGxvYWQgYmUgRi5bW0xvYWRdXS5cbiAgICAgICAgLy8+IDMuICBMZXQgaG9vayBiZSB0aGUgcmVzdWx0IG9mIEdldChsb2FkZXIsIGBcImxvY2F0ZVwiYCkuXG4gICAgICAgIC8vPiA0LiAgUmV0dXJuSWZBYnJ1cHQoaG9vaykuXG4gICAgICAgIC8vPiA1LiAgSWYgSXNDYWxsYWJsZShob29rKSBpcyBmYWxzZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICAvLz4gNi4gIExldCBvYmogYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgICAgIC8vPiAgICAgT2JqZWN0Q3JlYXRlKCVPYmplY3RQcm90b3R5cGUlLCAoKSkuXG4gICAgICAgIC8vPiA3LiAgQ2FsbCBTaW1wbGVEZWZpbmUob2JqLCBgXCJuYW1lXCJgLCBsb2FkLltbTmFtZV1dKS5cbiAgICAgICAgLy8+IDguICBDYWxsIFNpbXBsZURlZmluZShvYmosIGBcIm1ldGFkYXRhXCJgLCBsb2FkLltbTWV0YWRhdGFdXSkuXG4gICAgICAgIC8vPiA5LiAgUmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tDYWxsXV0gaW50ZXJuYWwgbWV0aG9kIG9mXG4gICAgICAgIC8vPiAgICAgaG9vayB3aXRoIGxvYWRlciBhbmQgKG9iaikgYXMgYXJndW1lbnRzLlxuICAgICAgICByZXR1cm4gbG9hZGVyLmxvY2F0ZSh7XG4gICAgICAgICAgICBuYW1lOiBsb2FkLm5hbWUsXG4gICAgICAgICAgICBtZXRhZGF0YTogbG9hZC5tZXRhZGF0YVxuICAgICAgICB9KTtcbiAgICB9O1xufVxuLy8+XG5cbi8vPiAjIyMjIENhbGxGZXRjaCBGdW5jdGlvbnNcbi8vPlxuLy8+IEEgQ2FsbEZldGNoIGZ1bmN0aW9uIGlzIGFuIGFub255bW91cyBmdW5jdGlvbiB0aGF0IGNhbGxzIHRoZSBgZmV0Y2hgXG4vLz4gbG9hZGVyIGhvb2suXG4vLz5cbi8vPiBFYWNoIENhbGxGZXRjaCBmdW5jdGlvbiBoYXMgW1tMb2FkZXJdXSBhbmQgW1tMb2FkXV0gaW50ZXJuYWwgc2xvdHMuXG4vLz5cbi8vPiBXaGVuIGEgQ2FsbEZldGNoIGZ1bmN0aW9uIEYgaXMgY2FsbGVkIHdpdGggYXJndW1lbnQgYWRkcmVzcywgdGhlIGZvbGxvd2luZ1xuLy8+IHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gTWFrZUNsb3N1cmVfQ2FsbEZldGNoKGxvYWRlciwgbG9hZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYWRkcmVzcykge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkZXIgYmUgRi5bW0xvYWRlcl1dLlxuICAgICAgICAvLz4gMi4gIExldCBsb2FkIGJlIEYuW1tMb2FkXV0uXG5cbiAgICAgICAgLy8+IDMuICBJZiBsb2FkLltbTGlua1NldHNdXSBpcyBhbiBlbXB0eSBMaXN0LCByZXR1cm4gdW5kZWZpbmVkLlxuICAgICAgICBpZiAoY2FsbEZ1bmN0aW9uKHN0ZF9TZXRfZ2V0X3NpemUsIGxvYWQubGlua1NldHMpID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIC8vPiA0LiAgU2V0IHRoZSBbW0FkZHJlc3NdXSBmaWVsZCBvZiBsb2FkIHRvIGFkZHJlc3MuXG4gICAgICAgIGxvYWQuYWRkcmVzcyA9IGFkZHJlc3M7XG5cbiAgICAgICAgLy8+IDUuICBMZXQgaG9vayBiZSB0aGUgcmVzdWx0IG9mIEdldChsb2FkZXIsIGBcImZldGNoXCJgKS5cbiAgICAgICAgLy8+IDYuICBSZXR1cm5JZkFicnVwdChob29rKS5cbiAgICAgICAgLy8+IDcuICBJZiBJc0NhbGxhYmxlKGhvb2spIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgICAgIC8vPiA4LiAgTGV0IG9iaiBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgICAgLy8+ICAgICBPYmplY3RDcmVhdGUoJU9iamVjdFByb3RvdHlwZSUsICgpKS5cbiAgICAgICAgLy8+IDkuICBDYWxsIFNpbXBsZURlZmluZShvYmosIGBcIm5hbWVcImAsIGxvYWQuW1tOYW1lXV0pLlxuICAgICAgICAvLz4gMTAuIENhbGwgU2ltcGxlRGVmaW5lKG9iaiwgYFwibWV0YWRhdGFcImAsIGxvYWQuW1tNZXRhZGF0YV1dKS5cbiAgICAgICAgLy8+IDExLiBDYWxsIFNpbXBsZURlZmluZShvYmosIGBcImFkZHJlc3NcImAsIGFkZHJlc3MpLlxuICAgICAgICAvLz4gMTIuIFJldHVybiB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIFtbQ2FsbF1dIGludGVybmFsIG1ldGhvZCBvZlxuICAgICAgICAvLz4gICAgIGhvb2sgd2l0aCBsb2FkZXIgYW5kIChvYmopIGFzIGFyZ3VtZW50cy5cbiAgICAgICAgcmV0dXJuIGxvYWRlci5mZXRjaCh7XG4gICAgICAgICAgICBuYW1lOiBsb2FkLm5hbWUsXG4gICAgICAgICAgICBtZXRhZGF0YTogbG9hZC5tZXRhZGF0YSxcbiAgICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3NcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8vPlxuXG4vLz4gIyMjIyBDYWxsVHJhbnNsYXRlIEZ1bmN0aW9uc1xuLy8+XG4vLz4gQSBDYWxsVHJhbnNsYXRlIGZ1bmN0aW9uIGlzIGFuIGFub255bW91cyBmdW5jdGlvbiB0aGF0IGNhbGxzIHRoZSBgdHJhbnNsYXRlYFxuLy8+IGxvYWRlciBob29rLlxuLy8+XG4vLz4gRWFjaCBDYWxsVHJhbnNsYXRlIGZ1bmN0aW9uIGhhcyBbW0xvYWRlcl1dIGFuZCBbW0xvYWRdXSBpbnRlcm5hbCBzbG90cy5cbi8vPlxuLy8+IFdoZW4gYSBDYWxsVHJhbnNsYXRlIGZ1bmN0aW9uIEYgaXMgY2FsbGVkIHdpdGggYXJndW1lbnQgc291cmNlLCB0aGUgZm9sbG93aW5nXG4vLz4gc3RlcHMgYXJlIHRha2VuOlxuLy8+XG5mdW5jdGlvbiBNYWtlQ2xvc3VyZV9DYWxsVHJhbnNsYXRlKGxvYWRlciwgbG9hZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIC8vPiAxLiAgTGV0IGxvYWRlciBiZSBGLltbTG9hZGVyXV0uXG4gICAgICAgIC8vPiAyLiAgTGV0IGxvYWQgYmUgRi5bW0xvYWRdXS5cblxuICAgICAgICAvLz4gMy4gIElmIGxvYWQuW1tMaW5rU2V0c11dIGlzIGFuIGVtcHR5IExpc3QsIHJldHVybiB1bmRlZmluZWQuXG4gICAgICAgIGlmIChjYWxsRnVuY3Rpb24oc3RkX1NldF9nZXRfc2l6ZSwgbG9hZC5saW5rU2V0cykgPT09IDApXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgLy8+IDUuICBMZXQgaG9vayBiZSB0aGUgcmVzdWx0IG9mIEdldChsb2FkZXIsIGBcInRyYW5zbGF0ZVwiYCkuXG4gICAgICAgIC8vPiA2LiAgUmV0dXJuSWZBYnJ1cHQoaG9vaykuXG4gICAgICAgIC8vPiA3LiAgSWYgSXNDYWxsYWJsZShob29rKSBpcyBmYWxzZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICAvLz4gOC4gIExldCBvYmogYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgICAgIC8vPiAgICAgT2JqZWN0Q3JlYXRlKCVPYmplY3RQcm90b3R5cGUlLCAoKSkuXG4gICAgICAgIC8vPiA5LiAgQ2FsbCBTaW1wbGVEZWZpbmUob2JqLCBgXCJuYW1lXCJgLCBsb2FkLltbTmFtZV1dKS5cbiAgICAgICAgLy8+IDEwLiBDYWxsIFNpbXBsZURlZmluZShvYmosIGBcIm1ldGFkYXRhXCJgLCBsb2FkLltbTWV0YWRhdGFdXSkuXG4gICAgICAgIC8vPiAxMS4gQ2FsbCBTaW1wbGVEZWZpbmUob2JqLCBgXCJhZGRyZXNzXCJgLCBsb2FkLltbQWRkcmVzc11dKS5cbiAgICAgICAgLy8+IDEyLiBDYWxsIFNpbXBsZURlZmluZShvYmosIGBcInNvdXJjZVwiYCwgc291cmNlKS5cbiAgICAgICAgLy8+IDEzLiBSZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2Qgb2ZcbiAgICAgICAgLy8+ICAgICBob29rIHdpdGggbG9hZGVyIGFuZCAob2JqKSBhcyBhcmd1bWVudHMuXG4gICAgICAgIHJldHVybiBsb2FkZXIudHJhbnNsYXRlKHtcbiAgICAgICAgICAgIG5hbWU6IGxvYWQubmFtZSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBsb2FkLm1ldGFkYXRhLFxuICAgICAgICAgICAgYWRkcmVzczogbG9hZC5hZGRyZXNzLFxuICAgICAgICAgICAgc291cmNlOiBzb3VyY2VcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8vPlxuXG4vLz4gIyMjIyBDYWxsSW5zdGFudGlhdGUgRnVuY3Rpb25zXG4vLz5cbi8vPiBBIENhbGxJbnN0YW50aWF0ZSBmdW5jdGlvbiBpcyBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gdGhhdCBjYWxscyB0aGVcbi8vPiBgaW5zdGFudGlhdGVgIGxvYWRlciBob29rLlxuLy8+XG4vLz4gRWFjaCBDYWxsSW5zdGFudGlhdGUgZnVuY3Rpb24gaGFzIFtbTG9hZGVyXV0gYW5kIFtbTG9hZF1dIGludGVybmFsIHNsb3RzLlxuLy8+XG4vLz4gV2hlbiBhIENhbGxJbnN0YW50aWF0ZSBmdW5jdGlvbiBGIGlzIGNhbGxlZCB3aXRoIGFyZ3VtZW50IHNvdXJjZSwgdGhlXG4vLz4gZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gTWFrZUNsb3N1cmVfQ2FsbEluc3RhbnRpYXRlKGxvYWRlciwgbG9hZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIC8vPiAxLiAgTGV0IGxvYWRlciBiZSBGLltbTG9hZGVyXV0uXG4gICAgICAgIC8vPiAyLiAgTGV0IGxvYWQgYmUgRi5bW0xvYWRdXS5cblxuICAgICAgICAvLz4gMy4gIElmIGxvYWQuW1tMaW5rU2V0c11dIGlzIGFuIGVtcHR5IExpc3QsIHJldHVybiB1bmRlZmluZWQuXG4gICAgICAgIGlmIChjYWxsRnVuY3Rpb24oc3RkX1NldF9nZXRfc2l6ZSwgbG9hZC5saW5rU2V0cykgPT09IDApXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgLy8+IDQuICBTZXQgdGhlIFtbU291cmNlXV0gaW50ZXJuYWwgc2xvdCBvZiBsb2FkIHRvIHNvdXJjZS5cbiAgICAgICAgbG9hZC5zb3VyY2UgPSBzb3VyY2U7XG5cbiAgICAgICAgLy8+IDUuICBMZXQgaG9vayBiZSB0aGUgcmVzdWx0IG9mIEdldChsb2FkZXIsIGBcImluc3RhbnRpYXRlXCJgKS5cbiAgICAgICAgLy8+IDYuICBSZXR1cm5JZkFicnVwdChob29rKS5cbiAgICAgICAgLy8+IDcuICBJZiBJc0NhbGxhYmxlKGhvb2spIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgICAgIC8vPiA4LiAgTGV0IG9iaiBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgICAgLy8+ICAgICBPYmplY3RDcmVhdGUoJU9iamVjdFByb3RvdHlwZSUsICgpKS5cbiAgICAgICAgLy8+IDkuICBDYWxsIFNpbXBsZURlZmluZShvYmosIGBcIm5hbWVcImAsIGxvYWQuW1tOYW1lXV0pLlxuICAgICAgICAvLz4gMTAuIENhbGwgU2ltcGxlRGVmaW5lKG9iaiwgYFwibWV0YWRhdGFcImAsIGxvYWQuW1tNZXRhZGF0YV1dKS5cbiAgICAgICAgLy8+IDExLiBDYWxsIFNpbXBsZURlZmluZShvYmosIGBcImFkZHJlc3NcImAsIGxvYWQuW1tBZGRyZXNzXV0pLlxuICAgICAgICAvLz4gMTIuIENhbGwgU2ltcGxlRGVmaW5lKG9iaiwgYFwic291cmNlXCJgLCBzb3VyY2UpLlxuICAgICAgICAvLz4gMTMuIFJldHVybiB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIFtbQ2FsbF1dIGludGVybmFsIG1ldGhvZCBvZlxuICAgICAgICAvLz4gICAgIGhvb2sgd2l0aCBsb2FkZXIgYW5kIChvYmopIGFzIGFyZ3VtZW50cy5cbiAgICAgICAgcmV0dXJuIGxvYWRlci5pbnN0YW50aWF0ZSh7XG4gICAgICAgICAgICBuYW1lOiBsb2FkLm5hbWUsXG4gICAgICAgICAgICBtZXRhZGF0YTogbG9hZC5tZXRhZGF0YSxcbiAgICAgICAgICAgIGFkZHJlc3M6IGxvYWQuYWRkcmVzcyxcbiAgICAgICAgICAgIHNvdXJjZTogc291cmNlXG4gICAgICAgIH0pO1xuICAgIH07XG59XG4vLz5cblxuLy8+ICMjIyMgSW5zdGFudGlhdGVTdWNjZWVkZWQgRnVuY3Rpb25zXG4vLz5cbi8vPiBBbiBJbnN0YW50aWF0ZVN1Y2NlZWRlZCBmdW5jdGlvbiBpcyBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gdGhhdCBoYW5kbGVzXG4vLz4gdGhlIHJlc3VsdCBvZiB0aGUgYGluc3RhbnRpYXRlYCBob29rLlxuLy8+XG4vLz4gRWFjaCBJbnN0YW50aWF0ZVN1Y2NlZWRlZCBmdW5jdGlvbiBoYXMgW1tMb2FkZXJdXSBhbmQgW1tMb2FkXV0gaW50ZXJuYWxcbi8vPiBzbG90cy5cbi8vPlxuLy8+IFdoZW4gYW4gSW5zdGFudGlhdGVTdWNjZWVkZWQgZnVuY3Rpb24gRiBpcyBjYWxsZWQgd2l0aCBhcmd1bWVudFxuLy8+IGluc3RhbnRpYXRlUmVzdWx0LCB0aGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gTWFrZUNsb3N1cmVfSW5zdGFudGlhdGVTdWNjZWVkZWQobG9hZGVyLCBsb2FkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChpbnN0YW50aWF0ZVJlc3VsdCkge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkZXIgYmUgRi5bW0xvYWRlcl1dLlxuICAgICAgICAvLz4gMi4gIExldCBsb2FkIGJlIEYuW1tMb2FkXV0uXG5cbiAgICAgICAgLy8+IDMuICBJZiBsb2FkLltbTGlua1NldHNdXSBpcyBhbiBlbXB0eSBMaXN0LCByZXR1cm4gdW5kZWZpbmVkLlxuICAgICAgICBpZiAoY2FsbEZ1bmN0aW9uKHN0ZF9TZXRfZ2V0X3NpemUsIGxvYWQubGlua1NldHMpID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciBkZXBzTGlzdDtcblxuICAgICAgICAvLz4gNC4gIElmIGluc3RhbnRpYXRlUmVzdWx0IGlzIHVuZGVmaW5lZCwgdGhlblxuICAgICAgICBpZiAoaW5zdGFudGlhdGVSZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8+ICAgICAxLiAgTGV0IGJvZHkgYmUgdGhlIHJlc3VsdCBvZiBwYXJzaW5nIGxvYWQuW1tTb3VyY2VdXSxcbiAgICAgICAgICAgIC8vPiAgICAgICAgIGludGVycHJldGVkIGFzIFVURi0xNiBlbmNvZGVkIFVuaWNvZGUgdGV4dCBhcyBkZXNjcmliZWRcbiAgICAgICAgICAgIC8vPiAgICAgICAgIGluIGNsYXVzZSAxMC4xLjEsIHVzaW5nIE1vZHVsZSBhcyB0aGUgZ29hbFxuICAgICAgICAgICAgLy8+ICAgICAgICAgc3ltYm9sLiBUaHJvdyBhIFN5bnRheEVycm9yIGV4Y2VwdGlvbiBpZiB0aGUgcGFyc2VcbiAgICAgICAgICAgIC8vPiAgICAgICAgIGZhaWxzIG9yIGlmIGFueSBzdGF0aWMgc2VtYW50aWNzIGVycm9ycyBhcmUgZGV0ZWN0ZWQuXG4gICAgICAgICAgICBsZXQgYm9keSA9ICRQYXJzZU1vZHVsZShsb2FkZXIsIGxvYWQuc291cmNlLCBsb2FkLm5hbWUsIGxvYWQuYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIC8vPiAgICAgMi4gIFNldCB0aGUgW1tCb2R5XV0gZmllbGQgb2YgbG9hZCB0byBib2R5LlxuICAgICAgICAgICAgbG9hZC5ib2R5ID0gYm9keTtcblxuICAgICAgICAgICAgLy8+ICAgICAzLiAgU2V0IHRoZSBbW0tpbmRdXSBmaWVsZCBvZiBsb2FkIHRvICoqZGVjbGFyYXRpdmUqKi5cbiAgICAgICAgICAgIGxvYWQua2luZCA9IFwiZGVjbGFyYXRpdmVcIjtcblxuICAgICAgICAgICAgLy8+ICAgICA0LiAgTGV0IGRlcHNMaXN0IGJlIHRoZSBNb2R1bGVSZXF1ZXN0cyBvZiBib2R5LlxuICAgICAgICAgICAgZGVwc0xpc3QgPSAkTW9kdWxlUmVxdWVzdHMoYm9keSk7XG5cbiAgICAgICAgLy8+IDUuICBFbHNlIGlmIFR5cGUoaW5zdGFudGlhdGVSZXN1bHQpIGlzIE9iamVjdCwgdGhlblxuICAgICAgICB9IGVsc2UgaWYgKElzT2JqZWN0KGluc3RhbnRpYXRlUmVzdWx0KSkge1xuICAgICAgICAgICAgLy8+ICAgICAxLiAgTGV0IGRlcHMgYmUgdGhlIHJlc3VsdCBvZiBHZXQoaW5zdGFudGlhdGVSZXN1bHQsIGBcImRlcHNcImApLlxuICAgICAgICAgICAgLy8+ICAgICAyLiAgUmV0dXJuSWZBYnJ1cHQoZGVwcykuXG4gICAgICAgICAgICB2YXIgZGVwcyA9IGluc3RhbnRpYXRlUmVzdWx0LmRlcHM7XG5cbiAgICAgICAgICAgIC8vPiAgICAgMy4gIElmIGRlcHMgaXMgdW5kZWZpbmVkLCB0aGVuIGxldCBkZXBzTGlzdCBiZSBhIG5ldyBlbXB0eSBMaXN0LlxuICAgICAgICAgICAgLy8+ICAgICA0LiAgRWxzZTpcbiAgICAgICAgICAgIC8vPiAgICAgICAgIDEuICBMZXQgZGVwc0xpc3QgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBJdGVyYWJsZVRvQXJyYXlcbiAgICAgICAgICAgIC8vPiAgICAgICAgICAgICBhYnN0cmFjdCBvcGVyYXRpb24gcGFzc2luZyBkZXBzIGFzIHRoZSBzaW5nbGUgYXJndW1lbnQuXG4gICAgICAgICAgICAvLz4gICAgICAgICAyLiAgUmV0dXJuSWZBYnJ1cHQoZGVwc0xpc3QpLlxuICAgICAgICAgICAgZGVwc0xpc3QgPSBkZXBzID09PSB1bmRlZmluZWQgPyBbXSA6IFsuLi5kZXBzXTtcblxuICAgICAgICAgICAgLy8+ICAgICA1LiAgTGV0IGV4ZWN1dGUgYmUgdGhlIHJlc3VsdCBvZiBHZXQoaW5zdGFudGlhdGVSZXN1bHQsXG4gICAgICAgICAgICAvLz4gICAgICAgICBgXCJleGVjdXRlXCJgKS5cbiAgICAgICAgICAgIC8vPiAgICAgNi4gIFJldHVybklmQWJydXB0KGV4ZWN1dGUpLlxuICAgICAgICAgICAgdmFyIGV4ZWN1dGUgPSBpbnN0YW50aWF0ZVJlc3VsdC5leGVjdXRlO1xuXG4gICAgICAgICAgICAvLz4gICAgIDcuICBTZXQgdGhlIFtbRXhlY3V0ZV1dIGZpZWxkIG9mIGxvYWQgdG8gZXhlY3V0ZS5cbiAgICAgICAgICAgIGxvYWQuZXhlY3V0ZSA9IGV4ZWN1dGU7XG5cbiAgICAgICAgICAgIC8vPiAgICAgOC4gIFNldCB0aGUgW1tLaW5kXV0gZmllbGQgb2YgbG9hZCB0byAqKmR5bmFtaWMqKi5cbiAgICAgICAgICAgIGxvYWQua2luZCA9IFwiZHluYW1pY1wiO1xuICAgICAgICAvLz4gNi4gRWxzZSxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vPiAgICAgMS4gIFRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAgICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJpbnN0YW50aWF0ZSBob29rIG11c3QgcmV0dXJuIGFuIG9iamVjdCBvciB1bmRlZmluZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLz4gNy4gIFJldHVybiB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgUHJvY2Vzc0xvYWREZXBlbmRlbmNpZXMobG9hZCxcbiAgICAgICAgLy8+ICAgICBsb2FkZXIsIGRlcHNMaXN0KS5cbiAgICAgICAgOy8vIFByb2Nlc3NMb2FkRGVwZW5kZW5jaWVzIHJldHVybnMgYSBwcm9taXNlLiBUaGUgb25seSB3YXkgdG9cbiAgICAgICAgOy8vIHByb3BhZ2F0ZSBlcnJvcnMgaXMgdG8gcmV0dXJuIGl0LlxuICAgICAgICByZXR1cm4gUHJvY2Vzc0xvYWREZXBlbmRlbmNpZXMobG9hZCwgbG9hZGVyLCBkZXBzTGlzdCk7XG4gICAgfTtcbn1cblxuLy8+ICMjIyMgUHJvY2Vzc0xvYWREZXBlbmRlbmNpZXMobG9hZCwgbG9hZGVyLCBkZXBzTGlzdCkgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgUHJvY2Vzc0xvYWREZXBlbmRlbmNpZXMgYWJzdHJhY3Qgb3BlcmF0aW9uIGlzIGNhbGxlZCBhZnRlciBvbmUgbW9kdWxlXG4vLz4gaGFzIG5lYXJseSBmaW5pc2hlZCBsb2FkaW5nLiBJdCBzdGFydHMgbmV3IGxvYWRzIGFzIG5lZWRlZCB0byBsb2FkIHRoZVxuLy8+IG1vZHVsZSdzIGRlcGVuZGVuY2llcy5cbi8vPlxuLy8+IFByb2Nlc3NMb2FkRGVwZW5kZW5jaWVzIGFsc28gYXJyYW5nZXMgZm9yIExvYWRTdWNjZWVkZWQgdG8gYmUgY2FsbGVkLlxuLy8+XG4vLz4gVGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4vLz5cbmZ1bmN0aW9uIFByb2Nlc3NMb2FkRGVwZW5kZW5jaWVzKGxvYWQsIGxvYWRlciwgZGVwc0xpc3QpIHtcbiAgICAvLz4gMS4gIExldCByZWZlcnJlck5hbWUgYmUgbG9hZC5bW05hbWVdXS5cbiAgICB2YXIgcmVmZXJyZXJOYW1lID0gbG9hZC5uYW1lO1xuXG4gICAgLy8+IDIuICBTZXQgdGhlIFtbRGVwZW5kZW5jaWVzXV0gZmllbGQgb2YgbG9hZCB0byBhIG5ldyBlbXB0eSBMaXN0LlxuICAgIGxvYWQuZGVwZW5kZW5jaWVzID0gQ3JlYXRlTWFwKCk7XG5cbiAgICAvLz4gMy4gIExldCBsb2FkUHJvbWlzZXMgYmUgYSBuZXcgZW1wdHkgTGlzdC5cbiAgICB2YXIgbG9hZFByb21pc2VzID0gW107XG5cbiAgICAvLz4gNC4gIEZvciBlYWNoIHJlcXVlc3QgaW4gZGVwc0xpc3QsIGRvXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZXBzTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmVxdWVzdCA9IGRlcHNMaXN0W2ldO1xuXG4gICAgICAgIC8vPiAgICAgMS4gIExldCBwIGJlIHRoZSByZXN1bHQgb2YgUmVxdWVzdExvYWQobG9hZGVyLCByZXF1ZXN0LFxuICAgICAgICAvLz4gICAgICAgICByZWZlcnJlck5hbWUsIGxvYWQuW1tBZGRyZXNzXV0pLlxuICAgICAgICB2YXIgcCA9IFJlcXVlc3RMb2FkKGxvYWRlciwgcmVxdWVzdCwgcmVmZXJyZXJOYW1lLCBsb2FkLmFkZHJlc3MpO1xuXG4gICAgICAgIC8vPiAgICAgMi4gIExldCBGIGJlIGEgbmV3IGFub255bW91cyBmdW5jdGlvbiBhcyBkZWZpbmVkIGJ5XG4gICAgICAgIC8vPiAgICAgICAgIEFkZERlcGVuZGVuY3lMb2FkLlxuICAgICAgICAvLz4gICAgIDMuICBTZXQgdGhlIFtbUGFyZW50TG9hZF1dIGludGVybmFsIHNsb3Qgb2YgRiB0byBsb2FkLlxuICAgICAgICAvLz4gICAgIDQuICBTZXQgdGhlIFtbUmVxdWVzdF1dIGludGVybmFsIHNsb3Qgb2YgRiB0byByZXF1ZXN0LlxuICAgICAgICAvLz4gICAgIDUuICBMZXQgcCBiZSB0aGUgcmVzdWx0IG9mIFByb21pc2VUaGVuKHAsIEYpLlxuICAgICAgICBwID0gY2FsbEZ1bmN0aW9uKHN0ZF9Qcm9taXNlX3RoZW4sIHAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgTWFrZUNsb3N1cmVfQWRkRGVwZW5kZW5jeUxvYWQobG9hZCwgcmVxdWVzdCkpO1xuXG4gICAgICAgIC8vPiAgICAgNi4gIEFwcGVuZCBwIGFzIHRoZSBsYXN0IGVsZW1lbnQgb2YgbG9hZFByb21pc2VzLlxuICAgICAgICBjYWxsRnVuY3Rpb24oc3RkX0FycmF5X3B1c2gsIGxvYWRQcm9taXNlcywgcCk7XG4gICAgfVxuXG4gICAgLy8+IDUuICBMZXQgcCBiZSBQcm9taXNlQWxsKGxvYWRQcm9taXNlcykuXG4gICAgdmFyIHAgPSBjYWxsRnVuY3Rpb24oc3RkX1Byb21pc2VfYWxsLCBzdGRfUHJvbWlzZSwgbG9hZFByb21pc2VzKTtcblxuICAgIC8vPiA2LiAgTGV0IEYgYmUgYSBuZXcgYW5vbnltb3VzIGZ1bmN0aW9uIGFzIGRlZmluZWQgYnlcbiAgICAvLz4gICAgIExvYWRTdWNjZWVkZWQuXG4gICAgLy8+IDcuICBTZXQgdGhlIFtbTG9hZF1dIGludGVybmFsIHNsb3Qgb2YgRiB0byBsb2FkLlxuICAgIC8vPiA4LiAgTGV0IHAgYmUgdGhlIHJlc3VsdCBvZiBQcm9taXNlVGhlbihwLCBGKS5cbiAgICBwID0gY2FsbEZ1bmN0aW9uKHN0ZF9Qcm9taXNlX3RoZW4sIHAsXG4gICAgICAgICAgICAgICAgICAgICBNYWtlQ2xvc3VyZV9Mb2FkU3VjY2VlZGVkKGxvYWQpKTtcblxuICAgIC8vPiA5LiAgUmV0dXJuIHAuXG4gICAgcmV0dXJuIHA7XG59XG5cbi8vPiAjIyMjIEFkZERlcGVuZGVuY3lMb2FkIEZ1bmN0aW9uc1xuLy8+XG4vLz4gQW4gQWRkRGVwZW5kZW5jeUxvYWQgZnVuY3Rpb24gaXMgYW4gYW5vbnltb3VzIGZ1bmN0aW9uIHRoYXQgYWRkcyBhIExvYWRcbi8vPiBSZWNvcmQgZm9yIGEgZGVwZW5kZW5jeSB0byBhbnkgTGlua1NldHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBwYXJlbnQgTG9hZC5cbi8vPlxuLy8+IEVhY2ggQWRkRGVwZW5kZW5jeUxvYWQgZnVuY3Rpb24gaGFzIFtbUGFyZW50TG9hZF1dIGFuZCBbW1JlcXVlc3RdXSBpbnRlcm5hbFxuLy8+IHNsb3RzLlxuLy8+XG4vLz4gV2hlbiBhbiBBZGREZXBlbmRlbmN5TG9hZCBmdW5jdGlvbiBGIGlzIGNhbGxlZCB3aXRoIGFyZ3VtZW50IGRlcExvYWQsIHRoZVxuLy8+IGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4vLz5cbmZ1bmN0aW9uIE1ha2VDbG9zdXJlX0FkZERlcGVuZGVuY3lMb2FkKHBhcmVudExvYWQsIHJlcXVlc3QpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGRlcExvYWQpIHtcbiAgICAgICAgLy8+IDEuICBMZXQgcGFyZW50TG9hZCBiZSBGLltbUGFyZW50TG9hZF1dLlxuICAgICAgICAvLz4gMi4gIExldCByZXF1ZXN0IGJlIEYuW1tSZXF1ZXN0XV0uXG5cbiAgICAgICAgLy8+IDMuICBBc3NlcnQ6IFRoZXJlIGlzIG5vIFJlY29yZCBpbiB0aGUgTGlzdFxuICAgICAgICAvLz4gICAgIHBhcmVudExvYWQuW1tEZXBlbmRlbmNpZXNdXSB3aG9zZSBbW2tleV1dIGZpZWxkIGlzIGVxdWFsIHRvXG4gICAgICAgIC8vPiAgICAgcmVxdWVzdC5cbiAgICAgICAgQXNzZXJ0KCFjYWxsRnVuY3Rpb24oc3RkX01hcF9oYXMsIHBhcmVudExvYWQuZGVwZW5kZW5jaWVzLCByZXF1ZXN0KSk7XG5cbiAgICAgICAgLy8+IDQuICBBZGQgdGhlIFJlY29yZCB7W1trZXldXTogcmVxdWVzdCwgW1t2YWx1ZV1dOiBkZXBMb2FkLltbTmFtZV1dfVxuICAgICAgICAvLz4gICAgIHRvIHRoZSBMaXN0IHBhcmVudExvYWQuW1tEZXBlbmRlbmNpZXNdXS5cbiAgICAgICAgY2FsbEZ1bmN0aW9uKHN0ZF9NYXBfc2V0LCBwYXJlbnRMb2FkLmRlcGVuZGVuY2llcywgcmVxdWVzdCwgZGVwTG9hZC5uYW1lKTtcblxuICAgICAgICAvLz4gNS4gIElmIGRlcExvYWQuW1tTdGF0dXNdXSBpcyBub3QgYFwibGlua2VkXCJgLCB0aGVuXG4gICAgICAgIGlmIChkZXBMb2FkLnN0YXR1cyAhPT0gXCJsaW5rZWRcIikge1xuICAgICAgICAgICAgLy8+ICAgICAxLiAgTGV0IGxpbmtTZXRzIGJlIGEgY29weSBvZiB0aGUgTGlzdCBwYXJlbnRMb2FkLltbTGlua1NldHNdXS5cbiAgICAgICAgICAgIHZhciBsaW5rU2V0cyA9IFNldFRvQXJyYXkocGFyZW50TG9hZC5saW5rU2V0cyk7XG5cbiAgICAgICAgICAgIC8vPiAgICAgMi4gIEZvciBlYWNoIGxpbmtTZXQgaW4gbGlua1NldHMsIGRvXG4gICAgICAgICAgICAvLz4gICAgICAgICAxLiAgQ2FsbCBBZGRMb2FkVG9MaW5rU2V0KGxpbmtTZXQsIGRlcExvYWQpLlxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsaW5rU2V0cy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgICAgICBBZGRMb2FkVG9MaW5rU2V0KGxpbmtTZXRzW2pdLCBkZXBMb2FkKTtcbiAgICAgICAgfVxuICAgIH07XG59XG4vLz5cblxuLy8+ICMjIyMgTG9hZFN1Y2NlZWRlZCBGdW5jdGlvbnNcbi8vPlxuLy8+IEEgTG9hZFN1Y2NlZWRlZCBmdW5jdGlvbiBpcyBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gdGhhdCB0cmFuc2l0aW9ucyBhIExvYWRcbi8vPiBSZWNvcmQgZnJvbSBgXCJsb2FkaW5nXCJgIHRvIGBcImxvYWRlZFwiYCBhbmQgbm90aWZpZXMgYWxsIGFzc29jaWF0ZWQgTGlua1NldFxuLy8+IFJlY29yZHMgb2YgdGhlIGNoYW5nZS4gVGhpcyBmdW5jdGlvbiBjb25jbHVkZXMgdGhlIGxvYWRlciBwaXBlbGluZS4gSXQgaXNcbi8vPiBjYWxsZWQgYWZ0ZXIgYWxsIGEgbmV3bHkgbG9hZGVkIG1vZHVsZSdzIGRlcGVuZGVuY2llcyBhcmUgc3VjY2Vzc2Z1bGx5XG4vLz4gcHJvY2Vzc2VkLlxuLy8+XG4vLz4gRWFjaCBMb2FkU3VjY2VlZGVkIGZ1bmN0aW9uIGhhcyBhIFtbTG9hZF1dIGludGVybmFsIHNsb3QuXG4vLz5cbi8vPiBXaGVuIGEgTG9hZFN1Y2NlZWRlZCBmdW5jdGlvbiBGIGlzIGNhbGxlZCwgdGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4vLz5cbmZ1bmN0aW9uIE1ha2VDbG9zdXJlX0xvYWRTdWNjZWVkZWQobG9hZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoXykge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkIGJlIEYuW1tMb2FkXV0uXG4gICAgICAgIC8vPiAyLiAgQXNzZXJ0OiBsb2FkLltbU3RhdHVzXV0gaXMgYFwibG9hZGluZ1wiYC5cbiAgICAgICAgQXNzZXJ0KGxvYWQuc3RhdHVzID09PSBcImxvYWRpbmdcIik7XG5cbiAgICAgICAgLy8+IDMuICBTZXQgdGhlIFtbU3RhdHVzXV0gZmllbGQgb2YgbG9hZCB0byBgXCJsb2FkZWRcImAuXG4gICAgICAgIGxvYWQuc3RhdHVzID0gXCJsb2FkZWRcIjtcblxuICAgICAgICAvLz4gNC4gIExldCBsaW5rU2V0cyBiZSBhIGNvcHkgb2YgbG9hZC5bW0xpbmtTZXRzXV0uXG4gICAgICAgIHZhciBsaW5rU2V0cyA9IFNldFRvQXJyYXkobG9hZC5saW5rU2V0cyk7XG5cbiAgICAgICAgLy8+IDUuICBGb3IgZWFjaCBsaW5rU2V0IGluIGxpbmtTZXRzLCBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhlIExpbmtTZXRcbiAgICAgICAgLy8+ICAgICBSZWNvcmRzIHdlcmUgY3JlYXRlZCxcbiAgICAgICAgY2FsbEZ1bmN0aW9uKHN0ZF9BcnJheV9zb3J0LCBsaW5rU2V0cyxcbiAgICAgICAgICAgICAgICAgICAgIChhLCBiKSA9PiBiLnRpbWVzdGFtcCAtIGEudGltZXN0YW1wKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rU2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8+ICAgICAxLiAgQ2FsbCBVcGRhdGVMaW5rU2V0T25Mb2FkKGxpbmtTZXQsIGxvYWQpLlxuICAgICAgICAgICAgVXBkYXRlTGlua1NldE9uTG9hZChsaW5rU2V0c1tpXSwgbG9hZCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5cblxuLy8gIyMgTm90ZXMgb24gZXJyb3IgaGFuZGxpbmdcbi8vXG4vLyBNb3N0IGVycm9ycyB0aGF0IGNhbiBvY2N1ciBkdXJpbmcgbW9kdWxlIGxvYWRpbmcgYXJlIHJlbGF0ZWQgdG8gZWl0aGVyIGFcbi8vIHNwZWNpZmljIGluLWZsaWdodCBgTG9hZGAgKGluIGBsb2FkZXIubG9hZHNgKSBvciBhIHNwZWNpZmljIGBMaW5rU2V0YC5cbi8vXG4vLyBXaGVuIHN1Y2ggYW4gZXJyb3Igb2NjdXJzOlxuLy9cbi8vICAxLiBDb21wdXRlIHRoZSBzZXQgRiBvZiBgTGlua1NldGBzIHdlIGFyZSBnb2luZyB0byBmYWlsLlxuLy9cbi8vICAgICAgICogSWYgdGhlIGVycm9yIGlzIHJlbGF0ZWQgdG8gYSBzaW5nbGUgYExpbmtTZXRgICh0aGF0IGlzLCBpdCBpcyBhIGxpbmtcbi8vICAgICAgICAgZXJyb3Igb3IgYW4gcnVudGltZSBlcnJvciBpbiBhIG1vZHVsZSksIHRoZW4gRiA9IGEgc2V0IGNvbnRhaW5pbmdcbi8vICAgICAgICAganVzdCB0aGF0IGBMaW5rU2V0YC5cbi8vXG4vLyAgICAgICAqIElmIHRoZSBlcnJvciBpcyByZWxhdGVkIHRvIGFuIGluLWZsaWdodCBgTG9hZGAgKHRoYXQgaXMsIGl0IGhhcyB0b1xuLy8gICAgICAgICBkbyB3aXRoIGEgaG9vayB0aHJvd2luZywgcmV0dXJuaW5nIGFuIGludmFsaWQgdmFsdWUsIG9yIHJldHVybmluZyBhXG4vLyAgICAgICAgIHRoZW5hYmxlIHRoYXQgYmVjb21lcyByZWplY3RlZCksIHRoZW4gRiA9IGBsb2FkLmxpbmtTZXRzYC5cbi8vXG4vLyAgMi4gRGV0YWNoIGVhY2ggYExpbmtTZXRgIGluIEYgZnJvbSBhbGwgYExvYWRgcyBpdCByZXF1aXJlZC5cbi8vXG4vLyAgMy4gTGV0IE0gPSB0aGUgc2V0IG9mIGFsbCBpbi1mbGlnaHQgbG9hZHMgKGluIGxvYWRlci5bW0xvYWRzXV0pIHRoYXQgYXJlIG5vXG4vLyAgICAgbG9uZ2VyIG5lZWRlZCBieSBhbnkgTGlua1NldC5cbi8vXG4vLyAgNC4gUmVtb3ZlIGFsbCBsb2FkcyBpbiBNIGZyb20gbG9hZGVyLltbTG9hZHNdXS4gIElmIGFueSBhcmUgaW4gYFwibG9hZGluZ1wiYFxuLy8gICAgIHN0YXRlLCB3YWl0aW5nIGZvciBhIHByb21pc2UsIG1ha2UgYW55IGBmdWxmaWxsYCBhbmQgYHJlamVjdGAgY2FsbGJhY2tzXG4vLyAgICAgaW50byBuby1vcHMuXG4vL1xuLy8gIDUuIFJlamVjdCB0aGUgcHJvbWlzZXMgYXNzb2NpYXRlZCB3aXRoIGVhY2ggYExpbmtTZXRgIGluIEYuXG4vL1xuLy8gQWZ0ZXIgdGhhdCwgd2UgZHJvcCB0aGUgZmFpbGVkIGBMaW5rU2V0YHMgYW5kIHRoZXkgYmVjb21lIGdhcmJhZ2UuXG4vL1xuLy8gTW9kdWxlcyB0aGF0IGFyZSBhbHJlYWR5IGxpbmtlZCBhbmQgY29tbWl0dGVkIHRvIHRoZSBtb2R1bGUgcmVnaXN0cnkgYXJlXG4vLyB1bmFmZmVjdGVkIGJ5IHRoZSBlcnJvci5cbi8vXG4vL1xuLy8gIyMjIEVuY3ljbG9wZWRpYSBvZiBlcnJvcnNcbi8vXG4vLyBGb3IgcmVmZXJlbmNlLCBoZXJlIGFyZSBhbGwgdGhlIGtpbmRzIG9mIGVycm9ycyB0aGF0IGNhbiBvY2N1ciB0aGF0IGFyZVxuLy8gcmVsYXRlZCB0byBvbmUgb3IgbW9yZSBsb2FkcyBpbiBwcm9ncmVzcy4gVGhpcyBsaXN0IGlzIG1lYW50IHRvIGJlXG4vLyBleGhhdXN0aXZlLlxuLy9cbi8vIEVycm9ycyByZWxhdGVkIHRvIGEgYExvYWRgOlxuLy9cbi8vICAgLSBGb3IgZWFjaCBsb2FkLCB3ZSBjYWxsIG9uZSBvciBtb3JlIG9mIHRoZSBsb2FkZXIgaG9va3MuICBHZXR0aW5nIHRoZVxuLy8gICAgIGhvb2sgZnJvbSB0aGUgTG9hZGVyIG9iamVjdCBjYW4gdHJpZ2dlciBhIGdldHRlciB0aGF0IHRocm93cy4gIFRoZSB2YWx1ZVxuLy8gICAgIG9mIHRoZSBob29rIHByb3BlcnR5IGNhbiBiZSBub24tY2FsbGFibGUuICBUaGUgaG9vayBjYW4gdGhyb3cuICBUaGUgaG9va1xuLy8gICAgIGNhbiByZXR1cm4gYW4gaW52YWxpZCByZXR1cm4gdmFsdWUuXG4vL1xuLy8gICAtIFRoZSBgbm9ybWFsaXplYCwgYGxvY2F0ZWAsIGFuZCBgaW5zdGFudGlhdGVgIGhvb2tzIG1heSByZXR1cm4gb2JqZWN0c1xuLy8gICAgIHRoYXQgYXJlIHRoZW4gZGVzdHJ1Y3R1cmVkLiAgVGhlc2Ugb2JqZWN0cyBjb3VsZCB0aHJvdyBmcm9tIGEgZ2V0dGVyIG9yXG4vLyAgICAgcHJveHkgdHJhcCBkdXJpbmcgZGVzdHJ1Y3R1cmluZy5cbi8vXG4vLyAgIC0gVGhlIGZldGNoIGhvb2sgY2FuIHJlcG9ydCBhbiBlcnJvciB2aWEgdGhlIGByZWplY3QoKWAgY2FsbGJhY2suXG4vL1xuLy8gICAtIFdlIGNhbiBmZXRjaCBiYWQgY29kZSBhbmQgZ2V0IGEgYFN5bnRheEVycm9yYCB0cnlpbmcgdG8gcGFyc2UgaXQuXG4vL1xuLy8gICAtIE9uY2UgdGhlIGNvZGUgaXMgcGFyc2VkLCB3ZSBjYWxsIHRoZSBgbm9ybWFsaXplYCBob29rIGZvciBlYWNoIGltcG9ydCBpblxuLy8gICAgIHRoYXQgY29kZTsgdGhhdCBob29rIGNhbiB0aHJvdyBvciByZXR1cm4gYW4gaW52YWxpZCB2YWx1ZS5cbi8vXG4vLyBFcnJvcnMgcmVsYXRlZCB0byBhIGBMaW5rU2V0YDpcbi8vXG4vLyAgIC0gRHVyaW5nIGxpbmtpbmcsIHdlIGNhbiBmaW5kIHRoYXQgYSBkeW5hbWljIG1vZHVsZSBpcyBpbnZvbHZlZCBpbiBhblxuLy8gICAgIGltcG9ydCBjeWNsZS4gVGhpcyBpcyBhbiBlcnJvci5cbi8vXG4vLyAgIC0gTGlua2luZyBhIHNldCBvZiBkZWNsYXJhdGl2ZSBtb2R1bGVzIGNhbiBmYWlsIGluIHNldmVyYWwgd2F5cy5cbi8vICAgICBUaGVzZSBhcmUgZGVzY3JpYmVkIHVuZGVyIFwiUnVudGltZSBTZW1hbnRpY3M6IExpbmsgRXJyb3JzXCIuXG4vL1xuLy8gICAtIEEgZHluYW1pYyBgZmFjdG9yeS5leGVjdXRlKClgIGZ1bmN0aW9uIGNhbiB0aHJvdyBvciByZXR1cm4gYW4gaW52YWxpZFxuLy8gICAgIHZhbHVlLlxuLy9cbi8vICAgLSBFdmFsdWF0aW9uIG9mIGEgbW9kdWxlIGJvZHkgb3IgYSBzY3JpcHQgY2FuIHRocm93LlxuLy9cblxuLy8+ICMjIyBMaW5rU2V0IFJlY29yZHNcbi8vPlxuLy8+IEEgTGlua1NldCBSZWNvcmQgcmVwcmVzZW50cyBhIGNhbGwgdG8gYGxvYWRlci5kZWZpbmUoKWAsIGAubG9hZCgpYCxcbi8vPiBgLm1vZHVsZSgpYCwgb3IgYC5pbXBvcnQoKWAuXG4vLz5cbi8vPiBFYWNoIExpbmtTZXQgUmVjb3JkIGhhcyB0aGUgZm9sbG93aW5nIGZpZWxkczpcbi8vPlxuLy8+ICAgKiBsaW5rU2V0LltbTG9hZGVyXV0gLSBUaGUgTG9hZGVyIG9iamVjdCB0aGF0IGNyZWF0ZWQgdGhpcyBMaW5rU2V0LlxuLy8+XG4vLz4gICAqIGxpbmtTZXQuW1tMb2Fkc11dIC0gQSBMaXN0IG9mIHRoZSBMb2FkIFJlY29yZHMgdGhhdCBtdXN0IGZpbmlzaCBsb2FkaW5nXG4vLz4gICAgIGJlZm9yZSB0aGUgbW9kdWxlcyBjYW4gYmUgbGlua2VkIGFuZCBldmFsdWF0ZWQuXG4vLz5cbi8vPiAgICogbGlua1NldC5bW0RvbmVdXSAtIEEgUHJvbWlzZSB0aGF0IGJlY29tZXMgZnVsZmlsbGVkIHdoZW4gYWxsXG4vLz4gICAgIGRlcGVuZGVuY2llcyBhcmUgbG9hZGVkIGFuZCBsaW5rZWQgdG9nZXRoZXIuXG4vLz5cbi8vPiAgICogbGlua1NldC5bW1Jlc29sdmVdXSBhbmQgbGlua1NldC5bW1JlamVjdF1dIC0gRnVuY3Rpb25zIHVzZWQgdG8gcmVzb2x2ZVxuLy8+ICAgICBvciByZWplY3QgbGlua1NldC5bW0RvbmVdXS5cbi8vPlxuXG4vLz4gIyMjIyBDcmVhdGVMaW5rU2V0KGxvYWRlciwgc3RhcnRpbmdMb2FkKSBBYnN0cmFjdCBPcGVyYXRpb25cbi8vPlxuLy8+IFRoZSBDcmVhdGVMaW5rU2V0IGFic3RyYWN0IG9wZXJhdGlvbiBjcmVhdGVzIGEgbmV3IExpbmtTZXQgcmVjb3JkIGJ5XG4vLz4gcGVyZm9ybWluZyB0aGUgZm9sbG93aW5nIHN0ZXBzOlxuLy8+XG5mdW5jdGlvbiBDcmVhdGVMaW5rU2V0KGxvYWRlciwgc3RhcnRpbmdMb2FkKSB7XG4gICAgLy8+IDEuICBJZiBUeXBlKGxvYWRlcikgaXMgbm90IE9iamVjdCwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIC8vPiAyLiAgSWYgbG9hZGVyIGRvZXMgbm90IGhhdmUgYWxsIG9mIHRoZSBpbnRlcm5hbCBwcm9wZXJ0aWVzIG9mIGEgTG9hZGVyXG4gICAgLy8+ICAgICBJbnN0YW5jZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIHZhciBsb2FkZXJEYXRhID0gR2V0TG9hZGVySW50ZXJuYWxEYXRhKGxvYWRlcik7XG5cbiAgICAvLz4gMy4gIExldCBkZWZlcnJlZCBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgR2V0RGVmZXJyZWQoJVByb21pc2UlKS5cbiAgICAvLz4gNC4gIFJldHVybklmQWJydXB0KGRlZmVycmVkKS5cbiAgICB2YXIgcmVzb2x2ZSwgcmVqZWN0O1xuICAgIHZhciBkb25lID0gbmV3IHN0ZF9Qcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xuICAgICAgICByZXNvbHZlID0gcmVzO1xuICAgICAgICByZWplY3QgPSByZWo7XG4gICAgfSk7XG5cbiAgICAvLz4gNS4gIExldCBsaW5rU2V0IGJlIGEgbmV3IExpbmtTZXQgUmVjb3JkLlxuICAgIHZhciBsaW5rU2V0ID0ge1xuICAgICAgICAvLz4gNi4gIFNldCB0aGUgW1tMb2FkZXJdXSBmaWVsZCBvZiBsaW5rU2V0IHRvIGxvYWRlci5cbiAgICAgICAgbG9hZGVyOiBsb2FkZXIsXG4gICAgICAgIC8vPiA3LiAgU2V0IHRoZSBbW0xvYWRzXV0gZmllbGQgb2YgbGlua1NldCB0byBhIG5ldyBlbXB0eSBMaXN0LlxuICAgICAgICBsb2FkczogQ3JlYXRlU2V0KCksXG4gICAgICAgIC8vPiA4LiAgU2V0IHRoZSBbW0RvbmVdXSBmaWVsZCBvZiBsaW5rU2V0IHRvIGRlZmVycmVkLltbUHJvbWlzZV1dLlxuICAgICAgICBkb25lOiBkb25lLFxuICAgICAgICAvLz4gOS4gIFNldCB0aGUgW1tSZXNvbHZlXV0gZmllbGQgb2YgbGlua1NldCB0byBkZWZlcnJlZC5bW1Jlc29sdmVdXS5cbiAgICAgICAgcmVzb2x2ZTogcmVzb2x2ZSxcbiAgICAgICAgLy8+IDEwLiBTZXQgdGhlIFtbUmVqZWN0XV0gZmllbGQgb2YgbGlua1NldCB0byBkZWZlcnJlZC5bW1JlamVjdF1dLlxuICAgICAgICByZWplY3Q6IHJlamVjdCxcblxuICAgICAgICB0aW1lc3RhbXA6IGxvYWRlckRhdGEubGlua1NldENvdW50ZXIrKyxcbiAgICAgICAgbG9hZGluZ0NvdW50OiAwXG4gICAgfTtcblxuICAgIC8vPiAxMS4gQ2FsbCBBZGRMb2FkVG9MaW5rU2V0KGxpbmtTZXQsIHN0YXJ0aW5nTG9hZCkuXG4gICAgQWRkTG9hZFRvTGlua1NldChsaW5rU2V0LCBzdGFydGluZ0xvYWQpO1xuXG4gICAgLy8+IDEyLiBSZXR1cm4gbGlua1NldC5cbiAgICByZXR1cm4gbGlua1NldDtcbn1cbi8vXG4vLyAqKmBsaW5rU2V0LnRpbWVzdGFtcGAqKiAmbmRhc2g7IFRoaXMgZmllbGQgaXMgbm90IGluIHRoZSBzcGVjLCBidXQgc2V2ZXJhbFxuLy8gcGxhY2VzIGluIHRoZSBzcGVjIHJlcXVpcmUgc29ydGluZyBhIExpc3Qgb2YgTGlua1NldHMgYnkgdGhlIG9yZGVyIGluIHdoaWNoXG4vLyB0aGV5IHdlcmUgY3JlYXRlZC5cbi8vXG4vLyAqKmBsaW5rU2V0LmxvYWRpbmdDb3VudGAqKiAmbmRhc2g7IFRoaXMgZmllbGQgaXMgbm90IGluIHRoZSBzcGVjIGVpdGhlci5cbi8vIEl0cyB2YWx1ZSBpcyBhbHdheXMgdGhlIG51bWJlciBvZiBgTG9hZGBzIGluIGB0aGlzLmxvYWRzYCB3aG9zZSBgLnN0YXR1c2AgaXNcbi8vIGBcImxvYWRpbmdcImAuICBUaGlzIGltcGxlbWVudGF0aW9uIHN0b3JlcyB0aGlzIHZhbHVlIGFzIGFuIG9wdGltaXphdGlvbiwgdG9cbi8vIGF2b2lkIGhhdmluZyB0byB3YWxrIGB0aGlzLmxvYWRzYCBhbmQgY29tcHV0ZSB0aGlzIHZhbHVlIGV2ZXJ5IHRpbWUgaXQnc1xuLy8gbmVlZGVkLlxuXG5cbi8vPiAjIyMjIEFkZExvYWRUb0xpbmtTZXQobGlua1NldCwgbG9hZCkgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgQWRkTG9hZFRvTGlua1NldCBhYnN0cmFjdCBvcGVyYXRpb24gYXNzb2NpYXRlcyBhIExpbmtTZXQgUmVjb3JkIHdpdGggYVxuLy8+IExvYWQgUmVjb3JkIGFuZCBlYWNoIG9mIGl0cyBjdXJyZW50bHkga25vd24gZGVwZW5kZW5jaWVzLCBpbmRpY2F0aW5nIHRoYXRcbi8vPiB0aGUgTGlua1NldCBjYW5ub3QgYmUgbGlua2VkIHVudGlsIHRob3NlIExvYWRzIGhhdmUgZmluaXNoZWQgc3VjY2Vzc2Z1bGx5LlxuLy8+XG4vLz4gVGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4vLz5cbmZ1bmN0aW9uIEFkZExvYWRUb0xpbmtTZXQobGlua1NldCwgbG9hZCkge1xuICAgIC8vPiAxLiAgQXNzZXJ0OiBsb2FkLltbU3RhdHVzXV0gaXMgZWl0aGVyIGBcImxvYWRpbmdcImAgb3IgYFwibG9hZGVkXCJgLlxuICAgIEFzc2VydChsb2FkLnN0YXR1cyA9PT0gXCJsb2FkaW5nXCIgfHwgbG9hZC5zdGF0dXMgPT09IFwibG9hZGVkXCIpO1xuXG4gICAgLy8+IDIuICBMZXQgbG9hZGVyIGJlIGxpbmtTZXQuW1tMb2FkZXJdXS5cbiAgICB2YXIgbG9hZGVyRGF0YSA9IEdldExvYWRlckludGVybmFsRGF0YShsaW5rU2V0LmxvYWRlcik7XG5cbiAgICAvLz4gMy4gIElmIGxvYWQgaXMgbm90IGFscmVhZHkgYW4gZWxlbWVudCBvZiB0aGUgTGlzdCBsaW5rU2V0LltbTG9hZHNdXSxcbiAgICBpZiAoIWNhbGxGdW5jdGlvbihzdGRfU2V0X2hhcywgbGlua1NldC5sb2FkcywgbG9hZCkpIHtcbiAgICAgICAgLy8+ICAgICAxLiAgQWRkIGxvYWQgdG8gdGhlIExpc3QgbGlua1NldC5bW0xvYWRzXV0uXG4gICAgICAgIGNhbGxGdW5jdGlvbihzdGRfU2V0X2FkZCwgbGlua1NldC5sb2FkcywgbG9hZCk7XG5cbiAgICAgICAgLy8+ICAgICAyLiAgQWRkIGxpbmtTZXQgdG8gdGhlIExpc3QgbG9hZC5bW0xpbmtTZXRzXV0uXG4gICAgICAgIGNhbGxGdW5jdGlvbihzdGRfU2V0X2FkZCwgbG9hZC5saW5rU2V0cywgbGlua1NldCk7XG5cbiAgICAgICAgLy8+ICAgICAzLiAgSWYgbG9hZC5bW1N0YXR1c11dIGlzIGBcImxvYWRlZFwiYCwgdGhlblxuICAgICAgICBpZiAobG9hZC5zdGF0dXMgPT09IFwibG9hZGVkXCIpIHtcbiAgICAgICAgICAgIC8vPiAgICAgICAgIDEuICBGb3IgZWFjaCBuYW1lIGluIHRoZSBMaXN0IGxvYWQuW1tEZXBlbmRlbmNpZXNdXSwgZG9cbiAgICAgICAgICAgIGxldCBuYW1lcyA9IE1hcFZhbHVlc1RvQXJyYXkobG9hZC5kZXBlbmRlbmNpZXMpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gbmFtZXNbaV07XG5cbiAgICAgICAgICAgICAgICAvLz4gICAgICAgICAgICAgMS4gIElmIHRoZXJlIGlzIG5vIGVsZW1lbnQgb2ZcbiAgICAgICAgICAgICAgICAvLz4gICAgICAgICAgICAgICAgIGxvYWRlci5bW01vZHVsZXNdXSB3aG9zZSBbW2tleV1dIGZpZWxkIGlzXG4gICAgICAgICAgICAgICAgLy8+ICAgICAgICAgICAgICAgICBlcXVhbCB0byBuYW1lLFxuICAgICAgICAgICAgICAgIGlmICghY2FsbEZ1bmN0aW9uKHN0ZF9NYXBfaGFzLCBsb2FkZXJEYXRhLm1vZHVsZXMsIG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vPiAgICAgICAgICAgICAgICAgMS4gIElmIHRoZXJlIGlzIGFuIGVsZW1lbnQgb2ZcbiAgICAgICAgICAgICAgICAgICAgLy8+ICAgICAgICAgICAgICAgICAgICAgbG9hZGVyLltbTG9hZHNdXSB3aG9zZSBbW05hbWVdXVxuICAgICAgICAgICAgICAgICAgICAvLz4gICAgICAgICAgICAgICAgICAgICBmaWVsZCBpcyBlcXVhbCB0byBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAvLz4gICAgICAgICAgICAgICAgICAgICAxLiAgTGV0IGRlcExvYWQgYmUgdGhhdCBMb2FkXG4gICAgICAgICAgICAgICAgICAgIC8vPiAgICAgICAgICAgICAgICAgICAgICAgICBSZWNvcmQuXG4gICAgICAgICAgICAgICAgICAgIC8vPiAgICAgICAgICAgICAgICAgICAgIDIuICBDYWxsIEFkZExvYWRUb0xpbmtTZXQobGlua1NldCxcbiAgICAgICAgICAgICAgICAgICAgLy8+ICAgICAgICAgICAgICAgICAgICAgICAgIGRlcExvYWQpLlxuICAgICAgICAgICAgICAgICAgICBsZXQgZGVwTG9hZCA9IGNhbGxGdW5jdGlvbihzdGRfTWFwX2dldCwgbG9hZGVyRGF0YS5sb2FkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXBMb2FkICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBBZGRMb2FkVG9MaW5rU2V0KGxpbmtTZXQsIGRlcExvYWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpbmtTZXQubG9hZGluZ0NvdW50Kys7ICAvLyBTZWUgY29tbWVudCBhdCBDcmVhdGVMaW5rU2V0KCkuXG4gICAgICAgIH1cbiAgICB9XG59XG4vLz5cbi8vXG4vLyBUaGUgY2FzZSBpbiBzdGVwIDMuYy5pLjEuIHdoZXJlIHRoZXJlIGlzIG5vIG1hdGNoaW5nIGVudHJ5IGVpdGhlciBpblxuLy8gbG9hZGVyLltbTW9kdWxlc11dIG9yIGluIGxvYWRlci5bW0xvYWRzXV0gY2FuIG9jY3VyLCBidXQgb25seSB0aHJvdWdoIHRoZVxuLy8gdXNlIG9mIGBMb2FkZXIucHJvdG90eXBlLmRlbGV0ZWAuXG5cblxuLy8+ICMjIyMgVXBkYXRlTGlua1NldE9uTG9hZChsaW5rU2V0LCBsb2FkKSBBYnN0cmFjdCBPcGVyYXRpb25cbi8vPlxuLy8+IFRoZSBVcGRhdGVMaW5rU2V0T25Mb2FkIGFic3RyYWN0IG9wZXJhdGlvbiBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgYVxuLy8+IExvYWQgc3VjY2Vzc2Z1bGx5IGZpbmlzaGVzLCBhZnRlciBzdGFydGluZyBMb2FkcyBmb3IgYW55IGRlcGVuZGVuY2llcyB0aGF0XG4vLz4gd2VyZSBub3QgYWxyZWFkeSBsb2FkaW5nLCBsb2FkZWQsIG9yIGluIHRoZSBtb2R1bGUgcmVnaXN0cnkuXG4vLz5cbi8vPiBUaGlzIG9wZXJhdGlvbiBkZXRlcm1pbmVzIHdoZXRoZXIgbGlua1NldCBpcyByZWFkeSB0byBsaW5rLCBhbmQgaWYgc28sXG4vLz4gY2FsbHMgTGluay5cbi8vPlxuLy8+IFRoZSBmb2xsb3dpbmcgc3RlcHMgYXJlIHRha2VuOlxuLy8+XG5mdW5jdGlvbiBVcGRhdGVMaW5rU2V0T25Mb2FkKGxpbmtTZXQsIGxvYWQpIHtcbiAgICAvLz4gMS4gIEFzc2VydDogbG9hZCBpcyBhbiBlbGVtZW50IG9mIGxpbmtTZXQuW1tMb2Fkc11dLlxuICAgIEFzc2VydChjYWxsRnVuY3Rpb24oc3RkX1NldF9oYXMsIGxpbmtTZXQubG9hZHMsIGxvYWQpKTtcblxuICAgIC8vPiAyLiAgQXNzZXJ0OiBsb2FkLltbU3RhdHVzXV0gaXMgZWl0aGVyIGBcImxvYWRlZFwiYCBvciBgXCJsaW5rZWRcImAuXG4gICAgQXNzZXJ0KGxvYWQuc3RhdHVzID09PSBcImxvYWRlZFwiIHx8IGxvYWQuc3RhdHVzID09PSBcImxpbmtlZFwiKTtcblxuICAgIC8vPiAzLiAgUmVwZWF0IGZvciBlYWNoIGxvYWQgaW4gbGlua1NldC5bW0xvYWRzXV0sXG4gICAgLy8+ICAgICAxLiAgSWYgbG9hZC5bW1N0YXR1c11dIGlzIGBcImxvYWRpbmdcImAsIHRoZW4gcmV0dXJuLlxuICAgIGlmICgtLWxpbmtTZXQubG9hZGluZ0NvdW50ICE9PSAwKVxuICAgICAgICByZXR1cm47XG5cbiAgICAvLz4gNC4gIExldCBzdGFydGluZ0xvYWQgYmUgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIExpc3RcbiAgICAvLz4gICAgIGxpbmtTZXQuW1tMb2Fkc11dLlxuICAgIHZhciBzdGFydGluZ0xvYWQgPSBjYWxsRnVuY3Rpb24oc3RkX1NldF9pdGVyYXRvcl9uZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEZ1bmN0aW9uKHN0ZF9TZXRfaXRlcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua1NldC5sb2FkcykpLnZhbHVlO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgLy8+IDUuICBMZXQgc3RhdHVzIGJlIHRoZSByZXN1bHQgb2YgTGluayhsaW5rU2V0LltbTG9hZHNdXSxcbiAgICAgICAgLy8+ICAgICBsaW5rU2V0LltbTG9hZGVyXV0pLlxuICAgICAgICBMaW5rKGxpbmtTZXQubG9hZHMsIGxpbmtTZXQubG9hZGVyKTtcbiAgICB9IGNhdGNoIChleGMpIHtcbiAgICAgICAgLy8+IDYuICBJZiBzdGF0dXMgaXMgYW4gYWJydXB0IGNvbXBsZXRpb24sIHRoZW5cbiAgICAgICAgLy8+ICAgICAxLiAgQ2FsbCBMaW5rU2V0RmFpbGVkKGxpbmtTZXQsIHN0YXR1cy5bW3ZhbHVlXV0pLlxuICAgICAgICBMaW5rU2V0RmFpbGVkKGxpbmtTZXQsIGV4Yyk7XG5cbiAgICAgICAgLy8+ICAgICAyLiAgUmV0dXJuLlxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8+IDcuICBBc3NlcnQ6IGxpbmtTZXQuW1tMb2Fkc11dIGlzIGFuIGVtcHR5IExpc3QuXG4gICAgQXNzZXJ0KGNhbGxGdW5jdGlvbihzdGRfU2V0X2dldF9zaXplLCBsaW5rU2V0LmxvYWRzKSA9PT0gMCk7XG5cbiAgICAvLz4gOC4gIENhbGwgdGhlIFtbQ2FsbF1dIGludGVybmFsIG1ldGhvZCBvZiBsaW5rU2V0LltbUmVzb2x2ZV1dIHBhc3NpbmdcbiAgICAvLz4gICAgIHVuZGVmaW5lZCBhbmQgKHN0YXJ0aW5nTG9hZCkgYXMgYXJndW1lbnRzLlxuICAgIC8vPiA5LiAgQXNzZXJ0OiBUaGUgY2FsbCBwZXJmb3JtZWQgYnkgc3RlcCA4IGNvbXBsZXRlZCBub3JtYWxseS5cbiAgICBsaW5rU2V0LnJlc29sdmUoc3RhcnRpbmdMb2FkKTtcbn1cbi8vPlxuXG5cbi8vPiAjIyMjIExpbmtTZXRGYWlsZWQobGlua1NldCwgZXhjKSBBYnN0cmFjdCBPcGVyYXRpb25cbi8vPlxuLy8+IFRoZSBMaW5rU2V0RmFpbGVkIGFic3RyYWN0IG9wZXJhdGlvbiBpcyBjYWxsZWQgd2hlbiBhIExpbmtTZXQgZmFpbHMuICBJdFxuLy8+IGRldGFjaGVzIHRoZSBnaXZlbiBMaW5rU2V0IFJlY29yZCBmcm9tIGFsbCBMb2FkIFJlY29yZHMgYW5kIHJlamVjdHMgdGhlXG4vLz4gbGlua1NldC5bW0RvbmVdXSBQcm9taXNlLlxuLy8+XG4vLz4gVGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4vLz5cbmZ1bmN0aW9uIExpbmtTZXRGYWlsZWQobGlua1NldCwgZXhjKSB7XG4gICAgLy8+IDEuICBMZXQgbG9hZGVyIGJlIGxpbmtTZXQuW1tMb2FkZXJdXS5cbiAgICB2YXIgbG9hZGVyRGF0YSA9IEdldExvYWRlckludGVybmFsRGF0YShsaW5rU2V0LmxvYWRlcik7XG5cbiAgICAvLz4gMi4gIExldCBsb2FkcyBiZSBhIGNvcHkgb2YgdGhlIExpc3QgbGlua1NldC5bW0xvYWRzXV0uXG4gICAgdmFyIGxvYWRzID0gU2V0VG9BcnJheShsaW5rU2V0LmxvYWRzKTtcblxuICAgIC8vPiAzLiAgRm9yIGVhY2ggbG9hZCBpbiBsb2FkcyxcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvYWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBsb2FkID0gbG9hZHNbaV07XG5cbiAgICAgICAgLy8+ICAgICAxLiAgQXNzZXJ0OiBsaW5rU2V0IGlzIGFuIGVsZW1lbnQgb2YgdGhlIExpc3RcbiAgICAgICAgLy8+ICAgICAgICAgbG9hZC5bW0xpbmtTZXRzXV0uXG4gICAgICAgIEFzc2VydChjYWxsRnVuY3Rpb24oc3RkX1NldF9oYXMsIGxvYWQubGlua1NldHMsIGxpbmtTZXQpKTtcblxuICAgICAgICAvLz4gICAgIDIuICBSZW1vdmUgbGlua1NldCBmcm9tIHRoZSBMaXN0IGxvYWQuW1tMaW5rU2V0c11dLlxuICAgICAgICBjYWxsRnVuY3Rpb24oc3RkX1NldF9kZWxldGUsIGxvYWQubGlua1NldHMsIGxpbmtTZXQpO1xuXG4gICAgICAgIC8vPiAgICAgMy4gIElmIGxvYWQuW1tMaW5rU2V0c11dIGlzIGVtcHR5IGFuZCBsb2FkIGlzIGFuIGVsZW1lbnQgb2YgdGhlXG4gICAgICAgIC8vPiAgICAgICAgIExpc3QgbG9hZGVyLltbTG9hZHNdXSwgdGhlblxuICAgICAgICBpZiAoY2FsbEZ1bmN0aW9uKHN0ZF9TZXRfZ2V0X3NpemUsIGxvYWQubGlua1NldHMpID09PSAwKSB7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IGxvYWQubmFtZTtcbiAgICAgICAgICAgIGlmIChuYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudExvYWQgPVxuICAgICAgICAgICAgICAgICAgICBjYWxsRnVuY3Rpb24oc3RkX01hcF9nZXQsIGxvYWRlckRhdGEubG9hZHMsIG5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TG9hZCA9PT0gbG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAvLz4gICAgICAgICAxLiAgUmVtb3ZlIGxvYWQgZnJvbSB0aGUgTGlzdCBsb2FkZXIuW1tMb2Fkc11dLlxuICAgICAgICAgICAgICAgICAgICBjYWxsRnVuY3Rpb24oc3RkX01hcF9kZWxldGUsIGxvYWRlckRhdGEubG9hZHMsIG5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vPiA0LiAgQ2FsbCB0aGUgW1tDYWxsXV0gaW50ZXJuYWwgbWV0aG9kIG9mIGxpbmtTZXQuW1tSZWplY3RdXSBwYXNzaW5nXG4gICAgLy8+ICAgICB1bmRlZmluZWQgYW5kIChleGMpIGFzIGFyZ3VtZW50cy5cbiAgICAvLz4gNS4gIEFzc2VydDogVGhlIGNhbGwgcGVyZm9ybWVkIGJ5IHN0ZXAgNCBjb21wbGV0ZWQgbm9ybWFsbHkuXG4gICAgcmV0dXJuIGxpbmtTZXQucmVqZWN0KGV4Yyk7XG59XG4vLz5cblxuXG4vLz4gIyMjIyBGaW5pc2hMb2FkKGxvYWRlciwgbG9hZCkgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgRmluaXNoTG9hZCBBYnN0cmFjdCBPcGVyYXRpb24gcmVtb3ZlcyBhIGNvbXBsZXRlZCBMb2FkIFJlY29yZCBmcm9tIGFsbFxuLy8+IExpbmtTZXRzIGFuZCBjb21taXRzIHRoZSBuZXdseSBsb2FkZWQgTW9kdWxlIHRvIHRoZSByZWdpc3RyeS4gIEl0IHBlcmZvcm1zXG4vLz4gdGhlIGZvbGxvd2luZyBzdGVwczpcbi8vPlxuZnVuY3Rpb24gRmluaXNoTG9hZChsb2FkZXIsIGxvYWQpIHtcbiAgICB2YXIgbG9hZGVyRGF0YSA9IEdldExvYWRlckludGVybmFsRGF0YShsb2FkZXIpO1xuXG4gICAgLy8+IDEuICBMZXQgbmFtZSBiZSBsb2FkLltbTmFtZV1dLlxuICAgIHZhciBuYW1lID0gbG9hZC5uYW1lO1xuXG4gICAgLy8+IDIuICBJZiBuYW1lIGlzIG5vdCB1bmRlZmluZWQsIHRoZW5cbiAgICBpZiAobmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vPiAgICAgMS4gIEFzc2VydDogVGhlcmUgaXMgbm8gUmVjb3JkIHtbW2tleV1dLCBbW3ZhbHVlXV19IHAgdGhhdCBpc1xuICAgICAgICAvLz4gICAgICAgICBhbiBlbGVtZW50IG9mIGxvYWRlci5bW01vZHVsZXNdXSwgc3VjaCB0aGF0IHAuW1trZXldXSBpc1xuICAgICAgICAvLz4gICAgICAgICBlcXVhbCB0byBsb2FkLltbTmFtZV1dLlxuICAgICAgICBBc3NlcnQoIWNhbGxGdW5jdGlvbihzdGRfTWFwX2hhcywgbG9hZGVyRGF0YS5tb2R1bGVzLCBuYW1lKSk7XG5cbiAgICAgICAgLy8+ICAgICAyLiAgQXBwZW5kIHRoZSBSZWNvcmQge1tba2V5XV06IGxvYWQuW1tOYW1lXV0sIFtbdmFsdWVdXTpcbiAgICAgICAgLy8+ICAgICAgICAgbG9hZC5bW01vZHVsZV1dfSBhcyB0aGUgbGFzdCBlbGVtZW50IG9mIGxvYWRlci5bW01vZHVsZXNdXS5cbiAgICAgICAgY2FsbEZ1bmN0aW9uKHN0ZF9NYXBfc2V0LCBsb2FkZXJEYXRhLm1vZHVsZXMsIG5hbWUsIGxvYWQubW9kdWxlKTtcbiAgICB9XG5cbiAgICAvLz4gMy4gIElmIGxvYWQgaXMgYW4gZWxlbWVudCBvZiB0aGUgTGlzdCBsb2FkZXIuW1tMb2Fkc11dLCB0aGVuXG4gICAgdmFyIG5hbWUgPSBsb2FkLm5hbWU7XG4gICAgaWYgKG5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsZXQgY3VycmVudExvYWQgPVxuICAgICAgICAgICAgY2FsbEZ1bmN0aW9uKHN0ZF9NYXBfZ2V0LCBsb2FkZXJEYXRhLmxvYWRzLCBuYW1lKTtcbiAgICAgICAgaWYgKGN1cnJlbnRMb2FkID09PSBsb2FkKSB7XG4gICAgICAgICAgICAvLz4gICAgIDEuICBSZW1vdmUgbG9hZCBmcm9tIHRoZSBMaXN0IGxvYWRlci5bW0xvYWRzXV0uXG4gICAgICAgICAgICBjYWxsRnVuY3Rpb24oc3RkX01hcF9kZWxldGUsIGxvYWRlckRhdGEubG9hZHMsIG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8+IDQuICBGb3IgZWFjaCBsaW5rU2V0IGluIGxvYWQuW1tMaW5rU2V0c11dLFxuICAgIHZhciBsaW5rU2V0cyA9IFNldFRvQXJyYXkobG9hZC5saW5rU2V0cyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5rU2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLz4gICAgIDEuICBSZW1vdmUgbG9hZCBmcm9tIGxpbmtTZXQuW1tMb2Fkc11dLlxuICAgICAgICBjYWxsRnVuY3Rpb24oc3RkX1NldF9kZWxldGUsIGxpbmtTZXRzW2ldLmxvYWRzLCBsb2FkKTtcbiAgICB9XG5cbiAgICAvLz4gNS4gIFJlbW92ZSBhbGwgZWxlbWVudHMgZnJvbSB0aGUgTGlzdCBsb2FkLltbTGlua1NldHNdXS5cbiAgICBjYWxsRnVuY3Rpb24oc3RkX1NldF9jbGVhciwgbG9hZC5saW5rU2V0cyk7XG59XG4vLz5cblxuXG4vLyAqKlRpbWluZyBhbmQgZ3JvdXBpbmcgb2YgZGVwZW5kZW5jaWVzKiogJm5kYXNoOyBDb25zaWRlclxuLy9cbi8vICAgICBsb2FkZXIubW9kdWxlKCdtb2R1bGUgeCBmcm9tIFwieFwiOyBtb2R1bGUgeSBmcm9tIFwieVwiOycpO1xuLy9cbi8vIFRoZSBhYm92ZSBjb2RlIGltcGxpZXMgdGhhdCB3ZSB3YWl0IHRvIGV2YWx1YXRlIFwieFwiIHVudGlsIFwieVwiIGhhcyBhbHNvIGJlZW5cbi8vIGZldGNoZWQuIEV2ZW4gaWYgXCJ4XCIgdHVybnMgb3V0IHRvIGJlIGxpbmthYmxlIGFuZCBydW5uYWJsZSwgaXRzIGRlcGVuZGVuY2llc1xuLy8gYXJlIGFsbCBzYXRpc2ZpZWQsIGl0IGxpbmtzIGNvcnJlY3RseSwgYW5kIGl0IGhhcyBubyBkaXJlY3Qgb3IgaW5kaXJlY3Rcbi8vIGRlcGVuZGVuY3kgb24gXCJ5XCIsIHdlIHN0aWxsIHdhaXQuXG4vL1xuLy8gKlJhdGlvbmFsZToqIERlcGVuZGVuY2llcyBjb3VsZCBiZSBpbml0aWFsaXplZCBtb3JlIGVhZ2VybHksIGJ1dCB0aGUgb3JkZXJcbi8vIHdvdWxkIGJlIGxlc3MgZGV0ZXJtaW5pc3RpYy4gVGhlIGRlc2lnbiBvcHRzIGZvciBhIGJpdCBtb3JlIGRldGVybWluaXNtIGluXG4vLyBjb21tb24gY2FzZXMmbWRhc2g7dGhvdWdoIGl0IGlzIHN0aWxsIHBvc3NpYmxlIHRvIHRyaWdnZXIgbm9uLWRldGVybWluaXNtXG4vLyBzaW5jZSBtdWx0aXBsZSBsaW5rIHNldHMgY2FuIGJlIGluLWZsaWdodCBhdCBvbmNlLlxuXG5cbi8vICMjIE1vZHVsZSBsb2FkaW5nIGVudHJ5IHBvaW50c1xuXG4vLz4gIyMjIyBMb2FkTW9kdWxlKGxvYWRlciwgbmFtZSwgb3B0aW9ucykgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gTG9hZE1vZHVsZShsb2FkZXIsIG5hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgbG9hZGVyRGF0YSA9IEdldExvYWRlckludGVybmFsRGF0YShsb2FkZXIpO1xuXG4gICAgLy8+IDEuICBMZXQgbmFtZSBiZSBUb1N0cmluZyhuYW1lKS5cbiAgICAvLz4gMS4gIFJldHVybklmQWJydXB0KG5hbWUpLlxuICAgIG5hbWUgPSBUb1N0cmluZyhuYW1lKTtcblxuICAgIC8vPiAxLiAgTGV0IGFkZHJlc3MgYmUgR2V0T3B0aW9uKG9wdGlvbnMsIGBcImFkZHJlc3NcImApLlxuICAgIC8vPiAxLiAgUmV0dXJuSWZBYnJ1cHQoYWRkcmVzcykuXG4gICAgdmFyIGFkZHJlc3MgPSBHZXRPcHRpb24ob3B0aW9ucywgXCJhZGRyZXNzXCIpO1xuXG4gICAgLy8+IDEuICBMZXQgRiBiZSBhIG5ldyBhbm9ueW1vdXMgZnVuY3Rpb24gb2JqZWN0IGFzIGRlZmluZWQgaW5cbiAgICAvLz4gICAgIEFzeW5jU3RhcnRMb2FkUGFydHdheVRocm91Z2guXG4gICAgLy8+IDEuICBTZXQgRi5bW0xvYWRlcl1dIHRvIGxvYWRlci5cbiAgICAvLz4gMS4gIFNldCBGLltbTW9kdWxlTmFtZV1dIHRvIG5hbWUuXG4gICAgLy8+IDEuICBJZiBhZGRyZXNzIGlzIHVuZGVmaW5lZCwgc2V0IEYuW1tTdGVwXV0gdG8gYFwibG9jYXRlXCJgLlxuICAgIC8vPiAxLiAgRWxzZSwgc2V0IEYuW1tTdGVwXV0gdG8gYFwiZmV0Y2hcImAuXG4gICAgLy8+IDEuICBMZXQgbWV0YWRhdGEgYmUgdGhlIHJlc3VsdCBvZiBPYmplY3RDcmVhdGUoJU9iamVjdFByb3RvdHlwZSUsXG4gICAgLy8+ICAgICAoKSkuXG4gICAgLy8+IDEuICBTZXQgRi5bW01vZHVsZU1ldGFkYXRhXV0gdG8gbWV0YWRhdGEuXG4gICAgLy8+IDEuICBTZXQgRi5bW01vZHVsZVNvdXJjZV1dIHRvIHVuZGVmaW5lZC5cbiAgICAvLz4gMS4gIFNldCBGLltbTW9kdWxlQWRkcmVzc11dIHRvIGFkZHJlc3MuXG4gICAgdmFyIEYgPSBNYWtlQ2xvc3VyZV9Bc3luY1N0YXJ0TG9hZFBhcnR3YXlUaHJvdWdoKFxuICAgICAgICBsb2FkZXIsIGxvYWRlckRhdGEsIG5hbWUsXG4gICAgICAgIGFkZHJlc3MgPT09IHVuZGVmaW5lZCA/IFwibG9jYXRlXCIgOiBcImZldGNoXCIsXG4gICAgICAgIHt9LCBhZGRyZXNzLCB1bmRlZmluZWQpO1xuXG4gICAgLy8+IDEuICBSZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIE9yZGluYXJ5Q29uc3RydWN0KCVQcm9taXNlJSwgKEYpKS5cbiAgICByZXR1cm4gbmV3IHN0ZF9Qcm9taXNlKEYpO1xufVxuLy8+XG5cbi8vPiAjIyMgQXN5bmNTdGFydExvYWRQYXJ0d2F5VGhyb3VnaCBGdW5jdGlvbnNcbi8vPlxuLy8+IEFuIEFzeW5jU3RhcnRMb2FkUGFydHdheVRocm91Z2ggZnVuY3Rpb24gaXMgYW4gYW5vbnltb3VzIGZ1bmN0aW9uIHRoYXRcbi8vPiBjcmVhdGVzIGEgbmV3IExvYWQgUmVjb3JkIGFuZCBwb3B1bGF0ZXMgaXQgd2l0aCBzb21lIGluZm9ybWF0aW9uIHByb3ZpZGVkXG4vLz4gYnkgdGhlIGNhbGxlciwgc28gdGhhdCBsb2FkaW5nIGNhbiBwcm9jZWVkIGZyb20gZWl0aGVyIHRoZSBgbG9jYXRlYCBob29rLFxuLy8+IHRoZSBgZmV0Y2hgIGhvb2ssIG9yIHRoZSBgdHJhbnNsYXRlYCBob29rLiBUaGlzIGZ1bmN0aW9uYWxpdHkgaXMgdXNlZCB0b1xuLy8+IGltcGxlbWVudCBidWlsdGluIG1ldGhvZHMgbGlrZSBgTG9hZGVyLnByb3RvdHlwZS5sb2FkYCwgd2hpY2ggcGVybWl0cyB0aGVcbi8vPiB1c2VyIHRvIHNwZWNpZnkgYm90aCB0aGUgbm9ybWFsaXplZCBtb2R1bGUgbmFtZSBhbmQgdGhlIGFkZHJlc3MuXG4vLz5cbi8vPiBFYWNoIEFzeW5jU3RhcnRMb2FkUGFydHdheVRocm91Z2ggZnVuY3Rpb24gaGFzIGludGVybmFsIHNsb3RzIFtbTG9hZGVyXV0sXG4vLz4gW1tNb2R1bGVOYW1lXV0sIFtbU3RlcF1dLCBbW01vZHVsZU1ldGFkYXRhXV0sIFtbTW9kdWxlQWRkcmVzc11dLCBhbmRcbi8vPiBbW01vZHVsZVNvdXJjZV1dLlxuLy8+XG4vLz4gV2hlbiBhbiBBc3luY1N0YXJ0TG9hZFBhcnR3YXlUaHJvdWdoIGZ1bmN0aW9uIEYgaXMgY2FsbGVkIHdpdGggYXJndW1lbnRzXG4vLz4gcmVzb2x2ZSBhbmQgcmVqZWN0LCB0aGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gTWFrZUNsb3N1cmVfQXN5bmNTdGFydExvYWRQYXJ0d2F5VGhyb3VnaChcbiAgICBsb2FkZXIsIGxvYWRlckRhdGEsIG5hbWUsIHN0ZXAsIG1ldGFkYXRhLCBhZGRyZXNzLCBzb3VyY2UpXG57XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8+IDEuICBMZXQgbG9hZGVyIGJlIEYuW1tMb2FkZXJdXS5cbiAgICAgICAgLy8+IDEuICBMZXQgbmFtZSBiZSBGLltbTW9kdWxlTmFtZV1dLlxuICAgICAgICAvLz4gMS4gIExldCBzdGVwIGJlIEYuW1tTdGVwXV0uXG4gICAgICAgIC8vPiAxLiAgTGV0IG1ldGFkYXRhIGJlIEYuW1tNb2R1bGVNZXRhZGF0YV1dLlxuICAgICAgICAvLz4gMS4gIExldCBhZGRyZXNzIGJlIEYuW1tNb2R1bGVBZGRyZXNzXV0uXG4gICAgICAgIC8vPiAxLiAgTGV0IHNvdXJjZSBiZSBGLltbTW9kdWxlU291cmNlXV0uXG5cbiAgICAgICAgLy8+IDEuICBJZiBsb2FkZXIuW1tNb2R1bGVzXV0gY29udGFpbnMgYW4gZW50cnkgd2hvc2UgW1trZXldXSBpcyBlcXVhbFxuICAgICAgICAvLz4gICAgIHRvIG5hbWUsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAgICAgaWYgKGNhbGxGdW5jdGlvbihzdGRfTWFwX2hhcywgbG9hZGVyRGF0YS5tb2R1bGVzLCBuYW1lKSkge1xuICAgICAgICAgICAgdGhyb3cgc3RkX1R5cGVFcnJvcihcbiAgICAgICAgICAgICAgICBcImNhbid0IGRlZmluZSBtb2R1bGUgXFxcIlwiICsgbmFtZSArIFwiXFxcIjogYWxyZWFkeSBsb2FkZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLz4gMS4gIElmIGxvYWRlci5bW0xvYWRzXV0gY29udGFpbnMgYSBMb2FkIFJlY29yZCB3aG9zZSBbW05hbWVdXSBmaWVsZFxuICAgICAgICAvLz4gICAgIGlzIGVxdWFsIHRvIG5hbWUsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAgICAgaWYgKGNhbGxGdW5jdGlvbihzdGRfTWFwX2hhcywgbG9hZGVyRGF0YS5sb2FkcywgbmFtZSkpIHtcbiAgICAgICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgXCJjYW4ndCBkZWZpbmUgbW9kdWxlIFxcXCJcIiArIG5hbWUgKyBcIlxcXCI6IGFscmVhZHkgbG9hZGluZ1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vPiAxLiAgTGV0IGxvYWQgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBDcmVhdGVMb2FkIGFic3RyYWN0XG4gICAgICAgIC8vPiAgICAgb3BlcmF0aW9uIHBhc3NpbmcgbmFtZSBhcyB0aGUgc2luZ2xlIGFyZ3VtZW50LlxuICAgICAgICBsZXQgbG9hZCA9IENyZWF0ZUxvYWQobmFtZSk7XG5cbiAgICAgICAgLy8+IDEuICBTZXQgbG9hZC5bW01ldGFkYXRhXV0gdG8gbWV0YWRhdGEuXG4gICAgICAgIGxvYWQubWV0YWRhdGEgPSBtZXRhZGF0YTtcblxuICAgICAgICAvLz4gMS4gIExldCBsaW5rU2V0IGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgQ3JlYXRlTGlua1NldCBhYnN0cmFjdFxuICAgICAgICAvLz4gICAgIG9wZXJhdGlvbiBwYXNzaW5nIGxvYWRlciBhbmQgbG9hZCBhcyBhcmd1bWVudHMuXG4gICAgICAgIGxldCBsaW5rU2V0ID0gQ3JlYXRlTGlua1NldChsb2FkZXIsIGxvYWQpO1xuXG4gICAgICAgIC8vPiAxLiAgQWRkIGxvYWQgdG8gdGhlIExpc3QgbG9hZGVyLltbTG9hZHNdXS5cbiAgICAgICAgY2FsbEZ1bmN0aW9uKHN0ZF9NYXBfc2V0LCBsb2FkZXJEYXRhLmxvYWRzLCBuYW1lLCBsb2FkKTtcblxuICAgICAgICAvLz4gMS4gIENhbGwgdGhlIFtbQ2FsbF1dIGludGVybmFsIG1ldGhvZCBvZiByZXNvbHZlIHdpdGggYXJndW1lbnRzXG4gICAgICAgIC8vPiAgICAgbnVsbCBhbmQgKGxpbmtTZXQuW1tEb25lXV0pLlxuICAgICAgICByZXNvbHZlKGxpbmtTZXQuZG9uZSk7XG5cbiAgICAgICAgLy8+IDEuICBJZiBzdGVwIGlzIGBcImxvY2F0ZVwiYCxcbiAgICAgICAgaWYgKHN0ZXAgPT0gXCJsb2NhdGVcIikge1xuICAgICAgICAgICAgLy8+ICAgICAxLiAgQ2FsbCBQcm9jZWVkVG9Mb2NhdGUobG9hZGVyLCBsb2FkKS5cbiAgICAgICAgICAgIFByb2NlZWRUb0xvY2F0ZShsb2FkZXIsIGxvYWQpO1xuICAgICAgICAvLz4gMS4gIEVsc2UgaWYgc3RlcCBpcyBgXCJmZXRjaFwiYCxcbiAgICAgICAgfSBlbHNlIGlmIChzdGVwID09IFwiZmV0Y2hcIikge1xuICAgICAgICAgICAgLy8+ICAgICAxLiAgTGV0IGFkZHJlc3NQcm9taXNlIGJlIFByb21pc2VPZihhZGRyZXNzKS5cbiAgICAgICAgICAgIC8vPiAgICAgMS4gIENhbGwgUHJvY2VlZFRvRmV0Y2gobG9hZGVyLCBsb2FkLCBhZGRyZXNzUHJvbWlzZSkuXG4gICAgICAgICAgICBQcm9jZWVkVG9GZXRjaChsb2FkZXIsIGxvYWQsIFByb21pc2VPZihhZGRyZXNzKSk7XG4gICAgICAgIC8vPiAxLiAgRWxzZSxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vPiAgICAgMS4gIEFzc2VydDogc3RlcCBpcyBgXCJ0cmFuc2xhdGVcImAuXG4gICAgICAgICAgICAkQXNzZXJ0KHN0ZXAgPT0gXCJ0cmFuc2xhdGVcIik7XG5cbiAgICAgICAgICAgIC8vPiAgICAgMS4gIFNldCBsb2FkLltbQWRkcmVzc11dIHRvIGFkZHJlc3MuXG4gICAgICAgICAgICBsb2FkLmFkZHJlc3MgPSBhZGRyZXNzO1xuXG4gICAgICAgICAgICAvLz4gICAgIDEuICBMZXQgc291cmNlUHJvbWlzZSBiZSBQcm9taXNlT2Yoc291cmNlKS5cbiAgICAgICAgICAgIHZhciBzb3VyY2VQcm9taXNlID0gUHJvbWlzZU9mKHNvdXJjZSk7XG5cbiAgICAgICAgICAgIC8vPiAgICAgMS4gIENhbGwgUHJvY2VlZFRvVHJhbnNsYXRlKGxvYWRlciwgbG9hZCwgc291cmNlUHJvbWlzZSkuXG4gICAgICAgICAgICBQcm9jZWVkVG9UcmFuc2xhdGUobG9hZGVyLCBsb2FkLCBzb3VyY2VQcm9taXNlKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cblxuLy8+ICMjIyBFdmFsdWF0ZUxvYWRlZE1vZHVsZSBGdW5jdGlvbnNcbi8vPlxuLy8+IEFuIEV2YWx1YXRlTG9hZGVkTW9kdWxlIGZ1bmN0aW9uIGlzIGFuIGFub255bW91cyBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgYnlcbi8vPiBMb2FkZXIucHJvdG90eXBlLm1vZHVsZSBhbmQgTG9hZGVyLnByb3RvdHlwZS5pbXBvcnQgdG8gZW5zdXJlIHRoYXQgYSBtb2R1bGVcbi8vPiBoYXMgYmVlbiBldmFsdWF0ZWQgYmVmb3JlIGl0IGlzIHBhc3NlZCB0byBzY3JpcHQgY29kZS5cbi8vPlxuLy8+IEVhY2ggRXZhbHVhdGVMb2FkZWRNb2R1bGUgZnVuY3Rpb24gaGFzIGEgW1tMb2FkZXJdXSBpbnRlcm5hbCBzbG90LlxuLy8+XG4vLz4gV2hlbiBhIEV2YWx1YXRlTG9hZGVkTW9kdWxlIGZ1bmN0aW9uIEYgaXMgY2FsbGVkLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGFyZVxuLy8+IHRha2VuOlxuLy8+XG5mdW5jdGlvbiBNYWtlQ2xvc3VyZV9FdmFsdWF0ZUxvYWRlZE1vZHVsZShsb2FkZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGxvYWQpIHtcbiAgICAgICAgLy8+IDEuICBMZXQgbG9hZGVyIGJlIEYuW1tMb2FkZXJdXS5cblxuICAgICAgICAvLz4gMi4gIEFzc2VydDogbG9hZC5bW1N0YXR1c11dIGlzIGBcImxpbmtlZFwiYC5cbiAgICAgICAgQXNzZXJ0KGxvYWQuc3RhdHVzID09PSBcImxpbmtlZFwiKTtcblxuICAgICAgICAvLz4gMy4gIExldCBtb2R1bGUgYmUgbG9hZC5bW01vZHVsZV1dLlxuICAgICAgICB2YXIgbW9kdWxlID0gbG9hZC5tb2R1bGU7XG5cbiAgICAgICAgLy8+IDQuICBMZXQgcmVzdWx0IGJlIHRoZSByZXN1bHQgb2YgRW5zdXJlRXZhbHVhdGVkKG1vZHVsZSwgKCksXG4gICAgICAgIC8vPiAgICAgbG9hZGVyKS5cbiAgICAgICAgLy8+IDUuICBSZXR1cm5JZkFicnVwdChyZXN1bHQpLlxuICAgICAgICBFbnN1cmVFdmFsdWF0ZWRIZWxwZXIobW9kdWxlLCBsb2FkZXIpO1xuXG4gICAgICAgIC8vPiA2LiAgUmV0dXJuIG1vZHVsZS5cbiAgICAgICAgcmV0dXJuIG1vZHVsZTtcbiAgICB9O1xuICAgIC8vPlxufVxuXG5cblxuLy8+ICMjIE1vZHVsZSBMaW5raW5nXG4vLz5cbi8vXG4vLyBQbGVhc2Ugc2VlIHNwZWNzL2xpbmtpbmcuZG9jeC5cbi8vXG4vLyBIZXJlIHdlIGluY2x1ZGUgYSBzdHViIGltcGxlbWVudGF0aW9uIG9mIHRoZSBMaW5rIGZ1bmN0aW9uIGRlc2NyaWJlZFxuLy8gaW4gdGhlIHNwZWNpZmljYXRpb24gdGhhdCBpcyBnb29kIGVub3VnaCB0byBwYXNzIHNvbWUgdHJpdmlhbCB0ZXN0cy5cbi8vXG5mdW5jdGlvbiBMaW5rKGxvYWRzLCBsb2FkZXIpIHtcbiAgICBsb2FkcyA9IFNldFRvQXJyYXkobG9hZHMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9hZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGxvYWRzW2ldLmtpbmQgIT09IFwiZHluYW1pY1wiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXJyb3IoXCJNb2R1bGUgbGlua2luZyBpcyBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cblxuICAgIExpbmtEeW5hbWljTW9kdWxlcyhsb2FkcywgbG9hZGVyKTtcbn1cblxuZnVuY3Rpb24gTGlua0R5bmFtaWNNb2R1bGVzKGxvYWRzLCBsb2FkZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvYWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBsb2FkID0gbG9hZHNbaV07XG4gICAgICAgIHZhciBtb2QgPSBjYWxsRnVuY3Rpb24obG9hZC5leGVjdXRlLCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAoISRJc01vZHVsZShtb2QpKVxuICAgICAgICAgICAgdGhyb3cgc3RkX1R5cGVFcnJvcihcImZhY3RvcnkuZXhlY3V0ZSBjYWxsYmFjayBtdXN0IHJldHVybiBhIE1vZHVsZSBvYmplY3RcIik7XG4gICAgICAgIGxvYWQubW9kdWxlID0gbW9kO1xuICAgICAgICBsb2FkLnN0YXR1cyA9IFwibGlua2VkXCI7XG4gICAgICAgIEZpbmlzaExvYWQobG9hZGVyLCBsb2FkKTtcbiAgICB9XG59XG5cbi8vPiAjIyBNb2R1bGUgRXZhbHVhdGlvblxuLy8+XG4vLz4gTW9kdWxlIGJvZGllcyBhcmUgZXZhbHVhdGVkIG9uIGRlbWFuZCwgYXMgbGF0ZSBhcyBwb3NzaWJsZS4gIFRoZSBsb2FkZXJcbi8vPiB1c2VzIHRoZSBmdW5jdGlvbiBgRW5zdXJlRXZhbHVhdGVkYCwgZGVmaW5lZCBiZWxvdywgdG8gcnVuIHNjcmlwdHMuICBUaGVcbi8vPiBsb2FkZXIgYWx3YXlzIGNhbGxzIGBFbnN1cmVFdmFsdWF0ZWRgIGJlZm9yZSByZXR1cm5pbmcgYSBNb2R1bGUgb2JqZWN0IHRvXG4vLz4gdXNlciBjb2RlLlxuLy8+XG4vLz4gVGhlcmUgaXMgb25lIHdheSBhIG1vZHVsZSBjYW4gYmUgZXhwb3NlZCB0byBzY3JpcHQgYmVmb3JlIGl0cyBib2R5IGhhcyBiZWVuXG4vLz4gZXZhbHVhdGVkLiAgSW4gdGhlIGNhc2Ugb2YgYW4gaW1wb3J0IGN5Y2xlLCB3aGljaGV2ZXIgbW9kdWxlIGlzIGV2YWx1YXRlZFxuLy8+IGZpcnN0IGNhbiBvYnNlcnZlIHRoZSBvdGhlcnMgYmVmb3JlIHRoZXkgYXJlIGV2YWx1YXRlZC4gIFNpbXBseSBwdXQsIHdlXG4vLz4gaGF2ZSB0byBzdGFydCBzb21ld2hlcmU6IG9uZSBvZiB0aGUgbW9kdWxlcyBpbiB0aGUgY3ljbGUgbXVzdCBydW4gYmVmb3JlXG4vLz4gdGhlIG90aGVycy5cblxuXG4vLz4gIyMjIEVuc3VyZUV2YWx1YXRlZChtb2QsIHNlZW4sIGxvYWRlcikgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgYWJzdHJhY3Qgb3BlcmF0aW9uIEVuc3VyZUV2YWx1YXRlZCB3YWxrcyB0aGUgZGVwZW5kZW5jeSBncmFwaCBvZiB0aGVcbi8vPiBtb2R1bGUgbW9kLCBldmFsdWF0aW5nIGFueSBtb2R1bGUgYm9kaWVzIHRoYXQgaGF2ZSBub3QgYWxyZWFkeSBiZWVuXG4vLz4gZXZhbHVhdGVkIChpbmNsdWRpbmcsIGZpbmFsbHksIG1vZCBpdHNlbGYpLiAgTW9kdWxlcyBhcmUgZXZhbHVhdGVkIGluXG4vLz4gZGVwdGgtZmlyc3QsIGxlZnQtdG8tcmlnaHQsIHBvc3Qgb3JkZXIsIHN0b3BwaW5nIGF0IGN5Y2xlcy5cbi8vPlxuLy8+IG1vZCBhbmQgaXRzIGRlcGVuZGVuY2llcyBtdXN0IGFscmVhZHkgYmUgbGlua2VkLlxuLy8+XG4vLz4gVGhlIExpc3Qgc2VlbiBpcyB1c2VkIHRvIGRldGVjdCBjeWNsZXMuIG1vZCBtdXN0IG5vdCBhbHJlYWR5IGJlIGluIHRoZSBMaXN0XG4vLz4gc2Vlbi5cbi8vPlxuLy8+IE9uIHN1Y2Nlc3MsIG1vZCBhbmQgYWxsIGl0cyBkZXBlbmRlbmNpZXMsIHRyYW5zaXRpdmVseSwgd2lsbCBoYXZlIHN0YXJ0ZWRcbi8vPiB0byBldmFsdWF0ZSBleGFjdGx5IG9uY2UuXG4vLz5cbi8vPiBFbnN1cmVFdmFsdWF0ZWQgcGVyZm9ybXMgdGhlIGZvbGxvd2luZyBzdGVwczpcbi8vPlxuZnVuY3Rpb24gRW5zdXJlRXZhbHVhdGVkKG1vZCwgc2VlbiwgbG9hZGVyRGF0YSkge1xuICAgIC8vPiAxLiBBcHBlbmQgbW9kIGFzIHRoZSBsYXN0IGVsZW1lbnQgb2Ygc2Vlbi5cbiAgICBjYWxsRnVuY3Rpb24oc3RkX1NldF9hZGQsIHNlZW4sIG1vZCk7XG5cbiAgICAvLz4gMi4gTGV0IGRlcHMgYmUgbW9kLltbRGVwZW5kZW5jaWVzXV0uXG4gICAgbGV0IGRlcHMgPSAkR2V0RGVwZW5kZW5jaWVzKG1vZCk7XG4gICAgaWYgKGRlcHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuOyAgLy8gQW4gb3B0aW1pemF0aW9uLiBTZWUgdGhlIGNvbW1lbnQgYmVsb3cuXG5cbiAgICAvLz4gMy4gRm9yIGVhY2ggcGFpciBpbiBkZXBzLCBpbiBMaXN0IG9yZGVyLFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLz4gICAgIDEuICBMZXQgZGVwIGJlIHBhaXIuW1t2YWx1ZV1dLlxuICAgICAgICBsZXQgZGVwID0gZGVwc1tpXTtcblxuICAgICAgICAvLz4gICAgIDIuIElmIGRlcCBpcyBub3QgYW4gZWxlbWVudCBvZiBzZWVuLCB0aGVuXG4gICAgICAgIGlmICghY2FsbEZ1bmN0aW9uKHN0ZF9TZXRfaGFzLCBzZWVuLCBkZXApKSB7XG4gICAgICAgICAgICAvLz4gICAgICAgICAxLiBDYWxsIEVuc3VyZUV2YWx1YXRlZCB3aXRoIHRoZSBhcmd1bWVudHMgZGVwLCBzZWVuLFxuICAgICAgICAgICAgLy8+ICAgICAgICAgICAgYW5kIGxvYWRlci5cbiAgICAgICAgICAgIEVuc3VyZUV2YWx1YXRlZChkZXAsIHNlZW4sIGxvYWRlckRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8+IDQuIElmIG1vZC5bW0JvZHldXSBpcyBub3QgdW5kZWZpbmVkIGFuZCBtb2QuW1tFdmFsdWF0ZWRdXSBpcyBmYWxzZSxcbiAgICBpZiAoISRIYXNCZWVuRXZhbHVhdGVkKG1vZCkpIHtcbiAgICAgICAgLy8+ICAgICAxLiBTZXQgbW9kLltbRXZhbHVhdGVkXV0gdG8gdHJ1ZS5cbiAgICAgICAgLy8+ICAgICAyLiBMZXQgaW5pdENvbnRleHQgYmUgYSBuZXcgRUNNQVNjcmlwdCBjb2RlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICAgICAgICAvLz4gICAgIDMuIFNldCBpbml0Q29udGV4dCdzIFJlYWxtIHRvIGxvYWRlci5bW1JlYWxtXV0uXG4gICAgICAgIC8vPiAgICAgNC4gU2V0IGluaXRDb250ZXh0J3MgVmFyaWFibGVFbnZpcm9ubWVudCB0byBtb2QuW1tFbnZpcm9ubWVudF1dLlxuICAgICAgICAvLz4gICAgIDUuIFNldCBpbml0Q29udGV4dCdzIExleGljYWxFbnZpcm9ubWVudCB0byBtb2QuW1tFbnZpcm9ubWVudF1dLlxuICAgICAgICAvLz4gICAgIDYuIElmIHRoZXJlIGlzIGEgY3VycmVudGx5IHJ1bm5pbmcgZXhlY3V0aW9uIGNvbnRleHQsIHN1c3BlbmQgaXQuXG4gICAgICAgIC8vPiAgICAgNy4gUHVzaCBpbml0Q29udGV4dCBvbiB0byB0aGUgZXhlY3V0aW9uIGNvbnRleHQgc3RhY2s7IGluaXRDb250ZXh0IGlzXG4gICAgICAgIC8vPiAgICAgICAgIG5vdyB0aGUgcnVubmluZyBleGVjdXRpb24gY29udGV4dC5cbiAgICAgICAgLy8+ICAgICA4LiBMZXQgciBiZSB0aGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgbW9kLltbQm9keV1dLlxuICAgICAgICAvLz4gICAgIDkuIFN1c3BlbmQgaW5pdENvbnRleHQgYW5kIHJlbW92ZSBpdCBmcm9tIHRoZSBleGVjdXRpb24gY29udGV4dCBzdGFjay5cbiAgICAgICAgLy8+ICAgICAxMC4gUmVzdW1lIHRoZSBjb250ZXh0LCBpZiBhbnksIHRoYXQgaXMgbm93IG9uIHRoZSB0b3Agb2YgdGhlIGV4ZWN1dGlvblxuICAgICAgICAvLz4gICAgICAgICBjb250ZXh0IHN0YWNrIGFzIHRoZSBydW5uaW5nIGV4ZWN1dGlvbiBjb250ZXh0LlxuICAgICAgICAvLz4gICAgIDExLiBSZXR1cm5JZkFicnVwdChyKS5cbiAgICAgICAgJEV2YWx1YXRlTW9kdWxlQm9keShsb2FkZXJEYXRhLnJlYWxtLCBtb2QpO1xuICAgIH1cbn1cbi8vPlxuLy8gKipTYXZpbmcgd29yayoqICZuZGFzaDsgVGhpcyBpbXBsZW1lbnRhdGlvbiBvcHRpbWl6ZXMgYXdheSBmdXR1cmVcbi8vIEVuc3VyZUV2YWx1YXRlZCBwYXNzZXMgYnkgY2xlYXJpbmcgbW9kLltbRGVwZW5kZW5jaWVzXV0gZm9yIGFsbCBtb2R1bGVzIGluXG4vLyB0aGUgZGVwZW5kZW5jeSB0cmVlIHdoZW4gRW5zdXJlRXZhbHVhdGVkSGVscGVyIGZpbmlzaGVzIHN1Y2Nlc3NmdWxseS5cbi8vXG4vLyBTbyBpbiB0aGUgcGFydCBvZiB0aGUgY29kZSB0aGF0IGltcGxlbWVudHMgc3RlcCAyLCBgZGVwc2AgaXMgdW5kZWZpbmVkIGlmZlxuLy8gZWl0aGVyIChhKSBhIHByZXZpb3VzIEVuc3VyZUV2YWx1YXRlZEhlbHBlciBjYWxsIGFscmVhZHkgZXZhbHVhdGVkIHRoZVxuLy8gbW9kdWxlIGFuZCBhbGwgaXRzIGRlcGVuZGVuY2llczsgb3IgKGIpIG1vZCB3YXMgY3JlYXRlZCB2aWEgdGhlIGBNb2R1bGUoKWBcbi8vIGNvbnN0cnVjdG9yIHJhdGhlciB0aGFuIGZyb20gYSBzY3JpcHQuXG4vL1xuLy8gKipFeGNlcHRpb25zIGR1cmluZyBldmFsdWF0aW9uKiogJm5kYXNoOyBNb2R1bGUgYm9kaWVzIGNhbiB0aHJvdyBleGNlcHRpb25zLFxuLy8gd2hpY2ggYXJlIHByb3BhZ2F0ZWQgdG8gdGhlIGNhbGxlci5cbi8vXG4vLyBXaGVuIHRoaXMgaGFwcGVucywgd2UgbGVhdmUgdGhlIG1vZHVsZSBpbiB0aGUgcmVnaXN0cnkgKHBlciBzYW10aCwgMjAxM1xuLy8gQXByaWwgMTYpIGJlY2F1c2UgcmUtbG9hZGluZyB0aGUgbW9kdWxlIGFuZCBydW5uaW5nIGl0IGFnYWluIGlzIG5vdCBsaWtlbHlcbi8vIHRvIG1ha2UgdGhpbmdzIGJldHRlci5cbi8vXG4vLyBPdGhlciBmdWxseSBsaW5rZWQgbW9kdWxlcyBpbiB0aGUgc2FtZSBMaW5rU2V0IGFyZSBhbHNvIGxlZnQgaW4gdGhlIHJlZ2lzdHJ5XG4vLyAocGVyIGRoZXJtYW4sIDIwMTMgQXByaWwgMTgpLiAgU29tZSBvZiB0aG9zZSBtYXkgYmUgdW5yZWxhdGVkIHRvIHRoZSBtb2R1bGVcbi8vIHRoYXQgdGhyZXcuICBTaW5jZSB0aGVpciBcImhhcyBldmVyIHN0YXJ0ZWQgYmVpbmcgZXZhbHVhdGVkXCIgYml0IGlzIG5vdCB5ZXRcbi8vIHNldCwgdGhleSB3aWxsIGJlIGV2YWx1YXRlZCBvbiBkZW1hbmQuICBUaGlzIGFsbG93cyB1bnJlbGF0ZWQgbW9kdWxlcyB0b1xuLy8gZmluaXNoIGxvYWRpbmcgYW5kIGluaXRpYWxpemluZyBzdWNjZXNzZnVsbHksIGlmIHRoZXkgYXJlIG5lZWRlZC5cbi8vXG4vLyAqKk5lc3RpbmcqKiAmbmRhc2g7IFdoaWxlIGV2YWx1YXRpbmcgYSBtb2R1bGUgYm9keSwgY2FsbGluZyBgZXZhbCgpYCBvclxuLy8gYFN5c3RlbS5nZXQoKWAgY2FuIGNhdXNlIG90aGVyIG1vZHVsZSBib2RpZXMgdG8gYmUgZXZhbHVhdGVkLiAgVGhhdCBpcyxcbi8vIG1vZHVsZSBib2R5IGV2YWx1YXRpb24gY2FuIG5lc3QuICBIb3dldmVyIG5vIGluZGl2aWR1YWwgbW9kdWxlJ3MgYm9keSB3aWxsXG4vLyBiZSBldmFsdWF0ZWQgbW9yZSB0aGFuIG9uY2UuXG4vL1xuLy8gKipXaHkgdGhlIGdyYXBoIHdhbGsgZG9lc24ndCBzdG9wIGF0IGFscmVhZHktZXZhbHVhdGVkIG1vZHVsZXMqKiAmbmRhc2g7XG4vLyBJdCdzIGEgbWF0dGVyIG9mIGNvcnJlY3RuZXNzLiAgSGVyZSBpcyB0aGUgdGVzdCBjYXNlOlxuLy9cbi8vICAgICAvLyBtb2R1bGUgXCJ4XCJcbi8vICAgICBpbXBvcnQgeSBmcm9tIFwieVwiO1xuLy8gICAgIHRocm93IGZpdDtcbi8vXG4vLyAgICAgLy8gbW9kdWxlIFwieVwiXG4vLyAgICAgaW1wb3J0IHggZnJvbSBcInhcIjtcbi8vICAgICBnbG9iYWwub2sgPSB0cnVlO1xuLy9cbi8vICAgICAvLyBhbm9ueW1vdXMgbW9kdWxlICMxXG4vLyAgICAgbW9kdWxlIHkgZnJvbSBcInlcIjsgIC8vIG1hcmtzIFwieFwiIGFzIGV2YWx1YXRlZCwgYnV0IG5vdCBcInlcIlxuLy9cbi8vICAgICAvLyBhbm9ueW1vdXMgbW9kdWxlICMyXG4vLyAgICAgbW9kdWxlIHggZnJvbSBcInhcIjsgIC8vIG11c3QgZXZhbHVhdGUgXCJ5XCIgYnV0IG5vdCBcInhcIlxuLy9cbi8vIFdoZW4gd2UgYEVuc3VyZUV2YWx1YXRlZGAgYW5vbnltb3VzIG1vZHVsZSAjMiwgbW9kdWxlIGB4YCBpcyBhbHJlYWR5IG1hcmtlZFxuLy8gYXMgZXZhbHVhdGVkLCBidXQgb25lIG9mIGl0cyBkZXBlbmRlbmNpZXMsIGB5YCwgaXNuJ3QuICBJbiBvcmRlciB0byBhY2hpZXZlXG4vLyB0aGUgZGVzaXJlZCBwb3N0Y29uZGl0aW9uLCB3ZSBtdXN0IGZpbmQgYHlgIGFueXdheSBhbmQgZXZhbHVhdGUgaXQuXG4vL1xuLy8gQ3ljbGljIGltcG9ydHMsIGNvbWJpbmVkIHdpdGggZXhjZXB0aW9ucyBkdXJpbmcgbW9kdWxlIGV2YWx1YXRpb25cbi8vIGludGVycnVwdGluZyB0aGlzIGFsZ29yaXRobSwgYXJlIHRoZSBjdWxwcml0LlxuLy9cbi8vIFRoZSByZW1lZHk6IHdoZW4gd2Fsa2luZyB0aGUgZGVwZW5kZW5jeSBncmFwaCwgZG8gbm90IHN0b3AgYXRcbi8vIGFscmVhZHktbWFya2VkLWV2YWx1YXRlZCBtb2R1bGVzLlxuLy9cblxuZnVuY3Rpb24gRW5zdXJlRXZhbHVhdGVkSGVscGVyKG1vZCwgbG9hZGVyKSB7XG4gICAgbGV0IHNlZW4gPSBDcmVhdGVTZXQoKTtcbiAgICBsZXQgbG9hZGVyRGF0YSA9IEdldExvYWRlckludGVybmFsRGF0YShsb2FkZXIpO1xuICAgIEVuc3VyZUV2YWx1YXRlZChtb2QsIHNlZW4sIGxvYWRlckRhdGEpO1xuXG4gICAgLy8gQWxsIGV2YWx1YXRpb24gc3VjY2VlZGVkLiBBcyBhbiBvcHRpbWl6YXRpb24gZm9yIGZ1dHVyZSBFbnN1cmVFdmFsdWF0ZWRcbiAgICAvLyBjYWxscywgZHJvcCB0aGlzIHBvcnRpb24gb2YgdGhlIGRlcGVuZGVuY3kgZ3JhcGguXG4gICAgLy9cbiAgICAvLyBUaGlzIGxvb3AgY2Fubm90IGJlIGZ1c2VkIHdpdGggdGhlIGxvb3AgaW4gRW5zdXJlRXZhbHVhdGVkLiBJdCB3b3VsZFxuICAgIC8vIGludHJvZHVjZSBhIGJ1Zy5cbiAgICBzZWVuID0gU2V0VG9BcnJheShzZWVuKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZW4ubGVuZ3RoOyBpKyspXG4gICAgICAgICRTZXREZXBlbmRlbmNpZXMoc2VlbltpXSwgdW5kZWZpbmVkKTtcbn1cblxuXG5cbi8vPiAjIyBNb2R1bGUgT2JqZWN0c1xuLy8+XG4vLz4gQSBNb2R1bGUgb2JqZWN0IGhhcyB0aGUgZm9sbG93aW5nIGludGVybmFsIHNsb3RzOlxuLy8+XG4vLz4gICAqIG1vZHVsZS5bW0Vudmlyb25tZW50XV0gJm5kYXNoOyBhIERlY2xhcmF0aXZlIEVudmlyb25tZW50IFJlY29yZFxuLy8+ICAgICBjb25zaXN0aW5nIG9mIGFsbCBiaW5kaW5ncyBkZWNsYXJlZCBhdCB0b3BsZXZlbCBpbiB0aGUgbW9kdWxlLiBUaGVcbi8vPiAgICAgb3V0ZXJFbnZpcm9ubWVudCBvZiB0aGlzIGVudmlyb25tZW50IHJlY29yZCBpcyBhIEdsb2JhbCBFbnZpcm9ubWVudFxuLy8+ICAgICBSZWNvcmQuXG4vLz5cbi8vPiAgICogbW9kdWxlLltbRXhwb3J0c11dICZuZGFzaDsgYSBMaXN0IG9mIEV4cG9ydCBSZWNvcmRzLCB7W1tFeHBvcnROYW1lXV06IGFcbi8vPiAgICAgU3RyaW5nLCBbW1NvdXJjZU1vZHVsZV1dOiBhIE1vZHVsZSwgW1tCaW5kaW5nTmFtZV1dOiBhIFN0cmluZ30sIHN1Y2hcbi8vPiAgICAgdGhhdCB0aGUgW1tFeHBvcnROYW1lXV1zIG9mIHRoZSByZWNvcmRzIGluIHRoZSBMaXN0IGFyZSBlYWNoIHVuaXF1ZS5cbi8vPlxuLy8+ICAgKiBtb2R1bGUuW1tEZXBlbmRlbmNpZXNdXSAmbmRhc2g7IGEgTGlzdCBvZiBNb2R1bGVzIG9yIHVuZGVmaW5lZC4gIFRoaXNcbi8vPiAgICAgaXMgcG9wdWxhdGVkIGF0IGxpbmsgdGltZSBieSB0aGUgbG9hZGVyIGFuZCB1c2VkIGJ5IEVuc3VyZUV2YWx1YXRlZC5cbi8vPlxuLy8+IFRoZSBbW1Byb3RvdHlwZV1dIG9mIGEgTW9kdWxlIG9iamVjdCBpcyBhbHdheXMgbnVsbC5cbi8vPlxuLy8+IEEgTW9kdWxlIG9iamVjdCBoYXMgYWNjZXNzb3IgcHJvcGVydGllcyB0aGF0IGNvcnJlc3BvbmQgZXhhY3RseSB0byBpdHNcbi8vPiBbW0V4cG9ydHNdXSwgYW5kIG5vIG90aGVyIHByb3BlcnRpZXMuIEl0IGlzIGFsd2F5cyBub24tZXh0ZW5zaWJsZSBieSB0aGVcbi8vPiB0aW1lIGl0IGlzIGV4cG9zZWQgdG8gRUNNQVNjcmlwdCBjb2RlLlxuLy8+XG4vLz4gIyMjIFRoZSBNb2R1bGUgRmFjdG9yeSBGdW5jdGlvblxuLy8+XG4vLz4gVGhlIGBNb2R1bGVgIGZhY3RvcnkgZnVuY3Rpb24gcmVmbGVjdGl2ZWx5IGNyZWF0ZXMgbW9kdWxlIGluc3RhbmNlIG9iamVjdHMuXG4vLz5cblxuLy8+ICMjIyMgQ29uc3RhbnQgRnVuY3Rpb25zXG4vLz5cbi8vPiBBIENvbnN0YW50IGZ1bmN0aW9uIGlzIGEgZnVuY3Rpb24gdGhhdCBhbHdheXMgcmV0dXJucyB0aGUgc2FtZSB2YWx1ZS5cbi8vPlxuLy8+IEVhY2ggQ29uc3RhbnQgZnVuY3Rpb24gaGFzIGEgW1tDb25zdGFudFZhbHVlXV0gaW50ZXJuYWwgc2xvdC5cbi8vPlxuLy8+IFdoZW4gYSBDb25zdGFudCBmdW5jdGlvbiBGIGlzIGNhbGxlZCwgdGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4vLz5cbi8vPiAxLiAgUmV0dXJuIEYuW1tDb25zdGFudFZhbHVlXV0uXG4vLz5cblxuLy8+ICMjIyMgQ3JlYXRlQ29uc3RhbnRHZXR0ZXIoa2V5LCB2YWx1ZSkgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgQ3JlYXRlQ29uc3RhbnRHZXR0ZXIgYWJzdHJhY3Qgb3BlcmF0aW9uIGNyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXdcbi8vPiBGdW5jdGlvbiBvYmplY3QgdGhhdCB0YWtlcyBubyBhcmd1bWVudHMgYW5kIHJldHVybnMgdmFsdWUuICBJdCBwZXJmb3JtcyB0aGVcbi8vPiBmb2xsb3dpbmcgc3RlcHM6XG4vLz5cbmZ1bmN0aW9uIENyZWF0ZUNvbnN0YW50R2V0dGVyKGtleSwgdmFsdWUpIHtcbiAgICAvLz4gMS4gIExldCBnZXR0ZXIgYmUgYSBuZXcgQ29uc3RhbnQgZnVuY3Rpb24uXG4gICAgLy8+IDIuICBTZXQgdGhlIFtbQ29uc3RhbnRWYWx1ZV1dIGludGVybmFsIHNsb3Qgb2YgZ2V0dGVyIHRvIHZhbHVlLlxuICAgIHZhciBnZXR0ZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB2YWx1ZTsgfTtcblxuICAgIC8vPiAzLiAgQ2FsbCBTZXRGdW5jdGlvbk5hbWUoZ2V0dGVyLCBrZXksIGBcImdldFwiYCkuXG4vKlxuICAgIGRlbGV0ZSBnZXR0ZXIubmFtZTtcbiAgICBzdGRfT2JqZWN0X2RlZmluZVByb3BlcnR5KGdldHRlciwgXCJuYW1lXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IFwiZ2V0IFwiICsga2V5LFxuICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICB9KTtcbiovXG5cbiAgICAvLz4gNC4gIFJldHVybiBnZXR0ZXIuXG4gICAgcmV0dXJuIGdldHRlcjtcbn1cblxuLy8+ICMjIyMgTW9kdWxlICggb2JqIClcbi8vPlxuLy8+IFdoZW4gdGhlIGBNb2R1bGVgIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIG9wdGlvbmFsIGFyZ3VtZW50IG9iaiwgdGhlXG4vLz4gZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gTW9kdWxlKG9iaikge1xuICAgIC8vPiAxLiAgSWYgVHlwZShvYmopIGlzIG5vdCBPYmplY3QsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICBpZiAoIUlzT2JqZWN0KG9iaikpXG4gICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJNb2R1bGUgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3RcIik7XG5cbiAgICAvLz4gMS4gIExldCBtb2QgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBDcmVhdGVMaW5rZWRNb2R1bGVJbnN0YW5jZVxuICAgIC8vPiAgICAgYWJzdHJhY3Qgb3BlcmF0aW9uLlxuICAgIHZhciBtb2QgPSAkQ3JlYXRlTW9kdWxlKCk7XG5cbiAgICAvLz4gMS4gIExldCBrZXlzIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgT2JqZWN0S2V5cyBhYnN0cmFjdCBvcGVyYXRpb25cbiAgICAvLz4gICAgIHBhc3Npbmcgb2JqIGFzIHRoZSBhcmd1bWVudC5cbiAgICAvLz4gMS4gIFJldHVybklmQWJydXB0KGtleXMpLlxuICAgIHZhciBrZXlzID0gc3RkX09iamVjdF9rZXlzKG9iaik7XG5cbiAgICAvLz4gMS4gIEZvciBlYWNoIGtleSBpbiBrZXlzLCBkb1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcblxuICAgICAgICAvLz4gICAgIDEuICBMZXQgdmFsdWUgYmUgdGhlIHJlc3VsdCBvZiBHZXQob2JqLCBrZXkpLlxuICAgICAgICAvLz4gICAgIDEuICBSZXR1cm5JZkFicnVwdCh2YWx1ZSkuXG4gICAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuXG4gICAgICAgIC8vPiAgICAgMS4gIExldCBGIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAgICAvLz4gICAgICAgICBDcmVhdGVDb25zdGFudEdldHRlcihrZXksIHZhbHVlKS5cbiAgICAgICAgLy8+ICAgICAxLiAgTGV0IGRlc2MgYmUgdGhlIFByb3BlcnR5RGVzY3JpcHRvciB7W1tDb25maWd1cmFibGVdXTpcbiAgICAgICAgLy8+ICAgICAgICAgZmFsc2UsIFtbRW51bWVyYWJsZV1dOiB0cnVlLCBbW0dldF1dOiBGLCBbW1NldF1dOlxuICAgICAgICAvLz4gICAgICAgICB1bmRlZmluZWR9LlxuICAgICAgICAvLz4gICAgIDEuICBMZXQgc3RhdHVzIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGVcbiAgICAgICAgLy8+ICAgICAgICAgRGVmaW5lUHJvcGVydHlPclRocm93IGFic3RyYWN0IG9wZXJhdGlvbiBwYXNzaW5nIG1vZCwga2V5LFxuICAgICAgICAvLz4gICAgICAgICBhbmQgZGVzYyBhcyBhcmd1bWVudHMuXG4gICAgICAgIC8vPiAgICAgMS4gIFJldHVybklmQWJydXB0KHN0YXR1cykuXG4gICAgICAgIHN0ZF9PYmplY3RfZGVmaW5lUHJvcGVydHkobW9kLCBrZXksIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiBDcmVhdGVDb25zdGFudEdldHRlcihrZXksIHZhbHVlKSxcbiAgICAgICAgICAgIHNldDogdW5kZWZpbmVkXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vPiAxLiAgQ2FsbCB0aGUgW1tQcmV2ZW50RXh0ZW5zaW9uc11dIGludGVybmFsIG1ldGhvZCBvZiBtb2QuXG4gICAgc3RkX09iamVjdF9wcmV2ZW50RXh0ZW5zaW9ucyhtb2QpO1xuXG4gICAgLy8+IDEuICBSZXR1cm4gbW9kLlxuICAgIHJldHVybiBtb2Q7XG59XG4vLz5cblxuLy8+ICMjIyMgTW9kdWxlLnByb3RvdHlwZVxuLy8+XG4vLz4gVGhlIGluaXRpYWwgdmFsdWUgb2YgYE1vZHVsZS5wcm90b3R5cGVgIGlzIG51bGwuXG4vLz5cbi8vICpSYXRpb25hbGU6KiBUaGUgYE1vZHVsZWAgZnVuY3Rpb24gaXMgbm90IGEgY29uc3RydWN0b3IsIGFuZCBhbGwgTW9kdWxlXG4vLyBpbnN0YW5jZSBvYmplY3RzIGhhdmUgbnVsbCBbW1Byb3RvdHlwZV1dLlxuTW9kdWxlLnByb3RvdHlwZSA9IG51bGw7XG5cblxuLy8gIyMgVGhlIFJlYWxtIGNsYXNzXG5cbi8vPiAjIyBSZWFsbSBPYmplY3RzXG5cbi8vIEltcGxlbWVudGF0aW9uIG5vdGU6ICBBcyB3aXRoIExvYWRlciBhbmQgTW9kdWxlIG9iamVjdHMsIHdlIHVzZSBhIFdlYWtNYXAgdG9cbi8vIHN0b3JlIFJlYWxtIG9iamVjdHMnIGludGVybmFsIHN0YXRlLlxubGV0IHJlYWxtSW50ZXJuYWxEYXRhTWFwID0gQ3JlYXRlV2Vha01hcCgpO1xuXG4vLyBHZXQgdGhlIGludGVybmFsIGRhdGEgZm9yIGEgZ2l2ZW4gYFJlYWxtYCBvYmplY3QuXG5mdW5jdGlvbiBHZXRSZWFsbUludGVybmFsRGF0YSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpXG4gICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJSZWFsbSBtZXRob2Qgb3IgYWNjZXNzb3IgY2FsbGVkIG9uIGluY29tcGF0aWJsZSBwcmltaXRpdmVcIik7XG5cbiAgICBsZXQgcmVhbG1EYXRhID0gY2FsbEZ1bmN0aW9uKHN0ZF9XZWFrTWFwX2dldCwgcmVhbG1JbnRlcm5hbERhdGFNYXAsIHZhbHVlKTtcbiAgICBpZiAocmVhbG1EYXRhID09PSB1bmRlZmluZWQpXG4gICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJSZWFsbSBtZXRob2Qgb3IgYWNjZXNzb3IgY2FsbGVkIG9uIGluY29tcGF0aWJsZSBvYmplY3RcIik7XG4gICAgcmV0dXJuIHJlYWxtRGF0YTtcbn1cblxuLy8+ICMjIyBUaGUgUmVhbG0gQ29uc3RydWN0b3Jcbi8vPlxuLy8+ICMjIyMgbmV3IFJlYWxtICggb3B0aW9ucywgaW5pdGlhbGl6ZXIgKVxuLy8+XG5mdW5jdGlvbiBSZWFsbShvcHRpb25zLCBpbml0aWFsaXplcikge1xuICAgIC8vIEltcGxlbWVudGF0aW9uIGJ1ZzogSW4gc3RlcCAxLCB0aGlzIGltcGxlbWVudGF0aW9uIGNhbGxzIFJlYWxtW0BAY3JlYXRlXVxuICAgIC8vIGRpcmVjdGx5LiAgVGhlIHNwZWMgaW5zdGVhZCBtYWtlcyBgbmV3IFJlYWxtKG9wdGlvbnMpYCBlcXVpdmFsZW50IHRvXG4gICAgLy8gYFJlYWxtLltbQ2FsbF1dKFJlYWxtW0BAY3JlYXRlXSgpLCBMaXN0IFtvcHRpb25zXSlgLiAgSW4gb3RoZXIgd29yZHMsXG4gICAgLy8gUmVhbG1bQEBjcmVhdGVdIGlzIGNhbGxlZCAqYmVmb3JlKiBSZWFsbS4gIFdlJ2xsIGNoYW5nZSB0aGF0IHdoZW5cbiAgICAvLyBzeW1ib2xzIGFuZCBAQGNyZWF0ZSBhcmUgaW1wbGVtZW50ZWQuIEZvciBub3cgaXQgaXMganVzdCB2ZXJ5IHZlcnlcbiAgICAvLyBzbGlnaHRseSBvdXQgb2YgbGluZSB3aXRoIHRoZSBzcGVjLiBUaGUgTG9hZGVyIGNvbnN0cnVjdG9yIGhhcyB0aGUgc2FtZVxuICAgIC8vIGRpc2NyZXBhbmN5LlxuICAgIC8vXG4gICAgLy8+IDEuICBMZXQgcmVhbG1PYmplY3QgYmUgdGhlIHRoaXMgdmFsdWUuXG4gICAgdmFyIHJlYWxtT2JqZWN0ID0gY2FsbEZ1bmN0aW9uKFJlYWxtW1wiQEBjcmVhdGVcIl0sIFJlYWxtKTtcblxuICAgIC8vPiAxLiAgSWYgVHlwZShyZWFsbU9iamVjdCkgaXMgbm90IE9iamVjdCwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIGlmICghSXNPYmplY3QocmVhbG1PYmplY3QpKVxuICAgICAgICB0aHJvdyBzdGRfVHlwZUVycm9yKFwiUmVhbG0gb2JqZWN0IGV4cGVjdGVkXCIpO1xuXG4gICAgLy8+IDEuICBJZiByZWFsbU9iamVjdCBkb2VzIG5vdCBoYXZlIGFsbCBvZiB0aGUgaW50ZXJuYWwgcHJvcGVydGllcyBvZiBhXG4gICAgLy8+ICAgICBSZWFsbSBvYmplY3QsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICB2YXIgcmVhbG1EYXRhID1cbiAgICAgICAgY2FsbEZ1bmN0aW9uKHN0ZF9XZWFrTWFwX2dldCwgcmVhbG1JbnRlcm5hbERhdGFNYXAsIHJlYWxtT2JqZWN0KTtcblxuICAgIC8vPiAxLiAgSWYgcmVhbG1PYmplY3QuW1tSZWFsbV1dIGlzIG5vdCB1bmRlZmluZWQsIHRocm93IGEgVHlwZUVycm9yXG4gICAgLy8+ICAgICBleGNlcHRpb24uXG4gICAgaWYgKHJlYWxtRGF0YS5yZWFsbSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aHJvdyBzdGRfVHlwZUVycm9yKFwiUmVhbG0gb2JqZWN0IGNhbm5vdCBiZSBpbnRpdGlhbGl6ZWQgbW9yZSB0aGFuIG9uY2VcIik7XG5cbiAgICAvLz4gMS4gIElmIG9wdGlvbnMgaXMgdW5kZWZpbmVkLCB0aGVuIGxldCBvcHRpb25zIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgIC8vPiAgICAgT2JqZWN0Q3JlYXRlKG51bGwsICgpKS5cbiAgICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICBvcHRpb25zID0gc3RkX09iamVjdF9jcmVhdGUobnVsbCk7XG5cbiAgICAvLz4gMS4gIEVsc2UsIGlmIFR5cGUob3B0aW9ucykgaXMgbm90IE9iamVjdCwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIGlmICghSXNPYmplY3Qob3B0aW9ucykpXG4gICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTtcblxuICAgIC8vPiAxLiAgTGV0IHJlYWxtIGJlIHRoZSByZXN1bHQgb2YgQ3JlYXRlUmVhbG0ocmVhbG1PYmplY3QpLlxuICAgIGxldCByZWFsbSA9ICRDcmVhdGVSZWFsbShyZWFsbU9iamVjdCk7XG5cbiAgICAvLz4gMS4gIExldCBldmFsSG9va3MgYmUgdGhlIHJlc3VsdCBvZiBHZXQob3B0aW9ucywgYFwiZXZhbFwiYCkuXG4gICAgLy8+IDEuICBSZXR1cm5JZkFicnVwdChldmFsSG9va3MpLlxuICAgIC8vPiAxLiAgSWYgZXZhbEhvb2tzIGlzIHVuZGVmaW5lZCB0aGVuIGxldCBldmFsSG9va3MgYmUgdGhlIHJlc3VsdCBvZlxuICAgIC8vPiAgICAgY2FsbGluZyBPYmplY3RDcmVhdGUoJU9iamVjdFByb3RvdHlwZSUsICgpKS5cbiAgICBsZXQgZXZhbEhvb2tzID0gVW5wYWNrT3B0aW9uKG9wdGlvbnMsIFwiZXZhbFwiLCAoKSA9PiAoe30pKTtcblxuICAgIC8vPiAxLiAgRWxzZSwgaWYgVHlwZShldmFsSG9va3MpIGlzIG5vdCBPYmplY3QsIHRocm93IGEgVHlwZUVycm9yXG4gICAgLy8+ICAgICBleGNlcHRpb24uXG4gICAgaWYgKCFJc09iamVjdChldmFsSG9va3MpKVxuICAgICAgICB0aHJvdyBzdGRfVHlwZUVycm9yKFwib3B0aW9ucy5ldmFsIG11c3QgYmUgYW4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTtcblxuICAgIC8vPiAxLiAgTGV0IGRpcmVjdEV2YWwgYmUgdGhlIHJlc3VsdCBvZiBHZXQoZXZhbEhvb2tzLCBgXCJkaXJlY3RcImApLlxuICAgIC8vPiAxLiAgUmV0dXJuSWZBYnJ1cHQoZGlyZWN0RXZhbCkuXG4gICAgLy8+IDEuICBJZiBkaXJlY3RFdmFsIGlzIHVuZGVmaW5lZCB0aGVuIGxldCBkaXJlY3RFdmFsIGJlIHRoZSByZXN1bHQgb2ZcbiAgICAvLz4gICAgIGNhbGxpbmcgT2JqZWN0Q3JlYXRlKCVPYmplY3RQcm90b3R5cGUlLCAoKSkuXG4gICAgbGV0IGRpcmVjdEV2YWwgPSBVbnBhY2tPcHRpb24oZXZhbEhvb2tzLCBcImRpcmVjdFwiLCAoKSA9PiAoe30pKTtcblxuICAgIC8vPiAxLiAgRWxzZSwgaWYgVHlwZShkaXJlY3RFdmFsKSBpcyBub3QgT2JqZWN0LCB0aHJvdyBhIFR5cGVFcnJvclxuICAgIC8vPiAgICAgZXhjZXB0aW9uLlxuICAgIGlmICghSXNPYmplY3QoZGlyZWN0RXZhbCkpXG4gICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJvcHRpb25zLmV2YWwuZGlyZWN0IG11c3QgYmUgYW4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTtcblxuICAgIC8vPiAxLiAgTGV0IHRyYW5zbGF0ZSBiZSB0aGUgcmVzdWx0IG9mIEdldChkaXJlY3RFdmFsLCBgXCJ0cmFuc2xhdGVcImApLlxuICAgIC8vPiAxLiAgUmV0dXJuSWZBYnJ1cHQodHJhbnNsYXRlKS5cbiAgICBsZXQgdHJhbnNsYXRlID0gVW5wYWNrT3B0aW9uKGRpcmVjdEV2YWwsIFwidHJhbnNsYXRlXCIpO1xuXG4gICAgLy8+IDEuICBJZiB0cmFuc2xhdGUgaXMgbm90IHVuZGVmaW5lZCBhbmQgSXNDYWxsYWJsZSh0cmFuc2xhdGUpIGlzIGZhbHNlLFxuICAgIC8vPiAgICAgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIGlmICh0cmFuc2xhdGUgIT09IHVuZGVmaW5lZCAmJiAhSXNDYWxsYWJsZSh0cmFuc2xhdGUpKVxuICAgICAgICB0aHJvdyBzdGRfVHlwZUVycm9yKFwidHJhbnNsYXRlIGhvb2sgaXMgbm90IGNhbGxhYmxlXCIpO1xuXG4gICAgLy8+IDEuICBTZXQgcmVhbG0uW1t0cmFuc2xhdGVEaXJlY3RFdmFsSG9va11dIHRvIHRyYW5zbGF0ZS5cbiAgICByZWFsbS50cmFuc2xhdGVEaXJlY3RFdmFsSG9vayA9IHRyYW5zbGF0ZTtcblxuICAgIC8vPiAxLiAgTGV0IGZhbGxiYWNrIGJlIHRoZSByZXN1bHQgb2YgR2V0KGRpcmVjdEV2YWwsIGBcImZhbGxiYWNrXCJgKS5cbiAgICAvLz4gMS4gIFJldHVybklmQWJydXB0KGZhbGxiYWNrKS5cbiAgICBsZXQgZmFsbGJhY2sgPSBVbnBhY2tPcHRpb24oZGlyZWN0RXZhbCwgXCJmYWxsYmFja1wiKTtcblxuICAgIC8vPiAxLiAgSWYgZmFsbGJhY2sgaXMgbm90IHVuZGVmaW5lZCBhbmQgSXNDYWxsYWJsZShmYWxsYmFjaykgaXMgZmFsc2UsXG4gICAgLy8+ICAgICB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgaWYgKGZhbGxiYWNrICE9PSB1bmRlZmluZWQgJiYgIUlzQ2FsbGFibGUoZmFsbGJhY2spKVxuICAgICAgICB0aHJvdyBzdGRfVHlwZUVycm9yKFwiZmFsbGJhY2sgaG9vayBpcyBub3QgY2FsbGFibGVcIik7XG5cbiAgICAvLz4gMS4gIFNldCByZWFsbS5bW2ZhbGxiYWNrRGlyZWN0RXZhbEhvb2tdXSB0byBmYWxsYmFjay5cbiAgICByZWFsbS5mYWxsYmFja0RpcmVjdEV2YWxIb29rID0gZmFsbGJhY2s7XG5cbiAgICAvLz4gMS4gIExldCBpbmRpcmVjdEV2YWwgYmUgdGhlIHJlc3VsdCBvZiBHZXQob3B0aW9ucywgYFwiaW5kaXJlY3RcImApLlxuICAgIC8vPiAxLiAgUmV0dXJuSWZBYnJ1cHQoaW5kaXJlY3RFdmFsKS5cbiAgICBsZXQgaW5kaXJlY3RFdmFsID0gVW5wYWNrT3B0aW9uKGV2YWxIb29rcywgXCJpbmRpcmVjdFwiKTtcblxuICAgIC8vPiAxLiAgSWYgaW5kaXJlY3RFdmFsIGlzIG5vdCB1bmRlZmluZWQgYW5kIElzQ2FsbGFibGUoaW5kaXJlY3RFdmFsKSBpc1xuICAgIC8vPiAgICAgZmFsc2UsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICBpZiAoaW5kaXJlY3RFdmFsICE9PSB1bmRlZmluZWQgJiYgIUlzQ2FsbGFibGUoaW5kaXJlY3RFdmFsKSlcbiAgICAgICAgdGhyb3cgc3RkX1R5cGVFcnJvcihcImluZGlyZWN0IGV2YWwgaG9vayBpcyBub3QgY2FsbGFibGVcIik7XG5cbiAgICAvLz4gMS4gIFNldCByZWFsbS5bW2luZGlyZWN0RXZhbEhvb2tdXSB0byBpbmRpcmVjdEV2YWwuXG4gICAgcmVhbG0uaW5kaXJlY3RFdmFsSG9vayA9IGluZGlyZWN0RXZhbDtcblxuICAgIC8vPiAxLiAgTGV0IEZ1bmN0aW9uIGJlIHRoZSByZXN1bHQgb2YgR2V0KG9wdGlvbnMsIGBcIkZ1bmN0aW9uXCJgKS5cbiAgICAvLz4gMS4gIFJldHVybklmQWJydXB0KEZ1bmN0aW9uKS5cbiAgICBsZXQgRnVuY3Rpb24gPSBVbnBhY2tPcHRpb24ob3B0aW9ucywgXCJGdW5jdGlvblwiKTtcblxuICAgIC8vPiAxLiAgSWYgRnVuY3Rpb24gaXMgbm90IHVuZGVmaW5lZCBhbmQgSXNDYWxsYWJsZShGdW5jdGlvbikgaXMgZmFsc2UsXG4gICAgLy8+ICAgICB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgaWYgKEZ1bmN0aW9uICE9PSB1bmRlZmluZWQgJiYgIUlzQ2FsbGFibGUoRnVuY3Rpb24pKVxuICAgICAgICB0aHJvdyBzdGRfVHlwZUVycm9yKFwiRnVuY3Rpb24gaG9vayBpcyBub3QgY2FsbGFibGVcIik7XG5cbiAgICAvLz4gMS4gIFNldCByZWFsbS5bW0Z1bmN0aW9uSG9va11dIHRvIEZ1bmN0aW9uLlxuICAgIHJlYWxtLkZ1bmN0aW9uSG9vayA9IEZ1bmN0aW9uO1xuXG4gICAgLy8+IDEuICBTZXQgcmVhbG1PYmplY3QuW1tSZWFsbV1dIHRvIHJlYWxtLlxuICAgIHJlYWxtRGF0YS5yZWFsbSA9IHJlYWxtO1xuXG4gICAgLy8+IDEuICBJZiBpbml0aWFsaXplciBpcyBub3QgdW5kZWZpbmVkLCB0aGVuXG4gICAgaWYgKGluaXRpYWxpemVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8+ICAgICAxLiAgSWYgSXNDYWxsYWJsZShpbml0aWFsaXplcikgaXMgZmFsc2UsIHRocm93IGEgVHlwZUVycm9yXG4gICAgICAgIC8vPiAgICAgICAgIGV4Y2VwdGlvbi5cbiAgICAgICAgaWYgKCFJc0NhbGxhYmxlKGluaXRpYWxpemVyKSlcbiAgICAgICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJpbml0aWFsaXplciBpcyBub3QgY2FsbGFibGVcIik7XG5cbiAgICAgICAgLy8+ICAgICAxLiAgTGV0IGJ1aWx0aW5zIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAgICAvLz4gICAgICAgICBPYmplY3RDcmVhdGUoJU9iamVjdFByb3RvdHlwZSUsICgpKS5cbiAgICAgICAgLy8+ICAgICAxLiAgQ2FsbCB0aGUgRGVmaW5lQnVpbHRpblByb3BlcnRpZXMgYWJzdHJhY3Qgb3BlcmF0aW9uIHBhc3NpbmdcbiAgICAgICAgLy8+ICAgICAgICAgcmVhbG0gYW5kIGJ1aWx0aW5zIGFzIGFyZ3VtZW50cy5cbiAgICAgICAgLy8+ICAgICAxLiAgTGV0IHN0YXR1cyBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIFtbQ2FsbF1dIGludGVybmFsXG4gICAgICAgIC8vPiAgICAgICAgIG1ldGhvZCBvZiB0aGUgaW5pdGlhbGl6ZXIgZnVuY3Rpb24sIHBhc3NpbmcgcmVhbG1PYmplY3QgYXNcbiAgICAgICAgLy8+ICAgICAgICAgdGhlIHRoaXMgdmFsdWUgYW5kIGJ1aWx0aW5zIGFzIHRoZSBzaW5nbGUgYXJndW1lbnQuXG4gICAgICAgIC8vPiAgICAgMS4gIFJldHVybklmQWJydXB0KHN0YXR1cykuXG4gICAgICAgIGNhbGxGdW5jdGlvbihpbml0aWFsaXplciwgcmVhbG1PYmplY3QsIHJlYWxtLmJ1aWx0aW5zKTtcbiAgICB9XG5cbiAgICAvLz4gMS4gIFJldHVybiByZWFsbU9iamVjdC5cbiAgICByZXR1cm4gcmVhbG1PYmplY3Q7XG59XG5cbi8vPiAjIyMgUHJvcGVydGllcyBvZiB0aGUgUmVhbG0gUHJvdG90eXBlIE9iamVjdFxuLy8+XG5cbmRlZihSZWFsbS5wcm90b3R5cGUsIHtcblxuICAgIC8vPiAjIyMjIFJlYWxtLnByb3RvdHlwZS5nbG9iYWxcbiAgICAvLz5cbiAgICAvLz4gYFJlYWxtLnByb3RvdHlwZS5nbG9iYWxgIGlzIGFuIGFjY2Vzc29yIHByb3BlcnR5IHdob3NlIHNldCBhY2Nlc3NvclxuICAgIC8vPiBmdW5jdGlvbiBpcyB1bmRlZmluZWQuIEl0cyBnZXQgYWNjZXNzb3IgZnVuY3Rpb24gcGVyZm9ybXMgdGhlIGZvbGxvd2luZ1xuICAgIC8vPiBzdGVwczpcbiAgICAvLz5cbiAgICBnZXQgZ2xvYmFsKCkge1xuICAgICAgICAvLz4gMS4gIExldCByZWFsbU9iamVjdCBiZSB0aGlzIFJlYWxtIG9iamVjdC5cbiAgICAgICAgLy8+IDEuICBJZiBUeXBlKHJlYWxtT2JqZWN0KSBpcyBub3QgT2JqZWN0IG9yIHJlYWxtT2JqZWN0IGRvZXMgbm90IGhhdmVcbiAgICAgICAgLy8+ICAgICBhbGwgdGhlIGludGVybmFsIHByb3BlcnRpZXMgb2YgYSBSZWFsbSBvYmplY3QsIHRocm93IGFcbiAgICAgICAgLy8+ICAgICBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICBsZXQgcmVhbG1EYXRhID0gR2V0UmVhbG1JbnRlcm5hbERhdGEodGhpcyk7XG5cbiAgICAgICAgLy8+IDEuIFJldHVybiByZWFsbU9iamVjdC5bW1JlYWxtXV0uW1tnbG9iYWxUaGlzXV0uXG4gICAgICAgIHJldHVybiByZWFsbURhdGEucmVhbG0uZ2xvYmFsVGhpcztcbiAgICB9LFxuICAgIC8vPlxuXG4gICAgLy8+ICMjIyMgUmVhbG0ucHJvdG90eXBlLmV2YWwgKCBzb3VyY2UgKVxuICAgIC8vPlxuICAgIC8vPiBUaGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAvLz5cbiAgICBldmFsOiBmdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgICAgLy8+IDEuICBMZXQgcmVhbG1PYmplY3QgYmUgdGhpcyBSZWFsbSBvYmplY3QuXG4gICAgICAgIC8vPiAxLiAgSWYgVHlwZShyZWFsbU9iamVjdCkgaXMgbm90IE9iamVjdCBvciByZWFsbU9iamVjdCBkb2VzIG5vdCBoYXZlXG4gICAgICAgIC8vPiAgICAgYWxsIHRoZSBpbnRlcm5hbCBwcm9wZXJ0aWVzIG9mIGEgUmVhbG0gb2JqZWN0LCB0aHJvdyBhXG4gICAgICAgIC8vPiAgICAgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAgICAgbGV0IHJlYWxtRGF0YSA9IEdldFJlYWxtSW50ZXJuYWxEYXRhKHRoaXMpO1xuXG4gICAgICAgIC8vPiAxLiAgUmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgSW5kaXJlY3RFdmFsIGFic3RyYWN0IG9wZXJhdGlvblxuICAgICAgICAvLz4gICAgIHBhc3NpbmcgcmVhbG1PYmplY3QuW1tSZWFsbV1dIGFuZCBzb3VyY2UgYXMgYXJndW1lbnRzLlxuICAgICAgICByZXR1cm4gJEluZGlyZWN0RXZhbChyZWFsbURhdGEucmVhbG0sIHNvdXJjZSk7XG4gICAgfVxuXG59KTtcblxuLy8+ICMjIyMgUmVhbG0gWyBAQGNyZWF0ZSBdICggKVxuLy8+XG4vLz4gVGhlIEBAY3JlYXRlIG1ldGhvZCBvZiB0aGUgYnVpbHRpbiBSZWFsbSBjb25zdHJ1Y3RvciBwZXJmb3JtcyB0aGVcbi8vPiBmb2xsb3dpbmcgc3RlcHM6XG4vLz5cbnZhciBSZWFsbV9jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgLy8+IDEuICBMZXQgRiBiZSB0aGUgdGhpcyB2YWx1ZS5cbiAgICAvLz4gMi4gIExldCByZWFsbU9iamVjdCBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAvLz4gICAgIE9yZGluYXJ5Q3JlYXRlRnJvbUNvbnN0cnVjdG9yKEYsIFwiJVJlYWxtUHJvdG90eXBlJVwiLCAoW1tSZWFsbV1dKSkuXG4gICAgdmFyIHJlYWxtT2JqZWN0ID0gc3RkX09iamVjdF9jcmVhdGUodGhpcy5wcm90b3R5cGUpO1xuXG4gICAgLy8gVGhlIGZpZWxkcyBhcmUgaW5pdGlhbGx5IHVuZGVmaW5lZCBidXQgYXJlIHBvcHVsYXRlZCB3aGVuIHRoZVxuICAgIC8vIGNvbnN0cnVjdG9yIHJ1bnMuXG4gICAgdmFyIHJlYWxtRGF0YSA9IHtcbiAgICAgICAgLy8gKipgcmVhbG1EYXRhLnJlYWxtYCoqIGlzIGFuIEVDTUFTY3JpcHQgUmVhbG0uIEl0IGRldGVybWluZXMgdGhlXG4gICAgICAgIC8vIGdsb2JhbCBzY29wZSBhbmQgaW50cmluc2ljcyBvZiBhbGwgY29kZSB0aGlzIFJlYWxtIG9iamVjdCBydW5zLlxuICAgICAgICByZWFsbTogdW5kZWZpbmVkXG4gICAgfTtcblxuICAgIGNhbGxGdW5jdGlvbihzdGRfV2Vha01hcF9zZXQsIHJlYWxtSW50ZXJuYWxEYXRhTWFwLCByZWFsbU9iamVjdCwgcmVhbG1EYXRhKTtcblxuICAgIC8vPiAzLiAgUmV0dXJuIHJlYWxtLlxuICAgIHJldHVybiByZWFsbU9iamVjdDtcbn07XG5cbmRlZihSZWFsbSwge1wiQEBjcmVhdGVcIjogUmVhbG1fY3JlYXRlfSk7XG5cblxuLy8gIyMgVGhlIExvYWRlciBjbGFzc1xuLy9cbi8vIFRoZSBwdWJsaWMgQVBJIG9mIHRoZSBtb2R1bGUgbG9hZGVyIHN5c3RlbSBpcyB0aGUgYExvYWRlcmAgY2xhc3MuICBBIExvYWRlclxuLy8gaXMgcmVzcG9uc2libGUgZm9yIGFzeW5jaHJvbm91c2x5IGZpbmRpbmcsIGZldGNoaW5nLCBsaW5raW5nLCBhbmQgcnVubmluZ1xuLy8gbW9kdWxlcyBhbmQgc2NyaXB0cy5cblxuXG4vLz4gIyMgTG9hZGVyIE9iamVjdHNcbi8vPlxuLy8+IEVhY2ggTG9hZGVyIG9iamVjdCBoYXMgdGhlIGZvbGxvd2luZyBpbnRlcm5hbCBzbG90czpcbi8vPlxuLy8+ICAgKiBsb2FkZXIuW1tSZWFsbV1dICZuZGFzaDsgVGhlIFJlYWxtIGFzc29jaWF0ZWQgd2l0aCB0aGUgbG9hZGVyLiBBbGxcbi8vPiAgICAgc2NyaXB0cyBhbmQgbW9kdWxlcyBldmFsdWF0ZWQgYnkgdGhlIGxvYWRlciBydW4gaW4gdGhlIHNjb3BlIG9mIHRoZVxuLy8+ICAgICBnbG9iYWwgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIFJlYWxtLlxuLy8+XG4vLz4gICAgIFRoaXMgcHJvcGVydHkgaXMgZml4ZWQgd2hlbiB0aGUgTG9hZGVyIGlzIGNyZWF0ZWQgYW5kIGNhbid0IGJlIGNoYW5nZWQuXG4vLz5cbi8vPiAgICogbG9hZGVyLltbTW9kdWxlc11dICZuZGFzaDsgQSBMaXN0IG9mIE1vZHVsZSBSZWNvcmRzOiB0aGUgbW9kdWxlXG4vLz4gICAgIHJlZ2lzdHJ5LlxuLy8+XG4vLz4gICAgIFRoaXMgTGlzdCBvbmx5IGV2ZXIgY29udGFpbnMgTW9kdWxlIG9iamVjdHMgdGhhdCBhcmUgZnVsbHkgbGlua2VkLlxuLy8+ICAgICBIb3dldmVyIGl0IGNhbiBjb250YWluIG1vZHVsZXMgd2hvc2UgY29kZSBoYXMgbm90IHlldCBiZWVuIGV2YWx1YXRlZC5cbi8vPiAgICAgRXhjZXB0IGluIHRoZSBjYXNlIG9mIGN5Y2xpYyBpbXBvcnRzLCBzdWNoIG1vZHVsZXMgYXJlIG5vdCBleHBvc2VkIHRvXG4vLz4gICAgIHVzZXIgY29kZS4gIFNlZSBgRW5zdXJlRXZhbHVhdGVkKClgLlxuLy8+XG4vLz4gICAqIGxvYWRlci5bW0xvYWRzXV0gJm5kYXNoOyBBIExpc3Qgb2YgTG9hZCBSZWNvcmRzLiBUaGVzZSByZXByZXNlbnRcbi8vPiAgICAgb25nb2luZyBhc3luY2hyb25vdXMgbW9kdWxlIGxvYWRzLlxuLy8+XG4vLz4gICAgIFRoaXMgTGlzdCBpcyBzdG9yZWQgaW4gdGhlIGxvYWRlciBzbyB0aGF0IG11bHRpcGxlIGNhbGxzIHRvXG4vLz4gICAgIGBsb2FkZXIuZGVmaW5lKCkvLmxvYWQoKS8ubW9kdWxlKCkvLmltcG9ydCgpYCBjYW4gY29vcGVyYXRlIHRvIGZldGNoXG4vLz4gICAgIHdoYXQgdGhleSBuZWVkIG9ubHkgb25jZS5cblxuLy8gSW1wbGVtZW50YXRpb24gbm90ZTogU2luY2UgRVM2IGRvZXMgbm90IGhhdmUgc3VwcG9ydCBmb3IgcHJpdmF0ZSBzdGF0ZSBvclxuLy8gcHJpdmF0ZSBtZXRob2RzLCB0aGUgaW50ZXJuYWwgc2xvdHMgb2YgTG9hZGVyIG9iamVjdHMgYXJlIHN0b3JlZCBvbiBhXG4vLyBzZXBhcmF0ZSBvYmplY3Qgd2hpY2ggdXNlciBjb2RlIGNhbm5vdCBhY2Nlc3MuXG4vL1xuLy8gU28gd2hhdCB0aGUgc3BlY2lmaWNhdGlvbiByZWZlcnMgdG8gYXMgYGxvYWRlci5bW01vZHVsZXNdXWAgaXMgaW1wbGVtZW50ZWRcbi8vIGFzIGBHZXRMb2FkZXJJbnRlcm5hbERhdGEobG9hZGVyKS5tb2R1bGVzYC5cbi8vXG4vLyBUaGUgc2ltcGxlc3Qgd2F5IHRvIGNvbm5lY3QgdGhlIHR3byBvYmplY3RzIHdpdGhvdXQgZXhwb3NpbmcgdGhpcyBpbnRlcm5hbFxuLy8gZGF0YSB0byB1c2VyIGNvZGUgaXMgdG8gdXNlIGEgYFdlYWtNYXBgLlxuLy9cbnZhciBsb2FkZXJJbnRlcm5hbERhdGFNYXAgPSBDcmVhdGVXZWFrTWFwKCk7XG5cbi8vIEdldCB0aGUgaW50ZXJuYWwgZGF0YSBmb3IgYSBnaXZlbiBgTG9hZGVyYCBvYmplY3QuXG5mdW5jdGlvbiBHZXRMb2FkZXJJbnRlcm5hbERhdGEodmFsdWUpIHtcbiAgICAvLyBMb2FkZXIgbWV0aG9kcyBjb3VsZCBiZSBwbGFjZWQgb24gd3JhcHBlciBwcm90b3R5cGVzIGxpa2VcbiAgICAvLyBTdHJpbmcucHJvdG90eXBlLlxuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpXG4gICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJMb2FkZXIgbWV0aG9kIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgcHJpbWl0aXZlXCIpO1xuXG4gICAgbGV0IGxvYWRlckRhdGEgPSBjYWxsRnVuY3Rpb24oc3RkX1dlYWtNYXBfZ2V0LCBsb2FkZXJJbnRlcm5hbERhdGFNYXAsIHZhbHVlKTtcbiAgICBpZiAobG9hZGVyRGF0YSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICB0aHJvdyBzdGRfVHlwZUVycm9yKFwiTG9hZGVyIG1ldGhvZCBjYWxsZWQgb24gaW5jb21wYXRpYmxlIG9iamVjdFwiKTtcbiAgICByZXR1cm4gbG9hZGVyRGF0YTtcbn1cblxuLy8gVGhlIGxpc3RzIHJlZmVycmVkIHRvIGluIHRoZSBzcGVjIGFyZSBub3QgYWN0dWFsbHkgc3RvcmVkIHRoYXQgd2F5IGluIHRoaXNcbi8vIGltcGxlbWVudGF0aW9uLlxuLy9cbi8vIGBsb2FkZXJEYXRhLm1vZHVsZXNgIGlzIGEgTWFwIGZyb20gc3RyaW5ncyAobW9kdWxlIG5hbWVzKSB0byBNb2R1bGUgb2JqZWN0cy5cbi8vXG4vLyBgbG9hZGVyRGF0YS5sb2Fkc2AgaXMgYSBNYXAgZnJvbSBzdHJpbmdzIChtb2R1bGUgbmFtZXMpIHRvIExvYWRzLlxuLy9cbi8vIE1hcHMgc3VwcG9ydCBmYXN0ZXIgbG9va3VwIHRoYW4gdGhlIGxpbmVhciBMaXN0IHNjYW5zIGRlc2NyaWJlZCBieSB0aGVcbi8vIHNwZWNpZmljYXRpb24uXG4vL1xuLy8gYGxvYWRlckRhdGEubGlua1NldENvdW50ZXJgIGlzIG5vdCBtZW50aW9uZWQgaW4gdGhlIHNwZWNpZmljYXRpb24gYXQgYWxsLlxuLy8gVGhpcyBjb3VudGVyIGlzIHVzZWQgdG8gZ2l2ZSBlYWNoIExpbmtTZXQgcmVjb3JkIGFuIGlkIChsaW5rU2V0LnRpbWVzdGFtcClcbi8vIHRoYXQgaW1wb3NlcyBhIHRvdGFsIG9yZGVyaW5nIG9uIExpbmtTZXRzLiAgVGhpcyBpcyB1c2VkIHdoZW4gbXVsdGlwbGVcbi8vIExpbmtTZXRzIGFyZSBjb21wbGV0ZWQgb3IgcmVqZWN0ZWQgYXQgb25jZSAoTG9hZEZhaWxlZCwgTG9hZFN1Y2NlZWRlZCkuXG4vLyBUaGlzIGNvdW50ZXIgaXMgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlsOyB0aGUgc3BlYyBqdXN0IHNheXMgXCJpbiB0aGUgb3JkZXJcbi8vIGluIHdoaWNoIHRoZSBMaW5rU2V0IFJlY29yZHMgd2VyZSBjcmVhdGVkXCIuXG5cblxuLy8+ICMjIyBHZXRPcHRpb24ob3B0aW9ucywgbmFtZSkgQWJzdHJhY3QgT3BlcmF0aW9uXG4vLz5cbi8vPiBUaGUgR2V0T3B0aW9uIGFic3RyYWN0IG9wZXJhdGlvbiBpcyB1c2VkIHRvIGV4dHJhY3QgYSBwcm9wZXJ0eSBmcm9tIGFuXG4vLz4gb3B0aW9uYWwgb3B0aW9ucyBhcmd1bWVudC5cbi8vPlxuLy8+IFRoZSBmb2xsb3dpbmcgc3RlcHMgYXJlIHRha2VuOlxuLy8+XG5mdW5jdGlvbiBHZXRPcHRpb24ob3B0aW9ucywgbmFtZSkge1xuICAgIC8vPiAxLiAgSWYgb3B0aW9ucyBpcyB1bmRlZmluZWQsIHRoZW4gcmV0dXJuIHVuZGVmaW5lZC5cbiAgICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgLy8+IDIuICBJZiBUeXBlKG9wdGlvbnMpIGlzIG5vdCBPYmplY3QsIHRoZW4gdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIGlmICghSXNPYmplY3Qob3B0aW9ucykpXG4gICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJvcHRpb25zIG11c3QgYmUgZWl0aGVyIGFuIG9iamVjdCBvciB1bmRlZmluZWRcIik7XG5cbiAgICAvLz4gMy4gIFJldHVybiB0aGUgcmVzdWx0IG9mIEdldChvcHRpb25zLCBuYW1lKS5cbiAgICByZXR1cm4gb3B0aW9uc1tuYW1lXTtcbn1cblxuXG4vLz4gIyMjIFRoZSBMb2FkZXIgQ29uc3RydWN0b3Jcbi8vPlxuXG4vLz4gIyMjIyBMb2FkZXIgKCBvcHRpb25zIClcbi8vPlxuLy8+IFdoZW4gdGhlIGBMb2FkZXJgIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIG9wdGlvbmFsIGFyZ3VtZW50IG9wdGlvbnMgdGhlXG4vLz4gZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbi8vPlxuZnVuY3Rpb24gTG9hZGVyKG9wdGlvbnM9e30pIHtcbiAgICAvLyBJbXBsZW1lbnRhdGlvbiBub3RlOiBTZWUgdGhlIGNvbW1lbnQgYWJvdXQgQEBjcmVhdGUgbWV0aG9kcyBvbiBzdGVwIDEgb2ZcbiAgICAvLyB0aGUgUmVhbG0gY29uc3RydWN0b3IsIGFib3ZlLlxuICAgIC8vXG4gICAgLy8+IDEuICBMZXQgbG9hZGVyIGJlIHRoZSB0aGlzIHZhbHVlLlxuICAgIHZhciBsb2FkZXIgPSBjYWxsRnVuY3Rpb24oTG9hZGVyW1wiQEBjcmVhdGVcIl0sIExvYWRlcik7XG5cbiAgICAvLz4gMi4gIElmIFR5cGUobG9hZGVyKSBpcyBub3QgT2JqZWN0LCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgaWYgKCFJc09iamVjdChsb2FkZXIpKVxuICAgICAgICB0aHJvdyBzdGRfVHlwZUVycm9yKFwiTG9hZGVyIG9iamVjdCBleHBlY3RlZFwiKTtcblxuICAgIC8vPiAzLiAgSWYgbG9hZGVyIGRvZXMgbm90IGhhdmUgYWxsIG9mIHRoZSBpbnRlcm5hbCBwcm9wZXJ0aWVzIG9mIGEgTG9hZGVyXG4gICAgLy8+ICAgICBJbnN0YW5jZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIHZhciBsb2FkZXJEYXRhID0gY2FsbEZ1bmN0aW9uKHN0ZF9XZWFrTWFwX2dldCwgbG9hZGVySW50ZXJuYWxEYXRhTWFwLCBsb2FkZXIpO1xuICAgIGlmIChsb2FkZXJEYXRhID09PSB1bmRlZmluZWQpXG4gICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJMb2FkZXIgb2JqZWN0IGV4cGVjdGVkXCIpO1xuXG4gICAgLy8+IDQuICBJZiBsb2FkZXIuW1tNb2R1bGVzXV0gaXMgbm90IHVuZGVmaW5lZCwgdGhyb3cgYSBUeXBlRXJyb3JcbiAgICAvLz4gICAgIGV4Y2VwdGlvbi5cbiAgICBpZiAobG9hZGVyRGF0YS5tb2R1bGVzICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJMb2FkZXIgb2JqZWN0IGNhbm5vdCBiZSBpbnRpdGlhbGl6ZWQgbW9yZSB0aGFuIG9uY2VcIik7XG5cbiAgICAvLz4gNS4gIElmIFR5cGUob3B0aW9ucykgaXMgbm90IE9iamVjdCwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIGlmICghSXNPYmplY3Qob3B0aW9ucykpXG4gICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTtcblxuICAgIC8vPiA2LiAgTGV0IHJlYWxtT2JqZWN0IGJlIHRoZSByZXN1bHQgb2YgR2V0KG9wdGlvbnMsIGBcInJlYWxtXCJgKS5cbiAgICAvLz4gNy4gIFJldHVybklmQWJydXB0KHJlYWxtT2JqZWN0KS5cbiAgICB2YXIgcmVhbG1PYmplY3QgPSBvcHRpb25zLnJlYWxtO1xuXG4gICAgLy8+IDguICBJZiByZWFsbU9iamVjdCBpcyB1bmRlZmluZWQsIGxldCByZWFsbSBiZSB0aGUgUmVhbG0gb2YgdGhlIHJ1bm5pbmdcbiAgICAvLz4gICAgIGV4ZWN1dGlvbiBjb250ZXh0LlxuICAgIC8vPiA5LiAgRWxzZSBpZiBUeXBlKHJlYWxtT2JqZWN0KSBpcyBub3QgT2JqZWN0IG9yIHJlYWxtT2JqZWN0IGRvZXMgbm90XG4gICAgLy8+ICAgICBoYXZlIGFsbCB0aGUgaW50ZXJuYWwgcHJvcGVydGllcyBvZiBhIFJlYWxtIG9iamVjdCwgdGhyb3cgYVxuICAgIC8vPiAgICAgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAvLz4gMTAuIEVsc2UgbGV0IHJlYWxtIGJlIHJlYWxtT2JqZWN0LltbUmVhbG1dXS5cbiAgICB2YXIgcmVhbG07XG4gICAgaWYgKHJlYWxtT2JqZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVhbG0gPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChJc09iamVjdChyZWFsbU9iamVjdCkgJiZcbiAgICAgICAgICAgICAgIGNhbGxGdW5jdGlvbihzdGRfV2Vha01hcF9oYXMsIHJlYWxtSW50ZXJuYWxEYXRhTWFwLCByZWFsbU9iamVjdCkpXG4gICAge1xuICAgICAgICByZWFsbSA9IEdldFJlYWxtSW50ZXJuYWxEYXRhKHJlYWxtT2JqZWN0KS5yZWFsbTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBzdGRfVHlwZUVycm9yKFwib3B0aW9ucy5yZWFsbSBpcyBub3QgYSBSZWFsbSBvYmplY3RcIik7XG4gICAgfVxuXG4gICAgLy8+IDExLiBGb3IgZWFjaCBuYW1lIGluIHRoZSBMaXN0IChgXCJub3JtYWxpemVcImAsIGBcImxvY2F0ZVwiYCwgYFwiZmV0Y2hcImAsXG4gICAgLy8+ICAgICBgXCJ0cmFuc2xhdGVcImAsIGBcImluc3RhbnRpYXRlXCJgKSxcbiAgICBsZXQgaG9va3MgPSBbXCJub3JtYWxpemVcIiwgXCJsb2NhdGVcIiwgXCJmZXRjaFwiLCBcInRyYW5zbGF0ZVwiLCBcImluc3RhbnRpYXRlXCJdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaG9va3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5hbWUgPSBob29rc1tpXTtcbiAgICAgICAgLy8+ICAgICAxLiAgTGV0IGhvb2sgYmUgdGhlIHJlc3VsdCBvZiBHZXQob3B0aW9ucywgbmFtZSkuXG4gICAgICAgIC8vPiAgICAgMi4gIFJldHVybklmQWJydXB0KGhvb2spLlxuICAgICAgICB2YXIgaG9vayA9IG9wdGlvbnNbbmFtZV07XG4gICAgICAgIC8vPiAgICAgMy4gIElmIGhvb2sgaXMgbm90IHVuZGVmaW5lZCxcbiAgICAgICAgaWYgKGhvb2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8+ICAgICAgICAgMS4gIExldCByZXN1bHQgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZVxuICAgICAgICAgICAgLy8+ICAgICAgICAgICAgIFtbRGVmaW5lT3duUHJvcGVydHldXSBpbnRlcm5hbCBtZXRob2Qgb2YgbG9hZGVyXG4gICAgICAgICAgICAvLz4gICAgICAgICAgICAgcGFzc2luZyBuYW1lIGFuZCB0aGUgUHJvcGVydHkgRGVzY3JpcHRvclxuICAgICAgICAgICAgLy8+ICAgICAgICAgICAgIHtbW1ZhbHVlXV06IGhvb2ssIFtbV3JpdGFibGVdXTogdHJ1ZSxcbiAgICAgICAgICAgIC8vPiAgICAgICAgICAgICBbW0VudW1lcmFibGVdXTogdHJ1ZSwgW1tDb25maWd1cmFibGVdXTogdHJ1ZX0gYXNcbiAgICAgICAgICAgIC8vPiAgICAgICAgICAgICBhcmd1bWVudHMuXG4gICAgICAgICAgICAvLz4gICAgICAgICAyLiAgUmV0dXJuSWZBYnJ1cHQocmVzdWx0KS5cbiAgICAgICAgICAgIHN0ZF9PYmplY3RfZGVmaW5lUHJvcGVydHkobG9hZGVyLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGhvb2ssXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8+IDEyLiBTZXQgbG9hZGVyLltbTW9kdWxlc11dIHRvIGEgbmV3IGVtcHR5IExpc3QuXG4gICAgbG9hZGVyRGF0YS5tb2R1bGVzID0gQ3JlYXRlTWFwKCk7XG4gICAgLy8+IDEzLiBTZXQgbG9hZGVyLltbTG9hZHNdXSB0byBhIG5ldyBlbXB0eSBMaXN0LlxuICAgIGxvYWRlckRhdGEubG9hZHMgPSBDcmVhdGVNYXAoKTtcbiAgICAvLz4gMTQuIFNldCBsb2FkZXIuW1tSZWFsbV1dIHRvIHJlYWxtLlxuICAgIGxvYWRlckRhdGEucmVhbG0gPSByZWFsbTtcblxuICAgIC8vPiAxNS4gUmV0dXJuIGxvYWRlci5cbiAgICByZXR1cm4gbG9hZGVyO1xufVxuLy9cbi8vIEluIHN0ZXAgOCwgdGhpcyBpbXBsZW1lbnRhdGlvbiByZXByZXNlbnRzIHRoZSBpbXBsaWNpdCBSZWFsbSBhc1xuLy8gdW5kZWZpbmVkLCBzbyB3ZSBkbyBub3RoaW5nLlxuLy9cbi8vIEluIHN0ZXAgMTEsIGhvb2tzIHByb3ZpZGVkIHZpYSBgb3B0aW9uc2AgYXJlIHN0b3JlZCBhcyBvcmRpbmFyeSBkYXRhXG4vLyBwcm9wZXJ0aWVzIG9mIHRoZSBuZXcgTG9hZGVyIG9iamVjdC4gICpSYXRpb25hbGUqOiBUaGUgTG9hZGVyIGNsYXNzIGNvbnRhaW5zXG4vLyBkZWZhdWx0IGltcGxlbWVudGF0aW9ucyBvZiBlYWNoIGhvb2suIFRoaXMgd2F5IHRoZSBob29rcyBjYW4gYmUgY2FsbGVkXG4vLyB1bmNvbmRpdGlvbmFsbHksIGFuZCBlaXRoZXIgdGhlIHVzZXItcHJvdmlkZWQgaG9vayBvciB0aGUgZGVmYXVsdCBpc1xuLy8gY2FsbGVkLiBGdXJ0aGVybW9yZSwgTG9hZGVyIHN1YmNsYXNzZXMgY2FuIGFkZCBtZXRob2RzIHdpdGggdGhlIGFwcHJvcHJpYXRlXG4vLyBuYW1lcyBhbmQgdXNlIGBzdXBlcigpYCB0byBpbnZva2UgdGhlIGJhc2UtY2xhc3MgYmVoYXZpb3IuXG4vL1xuLy8gVGhlIGFsZ29yaXRobSBpcyBkZXNpZ25lZCBzbyB0aGF0IGFsbCBzdGVwcyB0aGF0IGNvdWxkIGNvbXBsZXRlIGFicnVwdGx5XG4vLyBwcmVjZWRlIHRoZSBzdGVwcyB0aGF0IGluaXRpYWxpemUgdGhlIGludGVybmFsIHNsb3RzIG9mIHRoZSBuZXcgTG9hZGVyLlxuXG4vLyBEZWZpbmUgcHJvcGVydGllcyBvbiBhbiBvYmplY3QuIFRoZSBwcm9wZXJ0aWVzIGRlZmluZWQgdGhpcyB3YXkgYXJlIGV4YWN0bHlcbi8vIGxpa2UgdGhlIG9yaWdpbmFscyBvbiAqcHJvcHMqLCBidXQgbm9uLWVudW1lcmFibGUuIFRoaXMgaXMgdXNlZCB0byBidWlsZFxuLy8gcHJvdG90eXBlIG9iamVjdHMgYW5kIHRvIGF0dGFjaCBNb2R1bGUgYW5kIExvYWRlciB0byB0aGUgZ2xvYmFsLlxuZnVuY3Rpb24gZGVmKG9iaiwgcHJvcHMpIHtcbiAgICAvLyBUaGlzIGhlbHBlciBmdW5jdGlvbiBjYWxscyBPYmplY3QgbWV0aG9kcyBkaXJlY3RseSBiZWNhdXNlIGl0IGlzIG9ubHlcbiAgICAvLyBjYWxsZWQgZHVyaW5nIHBvbHlmaWxsIGluaXRpYWxpemF0aW9uLCBhbmQgdGhlbiBuZXZlciBhZ2Fpbi4gIEluIGFsbFxuICAgIC8vIG90aGVyIHBsYWNlcyB3aGVyZSBzdGFuZGFyZCBsaWJyYXJ5IGZlYXR1cmVzIGFyZSB1c2VkLCB3ZSBtYWtlIGFuIGVmZm9ydFxuICAgIC8vIHRvIGJlIHJvYnVzdCBhZ2FpbnN0IG11dGF0aW9uIG9mIHRoZSBidWlsdC1pbiBvYmplY3RzLlxuICAgIHZhciBuYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3BzKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBuYW1lID0gbmFtZXNbaV07XG4gICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm9wcywgbmFtZSk7XG4gICAgICAgIGRlc2MuZW51bWVyYWJsZSA9IGZhbHNlO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCBkZXNjKTtcbiAgICB9XG59XG5cbmRlZihnbG9iYWwsIHtNb2R1bGU6IE1vZHVsZSwgTG9hZGVyOiBMb2FkZXJ9KTtcblxuXG5cbi8vPiAjIyMjIExvYWRlciBbIEBAY3JlYXRlIF0gKCApXG4vLz5cbi8vPiBUaGUgQEBjcmVhdGUgbWV0aG9kIG9mIHRoZSBidWlsdGluIExvYWRlciBjb25zdHJ1Y3RvciBwZXJmb3JtcyB0aGVcbi8vPiBmb2xsb3dpbmcgc3RlcHM6XG4vLz5cbnZhciBMb2FkZXJfY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgIC8vPiAxLiAgTGV0IEYgYmUgdGhlIHRoaXMgdmFsdWUuXG4gICAgLy8+IDIuICBMZXQgbG9hZGVyIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgIC8vPiAgICAgT3JkaW5hcnlDcmVhdGVGcm9tQ29uc3RydWN0b3IoRiwgXCIlTG9hZGVyUHJvdG90eXBlJVwiLCAoW1tNb2R1bGVzXV0sXG4gICAgLy8+ICAgICBbW0xvYWRzXV0sIFtbUmVhbG1dXSkpLlxuICAgIHZhciBsb2FkZXIgPSBzdGRfT2JqZWN0X2NyZWF0ZSh0aGlzLnByb3RvdHlwZSk7XG4gICAgdmFyIGxvYWRlckRhdGEgPSB7XG4gICAgICAgIG1vZHVsZXM6IHVuZGVmaW5lZCxcbiAgICAgICAgbG9hZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVhbG06IHVuZGVmaW5lZCxcbiAgICAgICAgbGlua1NldENvdW50ZXI6IDBcbiAgICB9O1xuICAgIGNhbGxGdW5jdGlvbihzdGRfV2Vha01hcF9zZXQsIGxvYWRlckludGVybmFsRGF0YU1hcCwgbG9hZGVyLCBsb2FkZXJEYXRhKTtcblxuICAgIC8vPiAzLiAgUmV0dXJuIGxvYWRlci5cbiAgICByZXR1cm4gbG9hZGVyO1xufTtcbi8vPlxuXG5kZWYoTG9hZGVyLCB7XCJAQGNyZWF0ZVwiOiBMb2FkZXJfY3JlYXRlfSk7XG5cbi8vPiAjIyMgUHJvcGVydGllcyBvZiB0aGUgTG9hZGVyIFByb3RvdHlwZSBPYmplY3Rcbi8vPlxuLy8+IFRoZSBhYnN0cmFjdCBvcGVyYXRpb24gdGhpc0xvYWRlcigqdmFsdWUqKSBwZXJmb3JtcyB0aGUgZm9sbG93aW5nIHN0ZXBzOlxuLy8+XG4vLz4gMS4gIElmIFR5cGUoKnZhbHVlKikgaXMgT2JqZWN0IGFuZCB2YWx1ZSBoYXMgYSBbW01vZHVsZXNdXSBpbnRlcm5hbCBzbG90LFxuLy8+ICAgICB0aGVuXG4vLz4gICAgIDEuICBMZXQgbSBiZSAqdmFsdWUqLltbTW9kdWxlc11dLlxuLy8+ICAgICAyLiAgSWYgbSBpcyBub3QgKip1bmRlZmluZWQqKiwgdGhlbiByZXR1cm4gKnZhbHVlKi5cbi8vPiAyLiAgVGhyb3cgYSAqKlR5cGVFcnJvcioqIGV4Y2VwdGlvbi5cbi8vPlxuLy8+IFRoZSBwaHJhc2UgXCJ0aGlzIExvYWRlclwiIHdpdGhpbiB0aGUgc3BlY2lmaWNhdGlvbiBvZiBhIG1ldGhvZCByZWZlcnMgdG8gdGhlXG4vLz4gcmVzdWx0IHJldHVybmVkIGJ5IGNhbGxpbmcgdGhlIGFic3RyYWN0IG9wZXJhdGlvbiB0aGlzTG9hZGVyIHdpdGggdGhlIHRoaXNcbi8vPiB2YWx1ZSBvZiB0aGUgbWV0aG9kIGludm9jYXRpb24gcGFzc2VkIGFzIHRoZSBhcmd1bWVudC5cbi8vPlxuXG4vLyAqKmBVbnBhY2tPcHRpb25gKiogLSBVc2VkIGJ5IHNldmVyYWwgTG9hZGVyIG1ldGhvZHMgdG8gZ2V0IG9wdGlvbnNcbi8vIG9mZiBvZiBhbiBvcHRpb25zIG9iamVjdCBhbmQsIGlmIGRlZmluZWQsIGNvZXJjZSB0aGVtIHRvIHN0cmluZ3MuXG4vL1xuZnVuY3Rpb24gVW5wYWNrT3B0aW9uKG9wdGlvbnMsIG5hbWUsIHRodW5rKSB7XG4gICAgbGV0IHZhbHVlO1xuICAgIHJldHVybiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkIHx8ICgodmFsdWUgPSBvcHRpb25zW25hbWVdKSA9PT0gdW5kZWZpbmVkKSlcbiAgICAgICAgID8gKHRodW5rID8gdGh1bmsoKSA6IHVuZGVmaW5lZClcbiAgICAgICAgIDogdmFsdWU7XG59XG5cbmRlZihMb2FkZXIucHJvdG90eXBlLCB7XG5cbiAgICAvLz4gIyMjIyBMb2FkZXIucHJvdG90eXBlLnJlYWxtXG4gICAgLy8+XG4gICAgLy8+IGBMb2FkZXIucHJvdG90eXBlLnJlYWxtYCBpcyBhbiBhY2Nlc3NvciBwcm9wZXJ0eSB3aG9zZSBzZXQgYWNjZXNzb3JcbiAgICAvLz4gZnVuY3Rpb24gaXMgdW5kZWZpbmVkLiBJdHMgZ2V0IGFjY2Vzc29yIGZ1bmN0aW9uIHBlcmZvcm1zIHRoZSBmb2xsb3dpbmdcbiAgICAvLz4gc3RlcHM6XG4gICAgLy8+XG4gICAgZ2V0IHJlYWxtKCkge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkZXIgYmUgdGhpcyBMb2FkZXIuXG4gICAgICAgIC8vPiAxLiAgSWYgVHlwZShsb2FkZXIpIGlzIG5vdCBPYmplY3Qgb3IgbG9hZGVyIGRvZXMgbm90IGhhdmUgYWxsIHRoZVxuICAgICAgICAvLz4gICAgIGludGVybmFsIHByb3BlcnRpZXMgb2YgYSBMb2FkZXIgb2JqZWN0LCB0aHJvdyBhIFR5cGVFcnJvclxuICAgICAgICAvLz4gICAgIGV4Y2VwdGlvbi5cbiAgICAgICAgaWYgKCFJc09iamVjdCh0aGlzKSB8fFxuICAgICAgICAgICAgIWNhbGxGdW5jdGlvbihzdGRfV2Vha01hcF9oYXMsIGxvYWRlckludGVybmFsRGF0YU1hcCwgdGhpcykpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRocm93IHN0ZF9UeXBlRXJyb3IoXCJub3QgYSBMb2FkZXIgb2JqZWN0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8+IDEuICBSZXR1cm4gbG9hZGVyLltbUmVhbG1dXS5bW3JlYWxtT2JqZWN0XV0uXG4gICAgICAgIHJldHVybiBHZXRMb2FkZXJJbnRlcm5hbERhdGEodGhpcykucmVhbG0ucmVhbG1PYmplY3Q7XG4gICAgfSxcbiAgICAvLz5cblxuICAgIC8vPiAjIyMjIExvYWRlci5wcm90b3R5cGUuZ2xvYmFsXG4gICAgLy8+XG4gICAgLy8+IGBMb2FkZXIucHJvdG90eXBlLmdsb2JhbGAgaXMgYW4gYWNjZXNzb3IgcHJvcGVydHkgd2hvc2Ugc2V0IGFjY2Vzc29yXG4gICAgLy8+IGZ1bmN0aW9uIGlzIHVuZGVmaW5lZC4gSXRzIGdldCBhY2Nlc3NvciBmdW5jdGlvbiBwZXJmb3JtcyB0aGUgZm9sbG93aW5nXG4gICAgLy8+IHN0ZXBzOlxuICAgIC8vPlxuICAgIGdldCBnbG9iYWwoKSB7XG4gICAgICAgIC8vPiAxLiAgTGV0IGxvYWRlciBiZSB0aGlzIExvYWRlci5cbiAgICAgICAgLy8+IDEuICBJZiBUeXBlKGxvYWRlcikgaXMgbm90IE9iamVjdCBvciBsb2FkZXIgZG9lcyBub3QgaGF2ZSBhbGwgdGhlXG4gICAgICAgIC8vPiAgICAgaW50ZXJuYWwgcHJvcGVydGllcyBvZiBhIExvYWRlciBvYmplY3QsIHRocm93IGEgVHlwZUVycm9yXG4gICAgICAgIC8vPiAgICAgZXhjZXB0aW9uLlxuICAgICAgICBpZiAoIUlzT2JqZWN0KHRoaXMpIHx8XG4gICAgICAgICAgICAhY2FsbEZ1bmN0aW9uKHN0ZF9XZWFrTWFwX2hhcywgbG9hZGVySW50ZXJuYWxEYXRhTWFwLCB0aGlzKSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgc3RkX1R5cGVFcnJvcihcIm5vdCBhIExvYWRlciBvYmplY3RcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLz4gMS4gIFJldHVybiBsb2FkZXIuW1tSZWFsbV1dLltbZ2xvYmFsVGhpc11dLlxuICAgICAgICByZXR1cm4gR2V0TG9hZGVySW50ZXJuYWxEYXRhKHRoaXMpLnJlYWxtLmdsb2JhbFRoaXM7XG4gICAgfSxcbiAgICAvLz5cblxuICAgIC8vICMjIyBMb2FkaW5nIGFuZCBydW5uaW5nIGNvZGVcbiAgICAvL1xuICAgIC8vIFRoZSBoaWdoLWxldmVsIGludGVyZmFjZSBvZiBgTG9hZGVyYCBjb25zaXN0cyBvZiBhIGZldyBtZXRob2RzIGZvclxuICAgIC8vIGxvYWRpbmcgYW5kIHJ1bm5pbmcgY29kZS5cbiAgICAvL1xuICAgIC8vIFRoZXNlIGFyZSBpbXBsZW1lbnRlZCBpbiB0ZXJtcyBvZiBzbGlnaHRseSBsb3dlci1sZXZlbCBidWlsZGluZyBibG9ja3MuXG4gICAgLy8gRWFjaCBvZiB0aGVzZSBtZXRob2RzIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkgY3JlYXRlcyBhIGBMaW5rU2V0YCBvYmplY3QsXG4gICAgLy8gd2hpY2ggaXMgaW4gY2hhcmdlIG9mIGxpbmtpbmcsIGFuZCBhdCBsZWFzdCBvbmUgYExvYWRgLlxuXG4gICAgLy8gKipvcHRpb25zLmFkZHJlc3MqKiAmbmRhc2g7IFNldmVyYWwgTG9hZGVyIG1ldGhvZHMgYWNjZXB0IGFuIGBvcHRpb25zYFxuICAgIC8vIHBhcmFtZXRlci4gIEZvciB0aGVzZSBtZXRob2RzLCBgb3B0aW9ucy5hZGRyZXNzYCwgaWYgcHJlc2VudCwgaXMgcGFzc2VkXG4gICAgLy8gdG8gdGhlIGB0cmFuc2xhdGVgIGFuZCBgaW5zdGFudGlhdGVgIGhvb2tzIGFzIGBsb2FkLmFkZHJlc3NgLCBhbmQgdG8gdGhlXG4gICAgLy8gYG5vcm1hbGl6ZWAgaG9vayBmb3IgZWFjaCBkZXBlbmRlbmN5LCBhcyBgcmVmZXJyZXJBZGRyZXNzYC4gIFRoZSBkZWZhdWx0XG4gICAgLy8gbG9hZGVyIGhvb2tzIGlnbm9yZSBpdCwgdGhvdWdoLlxuICAgIC8vXG4gICAgLy8gSW1wbGVtZW50YXRpb25zIG1heSBhbHNvIHN0b3JlIGBvcHRpb25zLmFkZHJlc3NgIGluIHRoZSBjb21waWxlZCBtb2R1bGVcbiAgICAvLyBib2R5IGFuZCB1c2UgaXQgZm9yIGBFcnJvcigpLmZpbGVOYW1lYCwgYEVycm9yKCkuc3RhY2tgLCBhbmQgZGV2ZWxvcGVyXG4gICAgLy8gdG9vbHM7IGJ1dCBzdWNoIHVzZSBpcyBvdXRzaWRlIHRoZSBzY29wZSBvZiB0aGUgbGFuZ3VhZ2Ugc3BlY2lmaWNhdGlvbi5cblxuXG4gICAgLy8+ICMjIyMgTG9hZGVyLnByb3RvdHlwZS5kZWZpbmUgKCBuYW1lLCBzb3VyY2UsIG9wdGlvbnMgPSB1bmRlZmluZWQgKVxuICAgIC8vPlxuICAgIC8vPiBUaGUgYGRlZmluZWAgbWV0aG9kIGluc3RhbGxzIGEgbW9kdWxlIGluIHRoZSByZWdpc3RyeSBmcm9tIHNvdXJjZS4gIFRoZVxuICAgIC8vPiBtb2R1bGUgaXMgbm90IGltbWVkaWF0ZWx5IGF2YWlsYWJsZS4gVGhlIGB0cmFuc2xhdGVgIGFuZCBgaW5zdGFudGlhdGVgXG4gICAgLy8+IGhvb2tzIGFyZSBjYWxsZWQgYXN5bmNocm9ub3VzbHksIGFuZCBkZXBlbmRlbmNpZXMgYXJlIGxvYWRlZFxuICAgIC8vPiBhc3luY2hyb25vdXNseS5cbiAgICAvLz5cbiAgICAvLz4gYGRlZmluZWAgcmV0dXJucyBhIFByb21pc2Ugb2JqZWN0IHRoYXQgcmVzb2x2ZXMgdG8gdW5kZWZpbmVkIHdoZW4gdGhlXG4gICAgLy8+IG5ldyBtb2R1bGUgYW5kIGl0cyBkZXBlbmRlbmNpZXMgYXJlIGluc3RhbGxlZCBpbiB0aGUgcmVnaXN0cnkuXG4gICAgLy8+XG4gICAgLy8+IE5PVEUgVGhpcyBpcyB0aGUgZHluYW1pYyBlcXVpdmFsZW50IG9mIHRoZSBwcm9wb3NlZCBgPG1vZHVsZSBuYW1lPT5gXG4gICAgLy8+IGVsZW1lbnQgaW4gSFRNTC5cbiAgICAvLz5cbiAgICBkZWZpbmU6IGZ1bmN0aW9uIGRlZmluZShuYW1lLCBzb3VyY2UsIG9wdGlvbnMgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8+IDEuICBMZXQgbG9hZGVyIGJlIHRoaXMgTG9hZGVyLlxuICAgICAgICAvLz4gMS4gIFJldHVybklmQWJydXB0KGxvYWRlcikuXG4gICAgICAgIHZhciBsb2FkZXIgPSB0aGlzO1xuICAgICAgICB2YXIgbG9hZGVyRGF0YSA9IEdldExvYWRlckludGVybmFsRGF0YSh0aGlzKTtcblxuICAgICAgICAvLz4gMS4gIExldCBuYW1lIGJlIFRvU3RyaW5nKG5hbWUpLlxuICAgICAgICAvLz4gMS4gIFJldHVybklmQWJydXB0KG5hbWUpLlxuICAgICAgICBuYW1lID0gVG9TdHJpbmcobmFtZSk7XG5cbiAgICAgICAgLy8+IDEuICBMZXQgYWRkcmVzcyBiZSBHZXRPcHRpb24ob3B0aW9ucywgYFwiYWRkcmVzc1wiYCkuXG4gICAgICAgIC8vPiAxLiAgUmV0dXJuSWZBYnJ1cHQoYWRkcmVzcykuXG4gICAgICAgIHZhciBhZGRyZXNzID0gR2V0T3B0aW9uKG9wdGlvbnMsIFwiYWRkcmVzc1wiKTtcblxuICAgICAgICAvLz4gMS4gIExldCBtZXRhZGF0YSBiZSBHZXRPcHRpb24ob3B0aW9ucywgYFwibWV0YWRhdGFcImApLlxuICAgICAgICAvLz4gMS4gIFJldHVybklmQWJydXB0KG1ldGFkYXRhKS5cbiAgICAgICAgdmFyIG1ldGFkYXRhID0gR2V0T3B0aW9uKG9wdGlvbnMsIFwibWV0YWRhdGFcIik7XG5cbiAgICAgICAgLy8+IDEuICBJZiBtZXRhZGF0YSBpcyB1bmRlZmluZWQgdGhlbiBsZXQgbWV0YWRhdGEgYmUgdGhlIHJlc3VsdCBvZlxuICAgICAgICAvLz4gICAgIGNhbGxpbmcgT2JqZWN0Q3JlYXRlKCVPYmplY3RQcm90b3R5cGUlLCAoKSkuXG4gICAgICAgIGlmIChtZXRhZGF0YSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgbWV0YWRhdGEgPSB7fTtcblxuICAgICAgICAvLz4gMS4gIExldCBGIGJlIGEgbmV3IGFub255bW91cyBmdW5jdGlvbiBvYmplY3QgYXMgZGVmaW5lZCBpblxuICAgICAgICAvLz4gICAgIEFzeW5jU3RhcnRMb2FkUGFydHdheVRocm91Z2guXG4gICAgICAgIC8vPiAxLiAgU2V0IEYuW1tMb2FkZXJdXSB0byBsb2FkZXIuXG4gICAgICAgIC8vPiAxLiAgU2V0IEYuW1tNb2R1bGVOYW1lXV0gdG8gbmFtZS5cbiAgICAgICAgLy8+IDEuICBTZXQgRi5bW1N0ZXBdXSB0byB0aGUgU3RyaW5nIGBcInRyYW5zbGF0ZVwiYC5cbiAgICAgICAgLy8+IDEuICBTZXQgRi5bW01vZHVsZU1ldGFkYXRhXV0gdG8gbWV0YWRhdGEuXG4gICAgICAgIC8vPiAxLiAgU2V0IEYuW1tNb2R1bGVTb3VyY2VdXSB0byBzb3VyY2UuXG4gICAgICAgIC8vPiAxLiAgU2V0IEYuW1tNb2R1bGVBZGRyZXNzXV0gdG8gYWRkcmVzcy5cbiAgICAgICAgdmFyIGYgPSBNYWtlQ2xvc3VyZV9Bc3luY1N0YXJ0TG9hZFBhcnR3YXlUaHJvdWdoKFxuICAgICAgICAgICAgbG9hZGVyLCBsb2FkZXJEYXRhLCBuYW1lLCBcInRyYW5zbGF0ZVwiLCBtZXRhZGF0YSwgYWRkcmVzcywgc291cmNlKTtcblxuICAgICAgICAvLz4gMS4gIExldCBwIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyBPcmRpbmFyeUNvbnN0cnVjdCglUHJvbWlzZSUsIChGKSkuXG4gICAgICAgIHZhciBwID0gbmV3IHN0ZF9Qcm9taXNlKGYpO1xuXG4gICAgICAgIC8vPiAxLiAgTGV0IEcgYmUgYSBuZXcgYW5vbnltb3VzIGZ1bmN0aW9uIGFzIGRlZmluZWQgYnkgUmV0dXJuVW5kZWZpbmVkLlxuICAgICAgICAvLz4gMS4gIExldCBwIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyBQcm9taXNlVGhlbihwLCBHKS5cbiAgICAgICAgcCA9IGNhbGxGdW5jdGlvbihzdGRfUHJvbWlzZV90aGVuLCBwLCBmdW5jdGlvbiAoXykge30pO1xuXG4gICAgICAgIC8vPiAxLiAgUmV0dXJuIHAuXG4gICAgICAgIHJldHVybiBwO1xuICAgIH0sXG4gICAgLy8+XG4gICAgLy8+IFRoZSBgbGVuZ3RoYCBwcm9wZXJ0eSBvZiB0aGUgYGRlZmluZWAgbWV0aG9kIGlzICoqMioqLlxuICAgIC8vPlxuXG5cbiAgICAvLz4gIyMjIyBSZXR1cm5VbmRlZmluZWQgRnVuY3Rpb25zXG4gICAgLy8+XG4gICAgLy8+IEEgUmV0dXJuVW5kZWZpbmVkIGZ1bmN0aW9uIGlzIGFuIGFub255bW91cyBmdW5jdGlvbi5cbiAgICAvLz5cbiAgICAvLz4gV2hlbiBhIFJldHVyblVuZGVmaW5lZCBmdW5jdGlvbiBpcyBjYWxsZWQsIHRoZSBmb2xsb3dpbmcgc3RlcHMgYXJlXG4gICAgLy8+IHRha2VuOlxuICAgIC8vPlxuICAgIC8vPiAxLiAgUmV0dXJuIHVuZGVmaW5lZC5cbiAgICAvLz5cblxuICAgIC8vPiAjIyMjIExvYWRlci5wcm90b3R5cGUubG9hZCAoIHJlcXVlc3QsIG9wdGlvbnMgPSB1bmRlZmluZWQgKVxuICAgIC8vPlxuICAgIC8vPiBUaGUgYGxvYWRgIG1ldGhvZCBpbnN0YWxscyBhIG1vZHVsZSBpbnRvIHRoZSByZWdpc3RyeSBieSBuYW1lLlxuICAgIC8vPlxuICAgIC8vPiBOT1RFIENvbWJpbmVkIHdpdGggdGhlIGBub3JtYWxpemVgIGhvb2sgYW5kIGBMb2FkZXIucHJvdG90eXBlLmdldGAsXG4gICAgLy8+IHRoaXMgcHJvdmlkZXMgYSBjbG9zZSBkeW5hbWljIGFwcHJveGltYXRpb24gb2YgYW4gSW1wb3J0RGVjbGFyYXRpb24uXG4gICAgLy8+XG4gICAgbG9hZDogZnVuY3Rpb24gbG9hZChuYW1lLCBvcHRpb25zID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vPiAxLiAgTGV0IGxvYWRlciBiZSB0aGlzIExvYWRlci5cbiAgICAgICAgLy8+IDIuICBSZXR1cm5JZkFicnVwdChsb2FkZXIpLlxuICAgICAgICAvLz4gMy4gIExldCBwIGJlIHRoZSByZXN1bHQgb2YgTG9hZE1vZHVsZShsb2FkZXIsIG5hbWUsIG9wdGlvbnMpLlxuICAgICAgICAvLz4gNC4gIFJldHVybklmQWJydXB0KHApLlxuICAgICAgICB2YXIgcCA9IExvYWRNb2R1bGUodGhpcywgbmFtZSwgb3B0aW9ucyk7XG5cbiAgICAgICAgLy8+IDUuICBMZXQgZiBiZSBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gYXMgZGVzY3JpYmVkIGJ5IFJldHVyblVuZGVmaW5lZC5cbiAgICAgICAgLy8+IDYuICBMZXQgcCBiZSB0aGUgcmVzdWx0IG9mIFByb21pc2VUaGVuKHAsIGYpLlxuICAgICAgICBwID0gY2FsbEZ1bmN0aW9uKHN0ZF9Qcm9taXNlX3RoZW4sIHAsIGZ1bmN0aW9uIChfKSB7fSk7XG5cbiAgICAgICAgLy8+IDcuICBSZXR1cm4gcC5cbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfSxcbiAgICAvLz5cbiAgICAvLz4gVGhlIGBsZW5ndGhgIHByb3BlcnR5IG9mIHRoZSBgbG9hZGAgbWV0aG9kIGlzICoqMSoqLlxuICAgIC8vPlxuXG5cbiAgICAvLz4gIyMjIyBMb2FkZXIucHJvdG90eXBlLm1vZHVsZSAoIHNvdXJjZSwgb3B0aW9ucyApXG4gICAgLy8+XG4gICAgLy8+IFRoZSBgbW9kdWxlYCBtZXRob2QgYXN5bmNocm9ub3VzbHkgZXZhbHVhdGVzIGEgdG9wLWxldmVsLCBhbm9ueW1vdXNcbiAgICAvLz4gbW9kdWxlIGZyb20gc291cmNlLlxuICAgIC8vPlxuICAgIC8vPiBUaGUgbW9kdWxlJ3MgZGVwZW5kZW5jaWVzLCBpZiBhbnksIGFyZSBsb2FkZWQgYW5kIGNvbW1pdHRlZCB0byB0aGVcbiAgICAvLz4gcmVnaXN0cnkuICBUaGUgYW5vbnltb3VzIG1vZHVsZSBpdHNlbGYgaXMgbm90IGFkZGVkIHRvIHRoZSByZWdpc3RyeS5cbiAgICAvLz5cbiAgICAvLz4gYG1vZHVsZWAgcmV0dXJucyBhIFByb21pc2Ugb2JqZWN0IHRoYXQgcmVzb2x2ZXMgdG8gYSBuZXcgTW9kdWxlXG4gICAgLy8+IGluc3RhbmNlIG9iamVjdCBvbmNlIHRoZSBnaXZlbiBtb2R1bGUgYm9keSBoYXMgYmVlbiBldmFsdWF0ZWQuXG4gICAgLy8+XG4gICAgLy8+IE5PVEUgVGhpcyBpcyB0aGUgZHluYW1pYyBlcXVpdmFsZW50IG9mIGFuIGFub255bW91cyBgPG1vZHVsZT5gIGluIEhUTUwuXG4gICAgLy8+XG4gICAgbW9kdWxlOiBmdW5jdGlvbiBtb2R1bGUoc291cmNlLCBvcHRpb25zID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vPiAxLiAgTGV0IGxvYWRlciBiZSB0aGlzIExvYWRlci5cbiAgICAgICAgLy8+IDEuICBSZXR1cm5JZkFicnVwdChsb2FkZXIpLlxuICAgICAgICB2YXIgbG9hZGVyID0gdGhpcztcbiAgICAgICAgR2V0TG9hZGVySW50ZXJuYWxEYXRhKHRoaXMpO1xuXG4gICAgICAgIC8vPiAxLiAgTGV0IGFkZHJlc3MgYmUgR2V0T3B0aW9uKG9wdGlvbnMsIGBcImFkZHJlc3NcImApLlxuICAgICAgICAvLz4gMS4gIFJldHVybklmQWJydXB0KGFkZHJlc3MpLlxuICAgICAgICB2YXIgYWRkcmVzcyA9IEdldE9wdGlvbihvcHRpb25zLCBcImFkZHJlc3NcIik7XG5cbiAgICAgICAgLy8+IDEuICBMZXQgbG9hZCBiZSBDcmVhdGVMb2FkKHVuZGVmaW5lZCkuXG4gICAgICAgIGxldCBsb2FkID0gQ3JlYXRlTG9hZCh1bmRlZmluZWQpO1xuXG4gICAgICAgIC8vPiAxLiAgU2V0IHRoZSBbW0FkZHJlc3NdXSBmaWVsZCBvZiBsb2FkIHRvIGFkZHJlcy5cbiAgICAgICAgbG9hZC5hZGRyZXNzID0gYWRkcmVzcztcblxuICAgICAgICAvLz4gMS4gIExldCBsaW5rU2V0IGJlIENyZWF0ZUxpbmtTZXQobG9hZGVyLCBsb2FkKS5cbiAgICAgICAgbGV0IGxpbmtTZXQgPSBDcmVhdGVMaW5rU2V0KGxvYWRlciwgbG9hZCk7XG5cbiAgICAgICAgLy8+IDEuICBMZXQgc3VjY2Vzc0NhbGxiYWNrIGJlIGEgbmV3IGFub255bW91cyBmdW5jdGlvbiBvYmplY3QgYXNcbiAgICAgICAgLy8+ICAgICBkZWZpbmVkIGJ5IEV2YWx1YXRlTG9hZGVkTW9kdWxlLlxuICAgICAgICAvLz4gMS4gIFNldCBzdWNjZXNzQ2FsbGJhY2suW1tMb2FkZXJdXSB0byBsb2FkZXIuXG4gICAgICAgIC8vPiAxLiAgU2V0IHN1Y2Nlc3NDYWxsYmFjay5bW0xvYWRdXSB0byBsb2FkLlxuICAgICAgICAvLz4gMS4gIExldCBwIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyBQcm9taXNlVGhlbihsaW5rU2V0LltbRG9uZV1dLCBzdWNjZXNzQ2FsbGJhY2spLlxuICAgICAgICBsZXQgcCA9IGNhbGxGdW5jdGlvbihzdGRfUHJvbWlzZV90aGVuLCBsaW5rU2V0LmRvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1ha2VDbG9zdXJlX0V2YWx1YXRlTG9hZGVkTW9kdWxlKGxvYWRlcikpO1xuXG4gICAgICAgIC8vPiAxLiAgTGV0IHNvdXJjZVByb21pc2UgYmUgUHJvbWlzZU9mKHNvdXJjZSkuXG4gICAgICAgIHZhciBzb3VyY2VQcm9taXNlID0gUHJvbWlzZU9mKHNvdXJjZSk7XG5cbiAgICAgICAgLy8+IDEuICBDYWxsIHRoZSBQcm9jZWVkVG9UcmFuc2xhdGUgYWJzdHJhY3Qgb3BlcmF0aW9uIHBhc3NpbmcgbG9hZGVyLFxuICAgICAgICAvLz4gICAgIGxvYWQsIGFuZCBzb3VyY2VQcm9taXNlIGFzIGFyZ3VtZW50cy5cbiAgICAgICAgUHJvY2VlZFRvVHJhbnNsYXRlKGxvYWRlciwgbG9hZCwgc291cmNlUHJvbWlzZSk7XG5cbiAgICAgICAgLy8+IDEuICBSZXR1cm4gcC5cbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfSxcbiAgICAvLz5cbiAgICAvLz4gVGhlIGBsZW5ndGhgIHByb3BlcnR5IG9mIHRoZSBgbW9kdWxlYCBtZXRob2QgaXMgKioxKiouXG4gICAgLy8+XG5cblxuICAgIC8vPiAjIyMjIExvYWRlci5wcm90b3R5cGUuaW1wb3J0ICggbmFtZSwgb3B0aW9ucyApXG4gICAgLy8+XG4gICAgLy8+IFRoZSBgaW1wb3J0YCBtZXRob2QgYXN5bmNocm9ub3VzbHkgbG9hZHMsIGxpbmtzLCBhbmQgZXZhbHVhdGVzIGEgbW9kdWxlXG4gICAgLy8+IGFuZCBhbGwgaXRzIGRlcGVuZGVuY2llcy5cbiAgICAvLz5cbiAgICAvLz4gYGltcG9ydGAgcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgcmVxdWVzdGVkIGBNb2R1bGVgXG4gICAgLy8+IG9iamVjdCBvbmNlIGl0IGhhcyBiZWVuIGNvbW1pdHRlZCB0byB0aGUgcmVnaXN0cnkgYW5kIGV2YWx1YXRlZC5cbiAgICAvLz5cbiAgICAvLz4gTk9URSBUaGlzIGlzIHRoZSBkeW5hbWljIGVxdWl2YWxlbnQgKHdoZW4gY29tYmluZWQgd2l0aCBub3JtYWxpemF0aW9uKVxuICAgIC8vPiBvZiBhbiBJbXBvcnREZWNsYXJhdGlvbi5cbiAgICAvLz5cbiAgICBpbXBvcnQ6IGZ1bmN0aW9uIGltcG9ydF8obmFtZSwgb3B0aW9ucyA9IHVuZGVmaW5lZCkge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkZXIgYmUgdGhpcyBMb2FkZXIuXG4gICAgICAgIC8vPiAyLiAgUmV0dXJuSWZBYnJ1cHQobG9hZGVyKS5cbiAgICAgICAgLy8+IDMuICBMZXQgcCBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgICAgLy8+ICAgICBMb2FkTW9kdWxlKGxvYWRlciwgbmFtZSwgb3B0aW9ucykuXG4gICAgICAgIC8vPiA0LiAgUmV0dXJuSWZBYnJ1cHQocCkuXG4gICAgICAgIHZhciBsb2FkZXIgPSB0aGlzO1xuICAgICAgICB2YXIgcCA9IExvYWRNb2R1bGUobG9hZGVyLCBuYW1lLCBvcHRpb25zKTtcblxuICAgICAgICAvLz4gNS4gIExldCBGIGJlIGFuIGFub255bW91cyBmdW5jdGlvbiBvYmplY3QgYXMgZGVmaW5lZCBieVxuICAgICAgICAvLz4gICAgIEV2YWx1YXRlTG9hZGVkTW9kdWxlLlxuICAgICAgICAvLz4gNi4gIFNldCB0aGUgW1tMb2FkZXJdXSBmaWVsZCBvZiBGIHRvIGxvYWRlci5cbiAgICAgICAgLy8+IDcuICBMZXQgcCBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgUHJvbWlzZVRoZW4ocCwgRikuXG4gICAgICAgIHAgPSBjYWxsRnVuY3Rpb24oc3RkX1Byb21pc2VfdGhlbiwgcCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgTWFrZUNsb3N1cmVfRXZhbHVhdGVMb2FkZWRNb2R1bGUobG9hZGVyKSk7XG5cbiAgICAgICAgLy8+IDguICBSZXR1cm4gcC5cbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfSxcbiAgICAvLz5cbiAgICAvLz4gVGhlIGBsZW5ndGhgIHByb3BlcnR5IG9mIHRoZSBgaW1wb3J0YCBtZXRob2QgaXMgKioxKiouXG4gICAgLy8+XG5cblxuICAgIC8vPiAjIyMjIExvYWRlci5wcm90b3R5cGUuZXZhbCAoIHNvdXJjZSApXG4gICAgLy8+XG4gICAgLy8+IFRoZSBmb2xsb3dpbmcgc3RlcHMgYXJlIHRha2VuOlxuICAgIC8vPlxuICAgIGV2YWw6IGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkZXIgYmUgdGhpcyBMb2FkZXIuXG4gICAgICAgIC8vPiAyLiAgUmV0dXJuSWZBYnJ1cHQobG9hZGVyKS5cbiAgICAgICAgbGV0IGxvYWRlckRhdGEgPSBHZXRMb2FkZXJJbnRlcm5hbERhdGEodGhpcyk7XG5cbiAgICAgICAgLy8+IDMuICBSZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBJbmRpcmVjdEV2YWwgYWJzdHJhY3Qgb3BlcmF0aW9uXG4gICAgICAgIC8vPiAgICAgcGFzc2luZyBsb2FkZXIuW1tSZWFsbV1dIGFuZCBzb3VyY2UgYXMgYXJndW1lbnRzLlxuICAgICAgICByZXR1cm4gJEluZGlyZWN0RXZhbChsb2FkZXJEYXRhLnJlYWxtLCBzb3VyY2UpO1xuICAgIH0sXG5cblxuICAgIC8vICMjIyBNb2R1bGUgcmVnaXN0cnlcbiAgICAvL1xuICAgIC8vIEVhY2ggYExvYWRlcmAgaGFzIGEgKiptb2R1bGUgcmVnaXN0cnkqKiwgYSBjYWNoZSBvZiBhbHJlYWR5IGxvYWRlZCBhbmRcbiAgICAvLyBsaW5rZWQgbW9kdWxlcy4gIFRoZSBMb2FkZXIgdXNlcyB0aGlzIG1hcCB0byBhdm9pZCBmZXRjaGluZyBtb2R1bGVzXG4gICAgLy8gbXVsdGlwbGUgdGltZXMuXG4gICAgLy9cbiAgICAvLyBUaGUgbWV0aG9kcyBiZWxvdyBzdXBwb3J0IGRpcmVjdGx5IHF1ZXJ5aW5nIGFuZCBtb2RpZnlpbmcgdGhlIHJlZ2lzdHJ5LlxuICAgIC8vIFRoZXkgYXJlIHN5bmNocm9ub3VzIGFuZCBuZXZlciBmaXJlIGFueSBsb2FkZXIgaG9va3Mgb3IgdHJpZ2dlciBuZXdcbiAgICAvLyBsb2Fkcy5cbiAgICAvL1xuICAgIC8vIFRoZSBwb2x5ZmlsbCBmb3IgdGhlc2UgbWV0aG9kcyBlbmRzIHVwIGJlaW5nIHNob3J0ZXIgdGhhbiB0aGVcbiAgICAvLyBzcGVjaWZpY2F0aW9uIHRleHQgYmVjYXVzZSB0aGV5IHVzZSBNYXBzIGludGVybmFsbHkuIFBlcmhhcHMgdGhlXG4gICAgLy8gc3BlYyB3aWxsIGdhaW4gYSBmZXcgYWJzdHJhY3Rpb25zIGZvciAmbGRxdW87YXNzb2NpYXRpb24gTGlzdHMmcmRxdW87LFxuICAgIC8vIGJ1dCB0aGVyZSZyc3F1bztzIG5vdGhpbmcgYXQgdGhlIG1vbWVudC5cbiAgICAvL1xuXG4gICAgLy8+ICMjIyMgTG9hZGVyLnByb3RvdHlwZS5nZXQgKCBuYW1lIClcbiAgICAvLz5cbiAgICAvLz4gSWYgdGhpcyBMb2FkZXIncyBtb2R1bGUgcmVnaXN0cnkgY29udGFpbnMgYSBNb2R1bGUgd2l0aCB0aGUgZ2l2ZW5cbiAgICAvLz4gbm9ybWFsaXplZCBuYW1lLCByZXR1cm4gaXQuICBPdGhlcndpc2UsIHJldHVybiB1bmRlZmluZWQuXG4gICAgLy8+XG4gICAgLy8+IElmIHRoZSBtb2R1bGUgaXMgaW4gdGhlIHJlZ2lzdHJ5IGJ1dCBoYXMgbmV2ZXIgYmVlbiBldmFsdWF0ZWQsIGZpcnN0XG4gICAgLy8+IHN5bmNocm9ub3VzbHkgZXZhbHVhdGUgdGhlIGJvZGllcyBvZiB0aGUgbW9kdWxlIGFuZCBhbnkgZGVwZW5kZW5jaWVzXG4gICAgLy8+IHRoYXQgaGF2ZSBub3QgZXZhbHVhdGVkIHlldC5cbiAgICAvLz5cbiAgICAvLz4gV2hlbiB0aGUgYGdldGAgbWV0aG9kIGlzIGNhbGxlZCB3aXRoIG9uZSBhcmd1bWVudCwgdGhlIGZvbGxvd2luZyBzdGVwc1xuICAgIC8vPiBhcmUgdGFrZW46XG4gICAgLy8+XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQobmFtZSkge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkZXIgYmUgdGhpcyBMb2FkZXIuXG4gICAgICAgIC8vPiAyLiAgUmV0dXJuSWZBYnJ1cHQobG9hZGVyKS5cbiAgICAgICAgbGV0IGxvYWRlckRhdGEgPSBHZXRMb2FkZXJJbnRlcm5hbERhdGEodGhpcyk7XG5cbiAgICAgICAgLy8+IDMuICBMZXQgbmFtZSBiZSBUb1N0cmluZyhuYW1lKS5cbiAgICAgICAgLy8+IDQuICBSZXR1cm5JZkFicnVwdChuYW1lKS5cbiAgICAgICAgbmFtZSA9IFRvU3RyaW5nKG5hbWUpO1xuXG4gICAgICAgIC8vPiA1LiAgUmVwZWF0IGZvciBlYWNoIFJlY29yZCB7W1trZXldXSwgW1t2YWx1ZV1dfSBwIHRoYXQgaXMgYW5cbiAgICAgICAgLy8+ICAgICBlbGVtZW50IG9mIGxvYWRlci5bW01vZHVsZXNdXSxcbiAgICAgICAgLy8+ICAgICAxLiAgSWYgcC5bW2tleV1dIGlzIGVxdWFsIHRvIG5hbWUsIHRoZW5cbiAgICAgICAgLy8+ICAgICAgICAgMS4gIExldCBtb2R1bGUgYmUgcC5bW3ZhbHVlXV0uXG4gICAgICAgIC8vPiAgICAgICAgIDIuICBMZXQgcmVzdWx0IGJlIHRoZSByZXN1bHQgb2YgRW5zdXJlRXZhbHVhdGVkKG1vZHVsZSwgKCksXG4gICAgICAgIC8vPiAgICAgICAgICAgICBsb2FkZXIpLlxuICAgICAgICAvLz4gICAgICAgICAzLiAgUmV0dXJuSWZBYnJ1cHQocmVzdWx0KS5cbiAgICAgICAgLy8+ICAgICAgICAgNC4gIFJldHVybiBwLltbdmFsdWVdXS5cbiAgICAgICAgLy8+IDYuICBSZXR1cm4gdW5kZWZpbmVkLlxuICAgICAgICBsZXQgbSA9IGNhbGxGdW5jdGlvbihzdGRfTWFwX2dldCwgbG9hZGVyRGF0YS5tb2R1bGVzLCBuYW1lKTtcbiAgICAgICAgaWYgKG0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIEVuc3VyZUV2YWx1YXRlZEhlbHBlcihtLCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIG07XG4gICAgfSxcbiAgICAvLz5cblxuXG4gICAgLy8+ICMjIyMgTG9hZGVyLnByb3RvdHlwZS5oYXMgKCBuYW1lIClcbiAgICAvLz5cbiAgICAvLz4gUmV0dXJuIHRydWUgaWYgdGhpcyBMb2FkZXIncyBtb2R1bGUgcmVnaXN0cnkgY29udGFpbnMgYSBNb2R1bGUgd2l0aCB0aGVcbiAgICAvLz4gZ2l2ZW4gbmFtZS4gVGhpcyBtZXRob2QgZG9lcyBub3QgY2FsbCBhbnkgaG9va3Mgb3IgcnVuIGFueSBtb2R1bGUgY29kZS5cbiAgICAvLz5cbiAgICAvLz4gVGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4gICAgLy8+XG4gICAgaGFzOiBmdW5jdGlvbiBoYXMobmFtZSkge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkZXIgYmUgdGhpcyBMb2FkZXIuXG4gICAgICAgIC8vPiAyLiAgUmV0dXJuSWZBYnJ1cHQobG9hZGVyKS5cbiAgICAgICAgbGV0IGxvYWRlckRhdGEgPSBHZXRMb2FkZXJJbnRlcm5hbERhdGEodGhpcyk7XG5cbiAgICAgICAgLy8+IDMuICBMZXQgbmFtZSBiZSBUb1N0cmluZyhuYW1lKS5cbiAgICAgICAgLy8+IDQuICBSZXR1cm5JZkFicnVwdChuYW1lKS5cbiAgICAgICAgbmFtZSA9IFRvU3RyaW5nKG5hbWUpO1xuXG4gICAgICAgIC8vPiA1LiAgUmVwZWF0IGZvciBlYWNoIFJlY29yZCB7W1tuYW1lXV0sIFtbdmFsdWVdXX0gcCB0aGF0IGlzIGFuXG4gICAgICAgIC8vPiAgICAgZWxlbWVudCBvZiBsb2FkZXIuW1tNb2R1bGVzXV0sXG4gICAgICAgIC8vPiAgICAgMS4gIElmIHAuW1trZXldXSBpcyBlcXVhbCB0byBuYW1lLCB0aGVuIHJldHVybiB0cnVlLlxuICAgICAgICAvLz4gNi4gIFJldHVybiBmYWxzZS5cbiAgICAgICAgcmV0dXJuIGNhbGxGdW5jdGlvbihzdGRfTWFwX2hhcywgbG9hZGVyRGF0YS5tb2R1bGVzLCBuYW1lKTtcbiAgICB9LFxuICAgIC8vPlxuXG5cbiAgICAvLz4gIyMjIyBMb2FkZXIucHJvdG90eXBlLnNldCAoIG5hbWUsIG1vZHVsZSApXG4gICAgLy8+XG4gICAgLy8+IFN0b3JlIGEgbW9kdWxlIGluIHRoaXMgTG9hZGVyJ3MgbW9kdWxlIHJlZ2lzdHJ5LCBvdmVyd3JpdGluZyBhbnlcbiAgICAvLz4gZXhpc3RpbmcgZW50cnkgd2l0aCB0aGUgc2FtZSBuYW1lLlxuICAgIC8vPlxuICAgIC8vPiBUaGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAvLz5cbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuYW1lLCBtb2R1bGUpIHtcbiAgICAgICAgLy8+IDEuICBMZXQgbG9hZGVyIGJlIHRoaXMgTG9hZGVyLlxuICAgICAgICAvLz4gMi4gIFJldHVybklmQWJydXB0KGxvYWRlcikuXG4gICAgICAgIGxldCBsb2FkZXJEYXRhID0gR2V0TG9hZGVySW50ZXJuYWxEYXRhKHRoaXMpO1xuXG4gICAgICAgIC8vPiAzLiAgTGV0IG5hbWUgYmUgVG9TdHJpbmcobmFtZSkuXG4gICAgICAgIC8vPiA0LiAgUmV0dXJuSWZBYnJ1cHQobmFtZSkuXG4gICAgICAgIG5hbWUgPSBUb1N0cmluZyhuYW1lKTtcblxuICAgICAgICAvLz4gNS4gIElmIG1vZHVsZSBkb2VzIG5vdCBoYXZlIGFsbCB0aGUgaW50ZXJuYWwgc2xvdHMgb2YgYSBNb2R1bGVcbiAgICAgICAgLy8+ICAgICBpbnN0YW5jZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICBpZiAoISRJc01vZHVsZShtb2R1bGUpKVxuICAgICAgICAgICAgdGhyb3cgc3RkX1R5cGVFcnJvcihcIk1vZHVsZSBvYmplY3QgcmVxdWlyZWRcIik7XG5cbiAgICAgICAgLy8+IDYuICBSZXBlYXQgZm9yIGVhY2ggUmVjb3JkIHtbW25hbWVdXSwgW1t2YWx1ZV1dfSBwIHRoYXQgaXMgYW5cbiAgICAgICAgLy8+ICAgICBlbGVtZW50IG9mIGxvYWRlci5bW01vZHVsZXNdXSxcbiAgICAgICAgLy8+ICAgICAxLiAgSWYgcC5bW2tleV1dIGlzIGVxdWFsIHRvIG5hbWUsXG4gICAgICAgIC8vPiAgICAgICAgIDEuICBTZXQgcC5bW3ZhbHVlXV0gdG8gbW9kdWxlLlxuICAgICAgICAvLz4gICAgICAgICAyLiAgUmV0dXJuIGxvYWRlci5cbiAgICAgICAgLy8+IDcuICBMZXQgcCBiZSB0aGUgUmVjb3JkIHtbW2tleV1dOiBuYW1lLCBbW3ZhbHVlXV06IG1vZHVsZX0uXG4gICAgICAgIC8vPiA4LiAgQXBwZW5kIHAgYXMgdGhlIGxhc3QgcmVjb3JkIG9mIGxvYWRlci5bW01vZHVsZXNdXS5cbiAgICAgICAgLy8+IDkuICBSZXR1cm4gbG9hZGVyLlxuICAgICAgICBjYWxsRnVuY3Rpb24oc3RkX01hcF9zZXQsIGxvYWRlckRhdGEubW9kdWxlcywgbmFtZSwgbW9kdWxlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvLz5cbiAgICAvL1xuICAgIC8vICoqVGhlIE1vZHVsZSB0eXBlIGNoZWNrIGluIHNldCgpKiogJm5kYXNoOyBJZiB0aGUgbW9kdWxlIGFyZ3VtZW50IGlzIG5vdFxuICAgIC8vIGFjdHVhbGx5IGEgTW9kdWxlIGluc3RhbmNlIG9iamVjdCwgYHNldGAgZmFpbHMuIFRoaXMgZW5mb3JjZXMgYW5cbiAgICAvLyBpbnZhcmlhbnQgb2YgdGhlIG1vZHVsZSByZWdpc3RyeTogYWxsIHRoZSB2YWx1ZXMgYXJlIGBNb2R1bGVgXG4gICAgLy8gaW5zdGFuY2VzLiAqUmF0aW9uYWxlOiogV2UgdXNlIGBNb2R1bGVgLXNwZWNpZmljIG9wZXJhdGlvbnMgb24gdGhlbSxcbiAgICAvLyBwYXJ0aWN1bGFybHkgZm9yIGxpbmtpbmcgYW5kIGV2YWx1YXRpb24uXG4gICAgLy9cbiAgICAvLyAqKnNldCgpIGFuZCBhbHJlYWR5LWxpbmtlZCBtb2R1bGVzKiogJm5kYXNoOyBJZiB0aGVyZSBpcyBhbHJlYWR5IGFcbiAgICAvLyBtb2R1bGUgaW4gdGhlIHJlZ2lzdHJ5IHdpdGggdGhlIGdpdmVuIGZ1bGwgbmFtZSwgYHNldGAgcmVwbGFjZXMgaXQsIGJ1dFxuICAgIC8vIGFueSBzY3JpcHRzIG9yIG1vZHVsZXMgdGhhdCBhcmUgbGlua2VkIHRvIHRoZSBvbGQgbW9kdWxlIHJlbWFpbiBsaW5rZWRcbiAgICAvLyB0byBpdC4gKlJhdGlvbmFsZToqIFJlLWxpbmtpbmcgYWxyZWFkeS1saW5rZWQgbW9kdWxlcyBtaWdodCBub3Qgd29yayxcbiAgICAvLyBzaW5jZSB0aGUgbmV3IG1vZHVsZSBtYXkgZXhwb3J0IGEgZGlmZmVyZW50IHNldCBvZiBuYW1lcy4gQWxzbywgdGhlIG5ld1xuICAgIC8vIG1vZHVsZSBtYXkgYmUgbGlua2VkIHRvIHRoZSBvbGQgb25lISBUaGlzIGlzIGEgY29udmVuaWVudCB3YXkgdG9cbiAgICAvLyBtb25rZXlwYXRjaCBtb2R1bGVzLiBPbmNlIG1vZHVsZXMgYXJlIHdpZGVzcHJlYWQsIHRoaXMgdGVjaG5pcXVlIGNhbiBiZVxuICAgIC8vIHVzZWQgZm9yIHBvbHlmaWxsaW5nLlxuICAgIC8vXG4gICAgLy8gKipzZXQoKSBhbmQgY29uY3VycmVudCBsb2FkcyoqICZuZGFzaDsgSWYgYSBMb2FkIFJlY29yZCBmb3IgYG5hbWVgIGlzIGluXG4gICAgLy8gYHRoaXMubG9hZHNgLCBgLnNldCgpYCBzdWNjZWVkcywgd2l0aCBubyBpbW1lZGlhdGUgZWZmZWN0IG9uIHRoZSBwZW5kaW5nXG4gICAgLy8gbG9hZDsgYnV0IGlmIHRoYXQgbG9hZCBpcyBldmVudHVhbGx5IGxpbmtlZCwgYW4gZXJyb3Igd2lsbCBvY2N1ciBhdCB0aGVcbiAgICAvLyBlbmQgb2YgdGhlIGxpbmsgcGhhc2UsIGp1c3QgYmVmb3JlIGFueSBvZiB0aGUgbmV3IGxpbmtlZCBtb2R1bGVzIGFyZVxuICAgIC8vIGNvbW1pdHRlZCB0byB0aGUgcmVnaXN0cnkuXG5cblxuICAgIC8vPiAjIyMjIExvYWRlci5wcm90b3R5cGUuZGVsZXRlICggbmFtZSApXG4gICAgLy8+XG4gICAgLy8+IFJlbW92ZSBhbiBlbnRyeSBmcm9tIHRoaXMgbG9hZGVyJ3MgbW9kdWxlIHJlZ2lzdHJ5LlxuICAgIC8vPlxuICAgIC8vPiBUaGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAvLz5cbiAgICBkZWxldGU6IGZ1bmN0aW9uIGRlbGV0ZV8obmFtZSkge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkZXIgYmUgdGhpcyBMb2FkZXIuXG4gICAgICAgIC8vPiAyLiAgUmV0dXJuSWZBYnJ1cHQobG9hZGVyKS5cbiAgICAgICAgbGV0IGxvYWRlckRhdGEgPSBHZXRMb2FkZXJJbnRlcm5hbERhdGEodGhpcyk7XG5cbiAgICAgICAgLy8+IDMuICBMZXQgbmFtZSBiZSBUb1N0cmluZyhuYW1lKS5cbiAgICAgICAgLy8+IDQuICBSZXR1cm5JZkFicnVwdChuYW1lKS5cbiAgICAgICAgbmFtZSA9IFRvU3RyaW5nKG5hbWUpO1xuXG4gICAgICAgIC8vPiA1LiAgUmVwZWF0IGZvciBlYWNoIFJlY29yZCB7W1tuYW1lXV0sIFtbdmFsdWVdXX0gcCB0aGF0IGlzIGFuXG4gICAgICAgIC8vPiAgICAgZWxlbWVudCBvZiBsb2FkZXIuW1tNb2R1bGVzXV0sXG4gICAgICAgIC8vPiAgICAgMS4gIElmIHAuW1trZXldXSBpcyBlcXVhbCB0byBuYW1lLFxuICAgICAgICAvLz4gICAgICAgICAxLiAgU2V0IHAuW1trZXldXSB0byBlbXB0eS5cbiAgICAgICAgLy8+ICAgICAgICAgMi4gIFNldCBwLltbdmFsdWVdXSB0byBlbXB0eS5cbiAgICAgICAgLy8+ICAgICAgICAgMy4gIFJldHVybiB0cnVlLlxuICAgICAgICAvLz4gNi4gIFJldHVybiBmYWxzZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gbW9kdWxlIHdpdGggdGhlIGdpdmVuIG5hbWUgaW4gdGhlIHJlZ2lzdHJ5LCB0aGlzIGRvZXNcbiAgICAgICAgLy8gbm90aGluZy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gYGxvYWRlci5kZWxldGUoXCJBXCIpYCBoYXMgbm8gZWZmZWN0IGF0IGFsbCBpZlxuICAgICAgICAvLyBgIWxvYWRlckRhdGEubW9kdWxlcy5oYXMoXCJBXCIpYCwgZXZlbiBpZiBcIkFcIiBpcyBjdXJyZW50bHkgbG9hZGluZyAoYW5cbiAgICAgICAgLy8gZW50cnkgZXhpc3RzIGluIGBsb2FkZXJEYXRhLmxvYWRzYCkuICBUaGlzIGlzIGFuYWxvZ291cyB0byBgLnNldCgpYC5cbiAgICAgICAgLy9cbiAgICAgICAgcmV0dXJuIGNhbGxGdW5jdGlvbihzdGRfTWFwX2RlbGV0ZSwgbG9hZGVyRGF0YS5tb2R1bGVzLCBuYW1lKTtcbiAgICB9LFxuICAgIC8vPlxuICAgIC8vXG4gICAgLy8gKipkZWxldGUoKSBhbmQgY29uY3VycmVudCBsb2FkcyoqICZuZGFzaDsgQ2FsbGluZyBgLmRlbGV0ZSgpYCBoYXMgbm9cbiAgICAvLyBpbW1lZGlhdGUgZWZmZWN0IG9uIGluLWZsaWdodCBsb2FkcywgYnV0IGl0IGNhbiBjYXVzZSBzdWNoIGEgbG9hZCB0b1xuICAgIC8vIGZhaWwgbGF0ZXIuXG4gICAgLy9cbiAgICAvLyBUaGF0J3MgYmVjYXVzZSB0aGUgZGVwZW5kZW5jeS1sb2FkaW5nIGFsZ29yaXRobSAoYWJvdmUpIGFzc3VtZXMgdGhhdCBpZlxuICAgIC8vIGl0IGZpbmRzIGEgbW9kdWxlIGluIHRoZSByZWdpc3RyeSwgaXQgZG9lc24ndCBuZWVkIHRvIGxvYWQgdGhhdCBtb2R1bGUuXG4gICAgLy8gSWYgc29tZW9uZSBkZWxldGVzIHRoYXQgbW9kdWxlIGZyb20gdGhlIHJlZ2lzdHJ5IChhbmQgZG9lc24ndCByZXBsYWNlIGl0XG4gICAgLy8gd2l0aCBzb21ldGhpbmcgY29tcGF0aWJsZSksIHRoZW4gd2hlbiBsb2FkaW5nIGZpbmlzaGVzLCBpdCB3aWxsIGZpbmRcbiAgICAvLyB0aGF0IGEgbW9kdWxlIGl0IHdhcyBjb3VudGluZyBvbiBoYXMgdmFuaXNoZWQuICBMaW5raW5nIHdpbGwgZmFpbC5cbiAgICAvL1xuICAgIC8vICoqZGVsZXRlKCkgYW5kIGFscmVhZHktbGlua2VkIG1vZHVsZXMqKiAmbmRhc2g7IGBsb2FkZXIuZGVsZXRlKFwiQVwiKWBcbiAgICAvLyByZW1vdmVzIG9ubHkgYEFgIGZyb20gdGhlIHJlZ2lzdHJ5LCBhbmQgbm90IG90aGVyIG1vZHVsZXMgbGlua2VkIGFnYWluc3RcbiAgICAvLyBgQWAsIGZvciBzZXZlcmFsIHJlYXNvbnM6XG4gICAgLy9cbiAgICAvLyAxLiBXaGF0IGEgbW9kdWxlIGlzIGxpbmtlZCBhZ2FpbnN0IGlzIHByb3Blcmx5IGFuIGltcGxlbWVudGF0aW9uXG4gICAgLy8gICAgZGV0YWlsLCB3aGljaCB0aGUgXCJyZW1vdmUgZXZlcnl0aGluZ1wiIGJlaGF2aW9yIHdvdWxkIGxlYWsuXG4gICAgLy9cbiAgICAvLyAyLiBUaGUgdHJhbnNpdGl2ZSBjbG9zdXJlIG9mIHdoYXQgaXMgbGlua2VkIGFnYWluc3Qgd2hhdCBpcyBhblxuICAgIC8vICAgIHVucHJlZGljdGFibGUgYW1vdW50IG9mIHN0dWZmLCBwb3RlbnRpYWxseSBhIGxvdC5cbiAgICAvL1xuICAgIC8vIDMuIFNvbWUgdXNlcyBvZiBtb2R1bGVzJm1kYXNoO2luIHBhcnRpY3VsYXIgcG9seWZpbGxpbmcmbWRhc2g7aW52b2x2ZVxuICAgIC8vICAgIGRlZmluaW5nIGEgbmV3IG1vZHVsZSBgTXlYYCwgbGlua2luZyBpdCBhZ2FpbnN0IHNvbWUgYnVzdGVkIGJ1aWx0LWluXG4gICAgLy8gICAgbW9kdWxlIGBYYCwgdGhlbiByZXBsYWNpbmcgYFhgIGluIHRoZSByZWdpc3RyeSB3aXRoIGBNeVhgLiBTbyBoYXZpbmdcbiAgICAvLyAgICBtdWx0aXBsZSBcInZlcnNpb25zXCIgb2YgYSBtb2R1bGUgbGlua2VkIHRvZ2V0aGVyIGlzIGEgZmVhdHVyZSwgbm90IGFcbiAgICAvLyAgICBidWcuXG4gICAgLy9cblxuXG4gICAgLy8+ICMjIyMgTG9hZGVyLnByb3RvdHlwZS5lbnRyaWVzICggKVxuICAgIC8vPlxuICAgIC8vPiBUaGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbi5cbiAgICAvLz5cbiAgICBlbnRyaWVzOiBmdW5jdGlvbiBlbnRyaWVzKCkge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkZXIgYmUgdGhpcyBMb2FkZXIuXG4gICAgICAgIC8vPiAyLiAgUmV0dXJuSWZBYnJ1cHQobG9hZGVyKS5cbiAgICAgICAgbGV0IGxvYWRlckRhdGEgPSBHZXRMb2FkZXJJbnRlcm5hbERhdGEodGhpcyk7XG5cbiAgICAgICAgLy8+IDMuICBSZXR1cm4gdGhlIHJlc3VsdCBvZiBDcmVhdGVMb2FkZXJJdGVyYXRvcihsb2FkZXIsXG4gICAgICAgIC8vPiAgICAgYFwia2V5K3ZhbHVlXCJgKS5cbiAgICAgICAgcmV0dXJuIG5ldyBMb2FkZXJJdGVyYXRvcihcbiAgICAgICAgICAgIGNhbGxGdW5jdGlvbihzdGRfTWFwX2VudHJpZXMsIGxvYWRlckRhdGEubW9kdWxlcykpO1xuICAgIH0sXG4gICAgLy8+XG5cblxuICAgIC8vPiAjIyMjIExvYWRlci5wcm90b3R5cGUua2V5cyAoIClcbiAgICAvLz5cbiAgICAvLz4gVGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW4uXG4gICAgLy8+XG4gICAga2V5czogZnVuY3Rpb24ga2V5cygpIHtcbiAgICAgICAgLy8+IDEuICBMZXQgbG9hZGVyIGJlIHRoaXMgTG9hZGVyLlxuICAgICAgICAvLz4gMi4gIFJldHVybklmQWJydXB0KGxvYWRlcikuXG4gICAgICAgIGxldCBsb2FkZXJEYXRhID0gR2V0TG9hZGVySW50ZXJuYWxEYXRhKHRoaXMpO1xuXG4gICAgICAgIC8vPiAzLiAgUmV0dXJuIHRoZSByZXN1bHQgb2YgQ3JlYXRlTG9hZGVySXRlcmF0b3IobG9hZGVyLCBgXCJrZXlcImApLlxuICAgICAgICByZXR1cm4gbmV3IExvYWRlckl0ZXJhdG9yKFxuICAgICAgICAgICAgY2FsbEZ1bmN0aW9uKHN0ZF9NYXBfa2V5cywgbG9hZGVyRGF0YS5tb2R1bGVzKSk7XG4gICAgfSxcbiAgICAvLz5cblxuXG4gICAgLy8+ICMjIyMgTG9hZGVyLnByb3RvdHlwZS52YWx1ZXMgKCApXG4gICAgLy8+XG4gICAgLy8+IFRoZSBmb2xsb3dpbmcgc3RlcHMgYXJlIHRha2VuLlxuICAgIC8vPlxuICAgIHZhbHVlczogZnVuY3Rpb24gdmFsdWVzKCkge1xuICAgICAgICAvLz4gMS4gIExldCBsb2FkZXIgYmUgdGhpcyBMb2FkZXIuXG4gICAgICAgIC8vPiAyLiAgUmV0dXJuSWZBYnJ1cHQobG9hZGVyKS5cbiAgICAgICAgbGV0IGxvYWRlckRhdGEgPSBHZXRMb2FkZXJJbnRlcm5hbERhdGEodGhpcyk7XG5cbiAgICAgICAgLy8+IDMuICBSZXR1cm4gdGhlIHJlc3VsdCBvZiBDcmVhdGVMb2FkZXJJdGVyYXRvcihsb2FkZXIsIGBcInZhbHVlXCJgKS5cbiAgICAgICAgcmV0dXJuIG5ldyBMb2FkZXJJdGVyYXRvcihcbiAgICAgICAgICAgIGNhbGxGdW5jdGlvbihzdGRfTWFwX3ZhbHVlcywgbG9hZGVyRGF0YS5tb2R1bGVzKSk7XG4gICAgfSxcblxuXG4gICAgLy8gIyMjIExvYWRlciBob29rc1xuICAgIC8vXG4gICAgLy8gVGhlc2UgZml2ZSBtZXRob2RzIG1heSBiZSBvdmVybG9hZGVkIGluIGEgc3ViY2xhc3Mgb3IgaW4gYW55IHBhcnRpY3VsYXJcbiAgICAvLyBMb2FkZXIgaW5zdGFuY2UuIFRvZ2V0aGVyLCB0aGV5IGdvdmVybiB0aGUgcHJvY2VzcyBvZiBsb2FkaW5nIGEgc2luZ2xlXG4gICAgLy8gbW9kdWxlLiAoVGhlcmUgYXJlIG5vIGhvb2tzIGludG8gdGhlIGxpbmsgcGhhc2Ugb3IgdGhlIG1vZHVsZSByZWdpc3RyeVxuICAgIC8vIGl0c2VsZi4pXG4gICAgLy9cblxuICAgIC8vPiAjIyMjIExvYWRlci5wcm90b3R5cGUubm9ybWFsaXplICggbmFtZSwgcmVmZXJyZXJOYW1lLCByZWZlcnJlckFkZHJlc3MgKVxuICAgIC8vPlxuICAgIC8vPiBUaGlzIGhvb2sgcmVjZWl2ZXMgdGhlIG1vZHVsZSBuYW1lIGFzIHdyaXR0ZW4gaW4gdGhlIGltcG9ydFxuICAgIC8vPiBkZWNsYXJhdGlvbi4gIEl0IHJldHVybnMgYSBzdHJpbmcgb3IgYSB0aGVuYWJsZSBmb3IgYSBzdHJpbmcsIHRoZSBmdWxsXG4gICAgLy8+IG1vZHVsZSBuYW1lLCB3aGljaCBpcyB1c2VkIGZvciB0aGUgcmVzdCBvZiB0aGUgaW1wb3J0IHByb2Nlc3MuICBJblxuICAgIC8vPiBwYXJ0aWN1bGFyLCBsb2FkZXIuW1tMb2Fkc11dIGFuZCBsb2FkZXIuW1tNb2R1bGVzXV0gYXJlIGJvdGgga2V5ZWQgYnlcbiAgICAvLz4gbm9ybWFsaXplZCBtb2R1bGUgbmFtZXMuICBPbmx5IGEgc2luZ2xlIGxvYWQgY2FuIGJlIGluIHByb2dyZXNzIGZvciBhXG4gICAgLy8+IGdpdmVuIG5vcm1hbGl6ZWQgbW9kdWxlIG5hbWUgYXQgYSB0aW1lLiAgVGhlIG1vZHVsZSByZWdpc3RyeSBjYW5cbiAgICAvLz4gY29udGFpbiBhdCBtb3N0IG9uZSBtb2R1bGUgZm9yIGEgZ2l2ZW4gbW9kdWxlIG5hbWUuXG4gICAgLy8+XG4gICAgLy8+ICpXaGVuIHRoaXMgaG9vayBpcyBjYWxsZWQ6KiAgV2hlbiBhIG1vZHVsZSBib2R5IGlzIHBhcnNlZCwgb25jZSBwZXJcbiAgICAvLz4gZGlzdGluY3QgbW9kdWxlIHNwZWNpZmllciBpbiB0aGF0IG1vZHVsZSBib2R5LlxuICAgIC8vPlxuICAgIC8vPiBBZnRlciBjYWxsaW5nIHRoaXMgaG9vaywgaWYgdGhlIGZ1bGwgbW9kdWxlIG5hbWUgaXMgaW4gdGhlIHJlZ2lzdHJ5IG9yXG4gICAgLy8+IHRoZSBsb2FkIHRhYmxlLCBubyBuZXcgTG9hZCBSZWNvcmQgaXMgY3JlYXRlZC4gT3RoZXJ3aXNlIHRoZSBsb2FkZXJcbiAgICAvLz4ga2lja3Mgb2ZmIGEgbmV3IExvYWQsIHN0YXJ0aW5nIGJ5IGNhbGxpbmcgdGhlIGBsb2NhdGVgIGhvb2suXG4gICAgLy8+XG4gICAgLy8+ICpEZWZhdWx0IGJlaGF2aW9yOiogIFJldHVybiB0aGUgbW9kdWxlIG5hbWUgdW5jaGFuZ2VkLlxuICAgIC8vPlxuICAgIC8vPiBXaGVuIHRoZSBub3JtYWxpemUgbWV0aG9kIGlzIGNhbGxlZCwgdGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4gICAgLy8+XG4gICAgbm9ybWFsaXplOiBmdW5jdGlvbiBub3JtYWxpemUobmFtZSwgcmVmZXJyZXJOYW1lLCByZWZlcnJlckFkZHJlc3MpIHtcbiAgICAgICAgLy8+IDEuIFJldHVybiBuYW1lLlxuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9LFxuICAgIC8vPlxuXG5cbiAgICAvLz4gIyMjIyBMb2FkZXIucHJvdG90eXBlLmxvY2F0ZSAoIGxvYWQgKVxuICAgIC8vPlxuICAgIC8vPiBHaXZlbiBhIG5vcm1hbGl6ZWQgbW9kdWxlIG5hbWUsIGRldGVybWluZSB0aGUgcmVzb3VyY2UgYWRkcmVzcyAoVVJMLFxuICAgIC8vPiBwYXRoLCBldGMuKSB0byBsb2FkLlxuICAgIC8vPlxuICAgIC8vPiBUaGUgbG9hZGVyIHBhc3NlcyBhbiBhcmd1bWVudCwgbG9hZCwgd2hpY2ggaXMgYW4gb3JkaW5hcnkgT2JqZWN0IHdpdGhcbiAgICAvLz4gdHdvIG93biBwcm9wZXJ0aWVzLiBgbG9hZC5uYW1lYCBpcyB0aGUgbm9ybWFsaXplZCBuYW1lIG9mIHRoZSBtb2R1bGUgdG9cbiAgICAvLz4gYmUgbG9jYXRlZC4gIGBsb2FkLm1ldGFkYXRhYCBpcyBhIG5ldyBPYmplY3Qgd2hpY2ggdGhlIGhvb2sgbWF5IHVzZSBmb3JcbiAgICAvLz4gYW55IHB1cnBvc2UuIFRoZSBMb2FkZXIgZG9lcyBub3QgdXNlIHRoaXMgT2JqZWN0IGV4Y2VwdCB0byBwYXNzIGl0IHRvXG4gICAgLy8+IHRoZSBzdWJzZXF1ZW50IGxvYWRlciBob29rcy5cbiAgICAvLz5cbiAgICAvLz4gVGhlIGhvb2sgcmV0dXJucyBlaXRoZXIgdGhlIHJlc291cmNlIGFkZHJlc3MgKGFueSBub24tdGhlbmFibGUgdmFsdWUpXG4gICAgLy8+IG9yIGEgdGhlbmFibGUgZm9yIHRoZSByZXNvdXJjZSBhZGRyZXNzLiBJZiB0aGUgaG9vayByZXR1cm5zIGEgdGhlbmFibGUsXG4gICAgLy8+IGxvYWRpbmcgd2lsbCBjb250aW51ZSB3aXRoIHRoZSBgZmV0Y2goKWAgaG9vayBvbmNlIHRoZSBwcm9taXNlIGlzXG4gICAgLy8+IGZ1bGZpbGxlZC5cbiAgICAvLz5cbiAgICAvLz4gKldoZW4gdGhpcyBob29rIGlzIGNhbGxlZDoqICBGb3IgYWxsIGltcG9ydHMsIGltbWVkaWF0ZWx5IGFmdGVyIHRoZVxuICAgIC8vPiBgbm9ybWFsaXplYCBob29rIHJldHVybnMgc3VjY2Vzc2Z1bGx5LCB1bmxlc3MgdGhlIG1vZHVsZSBpcyBhbHJlYWR5XG4gICAgLy8+IGxvYWRlZCBvciBsb2FkaW5nLlxuICAgIC8vPlxuICAgIC8vPiAqRGVmYXVsdCBiZWhhdmlvcjoqICBSZXR1cm4gdGhlIG1vZHVsZSBuYW1lIHVuY2hhbmdlZC5cbiAgICAvLz5cbiAgICAvLz4gTk9URSBUaGUgYnJvd3NlcidzIGBTeXN0ZW0ubG9jYXRlYCBob29rIG1heSBiZSBjb25zaWRlcmFibHkgbW9yZVxuICAgIC8vPiBjb21wbGV4LlxuICAgIC8vPlxuICAgIC8vPiBXaGVuIHRoZSBsb2NhdGUgbWV0aG9kIGlzIGNhbGxlZCwgdGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4gICAgLy8+XG4gICAgbG9jYXRlOiBmdW5jdGlvbiBsb2NhdGUobG9hZCkge1xuICAgICAgICAvLz4gMS4gUmV0dXJuIHRoZSByZXN1bHQgb2YgR2V0KGxvYWQsIGBcIm5hbWVcImApLlxuICAgICAgICByZXR1cm4gbG9hZC5uYW1lO1xuICAgIH0sXG4gICAgLy8+XG5cblxuICAgIC8vPiAjIyMjIExvYWRlci5wcm90b3R5cGUuZmV0Y2ggKCBsb2FkIClcbiAgICAvLz5cbiAgICAvLz4gRmV0Y2ggdGhlIHJlcXVlc3RlZCBzb3VyY2UgZnJvbSB0aGUgZ2l2ZW4gYWRkcmVzcyAocHJvZHVjZWQgYnkgdGhlXG4gICAgLy8+IGBsb2NhdGVgIGhvb2spLlxuICAgIC8vPlxuICAgIC8vPiBUaGlzIGlzIHRoZSBob29rIHRoYXQgbXVzdCBiZSBvdmVybG9hZGVkIGluIG9yZGVyIHRvIG1ha2UgdGhlIGBpbXBvcnRgXG4gICAgLy8+IGtleXdvcmQgd29yay5cbiAgICAvLz5cbiAgICAvLz4gVGhlIGxvYWRlciBwYXNzZXMgYW4gYXJndW1lbnQsIGxvYWQsIHdoaWNoIGlzIGFuIG9yZGluYXJ5IE9iamVjdCB3aXRoXG4gICAgLy8+IHRocmVlIG93biBwcm9wZXJ0aWVzLiBgbG9hZC5uYW1lYCBhbmQgYGxvYWQubWV0YWRhdGFgIGFyZSB0aGUgc2FtZVxuICAgIC8vPiB2YWx1ZXMgcGFzc2VkIHRvIHRoZSBgbG9jYXRlYCBob29rLiBgbG9hZC5hZGRyZXNzYCBpcyB0aGUgYWRkcmVzcyBvZlxuICAgIC8vPiB0aGUgcmVzb3VyY2UgdG8gZmV0Y2guIChUaGlzIGlzIHRoZSB2YWx1ZSBwcm9kdWNlZCBieSB0aGUgYGxvY2F0ZWBcbiAgICAvLz4gaG9vay4pXG4gICAgLy8+XG4gICAgLy8+IFRoZSBmZXRjaCBob29rIHJldHVybnMgZWl0aGVyIG1vZHVsZSBzb3VyY2UgKGFueSBub24tdGhlbmFibGUgdmFsdWUpIG9yXG4gICAgLy8+IGEgdGhlbmFibGUgZm9yIG1vZHVsZSBzb3VyY2UuXG4gICAgLy8+XG4gICAgLy8+ICpXaGVuIHRoaXMgaG9vayBpcyBjYWxsZWQ6KiAgRm9yIGFsbCBtb2R1bGVzIHdob3NlIHNvdXJjZSBpcyBub3RcbiAgICAvLz4gZGlyZWN0bHkgcHJvdmlkZWQgYnkgdGhlIGNhbGxlci4gIEl0IGlzIG5vdCBjYWxsZWQgZm9yIHRoZSBtb2R1bGVcbiAgICAvLz4gYm9kaWVzIHByb3ZpZGVkIGFzIGFyZ3VtZW50cyB0byBgbG9hZGVyLm1vZHVsZSgpYCBvciBgbG9hZGVyLmRlZmluZSgpYCxcbiAgICAvLz4gc2luY2UgdGhvc2UgZG8gbm90IG5lZWQgdG8gYmUgZmV0Y2hlZC4gKEhvd2V2ZXIsIHRoaXMgaG9vayBtYXkgYmVcbiAgICAvLz4gY2FsbGVkIHdoZW4gbG9hZGluZyBkZXBlbmRlbmNpZXMgb2Ygc3VjaCBtb2R1bGVzLilcbiAgICAvLz5cbiAgICAvLz4gKkRlZmF1bHQgYmVoYXZpb3I6KiAgVGhyb3cgYSBgVHlwZUVycm9yYC5cbiAgICAvLz5cbiAgICAvLz4gV2hlbiB0aGUgZmV0Y2ggbWV0aG9kIGlzIGNhbGxlZCwgdGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4gICAgLy8+XG4gICAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKGxvYWQpIHtcbiAgICAgICAgLy8+IDEuIFRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAgICAgdGhyb3cgc3RkX1R5cGVFcnJvcihcIkxvYWRlci5wcm90b3R5cGUuZmV0Y2ggd2FzIGNhbGxlZFwiKTtcbiAgICB9LFxuICAgIC8vPlxuXG5cbiAgICAvLz4gIyMjIyBMb2FkZXIucHJvdG90eXBlLnRyYW5zbGF0ZSAoIGxvYWQgKVxuICAgIC8vPlxuICAgIC8vPiBPcHRpb25hbGx5IHRyYW5zbGF0ZSB0aGUgZ2l2ZW4gc291cmNlIGZyb20gc29tZSBvdGhlciBsYW5ndWFnZSBpbnRvXG4gICAgLy8+IEVDTUFTY3JpcHQuXG4gICAgLy8+XG4gICAgLy8+IFRoZSBsb2FkZXIgcGFzc2VzIGFuIGFyZ3VtZW50LCBsb2FkLCB3aGljaCBpcyBhbiBvcmRpbmFyeSBPYmplY3Qgd2l0aFxuICAgIC8vPiBmb3VyIG93biBwcm9wZXJ0aWVzLiBgbG9hZC5uYW1lYCwgYGxvYWQubWV0YWRhdGFgLCBhbmQgYGxvYWQuYWRkcmVzc2BcbiAgICAvLz4gYXJlIHRoZSBzYW1lIHZhbHVlcyBwYXNzZWQgdG8gdGhlIGBmZXRjaGAgaG9vay4gYGxvYWQuc291cmNlYCBpcyB0aGVcbiAgICAvLz4gc291cmNlIGNvZGUgdG8gYmUgdHJhbnNsYXRlZC4gKFRoaXMgaXMgdGhlIHZhbHVlIHByb2R1Y2VkIGJ5IHRoZVxuICAgIC8vPiBgZmV0Y2hgIGhvb2suKVxuICAgIC8vPlxuICAgIC8vPiBUaGUgaG9vayByZXR1cm5zIGVpdGhlciBhbiBFQ01BU2NyaXB0IE1vZHVsZUJvZHkgKGFueSBub24tUHJvbWlzZVxuICAgIC8vPiB2YWx1ZSkgb3IgYSB0aGVuYWJsZSBmb3IgYSBNb2R1bGVCb2R5LlxuICAgIC8vPlxuICAgIC8vPiAqV2hlbiB0aGlzIGhvb2sgaXMgY2FsbGVkOiogIEZvciBhbGwgbW9kdWxlcywgaW5jbHVkaW5nIG1vZHVsZSBib2RpZXNcbiAgICAvLz4gcGFzc2VkIHRvIGBsb2FkZXIubW9kdWxlKClgIG9yIGBsb2FkZXIuZGVmaW5lKClgLlxuICAgIC8vPlxuICAgIC8vPiAqRGVmYXVsdCBiZWhhdmlvcjoqICBSZXR1cm4gdGhlIHNvdXJjZSB1bmNoYW5nZWQuXG4gICAgLy8+XG4gICAgLy8+IFdoZW4gdGhlIHRyYW5zbGF0ZSBtZXRob2QgaXMgY2FsbGVkLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAvLz5cbiAgICB0cmFuc2xhdGU6IGZ1bmN0aW9uIHRyYW5zbGF0ZShsb2FkKSB7XG4gICAgICAgIC8vPiAxLiBSZXR1cm4gdGhlIHJlc3VsdCBvZiBHZXQobG9hZCwgYFwic291cmNlXCJgKS5cbiAgICAgICAgcmV0dXJuIGxvYWQuc291cmNlO1xuICAgIH0sXG4gICAgLy8+XG5cblxuICAgIC8vPiAjIyMjIExvYWRlci5wcm90b3R5cGUuaW5zdGFudGlhdGUgKCBsb2FkIClcbiAgICAvLz5cbiAgICAvLz4gQWxsb3cgYSBsb2FkZXIgdG8gb3B0aW9uYWxseSBwcm92aWRlIGludGVyb3BlcmFiaWxpdHkgd2l0aCBvdGhlciBtb2R1bGVcbiAgICAvLz4gc3lzdGVtcy5cbiAgICAvLz5cbiAgICAvLz4gVGhlIGxvYWRlciBwYXNzZXMgYW4gYXJndW1lbnQsIGxvYWQsIHdoaWNoIGlzIGFuIG9yZGluYXJ5IE9iamVjdCB3aXRoXG4gICAgLy8+IGZvdXIgb3duIHByb3BlcnRpZXMuIGBsb2FkLm5hbWVgLCBgbG9hZC5tZXRhZGF0YWAsIGFuZCBgbG9hZC5hZGRyZXNzYFxuICAgIC8vPiBhcmUgdGhlIHNhbWUgdmFsdWVzIHBhc3NlZCB0byB0aGUgYGZldGNoYCBhbmQgYHRyYW5zbGF0ZWAgaG9va3MuXG4gICAgLy8+IGBsb2FkLnNvdXJjZWAgaXMgdGhlIHRyYW5zbGF0ZWQgbW9kdWxlIHNvdXJjZS4gKFRoaXMgaXMgdGhlIHZhbHVlXG4gICAgLy8+IHByb2R1Y2VkIGJ5IHRoZSBgdHJhbnNsYXRlYCBob29rLilcbiAgICAvLz5cbiAgICAvLz4gSWYgdGhlIGBpbnN0YW50aWF0ZWAgaG9vayByZXR1cm5zICoqdW5kZWZpbmVkKiogb3IgYSB0aGVuYWJsZSBmb3IgdGhlXG4gICAgLy8+IHZhbHVlICoqdW5kZWZpbmVkKiosIHRoZW4gdGhlIGxvYWRlciB1c2VzIHRoZSBkZWZhdWx0IGxpbmtpbmcgYmVoYXZpb3IuXG4gICAgLy8+IEl0IHBhcnNlcyBzcmMgYXMgYSBNb2R1bGUsIGxvb2tzIGF0IGl0cyBpbXBvcnRzLCBsb2FkcyBpdHMgZGVwZW5kZW5jaWVzXG4gICAgLy8+IGFzeW5jaHJvbm91c2x5LCBhbmQgZmluYWxseSBsaW5rcyB0aGVtIHRvZ2V0aGVyIGFuZCBhZGRzIHRoZW0gdG8gdGhlXG4gICAgLy8+IHJlZ2lzdHJ5LlxuICAgIC8vPlxuICAgIC8vPiBPdGhlcndpc2UsIHRoZSBob29rIHNob3VsZCByZXR1cm4gYSBmYWN0b3J5IG9iamVjdCAob3IgYSB0aGVuYWJsZSBmb3IgYVxuICAgIC8vPiBmYWN0b3J5IG9iamVjdCkgd2hpY2ggdGhlIGxvYWRlciB3aWxsIHVzZSB0byBjcmVhdGUgdGhlIG1vZHVsZSBhbmQgbGlua1xuICAgIC8vPiBpdCB3aXRoIGl0cyBjbGllbnRzIGFuZCBkZXBlbmRlbmNpZXMuXG4gICAgLy8+XG4gICAgLy8+IFRoZSBmb3JtIG9mIGEgZmFjdG9yeSBvYmplY3QgaXM6XG4gICAgLy8+XG4gICAgLy8+ICAgICB7XG4gICAgLy8+ICAgICAgICAgZGVwczogPGFycmF5IG9mIHN0cmluZ3MgKG1vZHVsZSBuYW1lcyk+LFxuICAgIC8vPiAgICAgICAgIGV4ZWN1dGU6IDxmdW5jdGlvbiAoTW9kdWxlLCBNb2R1bGUsIC4uLikgLT4gTW9kdWxlPlxuICAgIC8vPiAgICAgfVxuICAgIC8vPlxuICAgIC8vPiBUaGUgbW9kdWxlIGlzIGV4ZWN1dGVkIGR1cmluZyB0aGUgbGlua2luZyBwcm9jZXNzLiAgRmlyc3QgYWxsIG9mIGl0c1xuICAgIC8vPiBkZXBlbmRlbmNpZXMgYXJlIGV4ZWN1dGVkIGFuZCBsaW5rZWQsIGFuZCB0aGVuIHBhc3NlZCB0byB0aGUgYGV4ZWN1dGVgXG4gICAgLy8+IGZ1bmN0aW9uLiAgVGhlbiB0aGUgcmVzdWx0aW5nIG1vZHVsZSBpcyBsaW5rZWQgd2l0aCB0aGUgZG93bnN0cmVhbVxuICAgIC8vPiBkZXBlbmRlbmNpZXMuXG4gICAgLy8+XG4gICAgLy8+IE5PVEUgVGhpcyBmZWF0dXJlIGlzIHByb3ZpZGVkIGluIG9yZGVyIHRvIHBlcm1pdCBjdXN0b20gbG9hZGVycyB0b1xuICAgIC8vPiBzdXBwb3J0IHVzaW5nIGBpbXBvcnRgIHRvIGltcG9ydCBwcmUtRVM2IG1vZHVsZXMgc3VjaCBhcyBBTUQgbW9kdWxlcy5cbiAgICAvLz4gVGhlIGRlc2lnbiByZXF1aXJlcyBpbmNyZW1lbnRhbCBsaW5raW5nIHdoZW4gc3VjaCBtb2R1bGVzIGFyZSBwcmVzZW50LFxuICAgIC8vPiBidXQgaXQgZW5zdXJlcyB0aGF0IG1vZHVsZXMgaW1wbGVtZW50ZWQgd2l0aCBzdGFuZGFyZCBzb3VyY2UtbGV2ZWxcbiAgICAvLz4gbW9kdWxlIGRlY2xhcmF0aW9ucyBjYW4gc3RpbGwgYmUgc3RhdGljYWxseSB2YWxpZGF0ZWQuXG4gICAgLy8+XG4gICAgLy8+ICpXaGVuIHRoaXMgaG9vayBpcyBjYWxsZWQ6KiBGb3IgYWxsIG1vZHVsZXMsIGFmdGVyIHRoZSBgdHJhbnNsYXRlYFxuICAgIC8vPiBob29rLlxuICAgIC8vPlxuICAgIC8vPiAqRGVmYXVsdCBiZWhhdmlvcjoqICBSZXR1cm4gdW5kZWZpbmVkLlxuICAgIC8vPlxuICAgIC8vPiBXaGVuIHRoZSBpbnN0YW50aWF0ZSBtZXRob2QgaXMgY2FsbGVkLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAvLz5cbiAgICBpbnN0YW50aWF0ZTogZnVuY3Rpb24gaW5zdGFudGlhdGUobG9hZCkge1xuICAgICAgICAvLz4gMS4gUmV0dXJuICoqdW5kZWZpbmVkKiouXG4gICAgfVxuICAgIC8vPlxufSk7XG5cblxuLy8+ICMjIyMgTG9hZGVyLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSAoIClcbi8vPlxuLy8+IFRoZSBpbml0aWFsIHZhbHVlIG9mIHRoZSBAQGl0ZXJhdG9yIHByb3BlcnR5IGlzIHRoZSBzYW1lIGZ1bmN0aW9uXG4vLz4gb2JqZWN0IGFzIHRoZSBpbml0aWFsIHZhbHVlIG9mIHRoZSBlbnRyaWVzIHByb3BlcnR5LlxuZGVmKExvYWRlci5wcm90b3R5cGUsIHtcIkBAaXRlcmF0b3JcIjogTG9hZGVyLnByb3RvdHlwZS5lbnRyaWVzfSk7XG5cblxuXG4vLz4gIyMjIExvYWRlciBJdGVyYXRvciBPYmplY3RzXG4vLz5cbi8vPiBBIExvYWRlciBJdGVyYXRvciBvYmplY3QgcmVwcmVzZW50cyBhIHNwZWNpZmljIGl0ZXJhdGlvbiBvdmVyIHRoZSBtb2R1bGVcbi8vPiByZWdpc3RyeSBvZiBzb21lIHNwZWNpZmljIExvYWRlciBpbnN0YW5jZSBvYmplY3QuXG4vLz5cbi8vPiBMb2FkZXIgSXRlcmF0b3Igb2JqZWN0cyBhcmUgc2ltaWxhciBpbiBzdHJ1Y3R1cmUgdG8gTWFwIEl0ZXJhdG9yIG9iamVjdHMuXG4vLz4gVGhleSBhcmUgY3JlYXRlZCB3aXRoIHRocmVlIGludGVybmFsIHNsb3RzOlxuLy8+XG4vLz4gICAqIFtbTG9hZGVyXV0gJm5kYXNoOyBUaGUgTG9hZGVyIG9iamVjdCB3aG9zZSBtb2R1bGUgcmVnaXN0cnkgaXMgYmVpbmdcbi8vPiAgICAgaXRlcmF0ZWQuXG4vLz5cbi8vPiAgICogW1tNb2R1bGVNYXBOZXh0SW5kZXhdXSAmbmRhc2g7IFRoZSBpbnRlZ2VyIGluZGV4IG9mIHRoZSBuZXh0IGVsZW1lbnQgb2Zcbi8vPiAgICAgW1tMb2FkZXJdXS5bW01vZHVsZXNdXSB0byBiZSBleGFtaW5lZCBieSB0aGlzIGl0ZXJhdGlvbi5cbi8vPlxuLy8+ICAgKiBbW01hcEl0ZXJhdGlvbktpbmRdXSAmbmRhc2g7IEEgc3RyaW5nIHZhbHVlIHRoYXQgaWRlbnRpZmllcyB3aGF0IGlzIHRvXG4vLz4gICAgIGJlIHJldHVybmVkIGZvciBlYWNoIGVsZW1lbnQgb2YgdGhlIGl0ZXJhdGlvbi4gVGhlIHBvc3NpYmxlIHZhbHVlcyBhcmU6XG4vLz4gICAgIGBcImtleVwiYCwgYFwidmFsdWVcImAsIGBcImtleSt2YWx1ZVwiYC5cbi8vPlxuXG4vLz4gIyMjIyBDcmVhdGVMb2FkZXJJdGVyYXRvcihsb2FkZXIsIGtpbmQpIEFic3RyYWN0IE9wZXJhdGlvblxuLy8+XG4vLz4gU2V2ZXJhbCBtZXRob2RzIG9mIExvYWRlciBvYmplY3RzIHJldHVybiBMb2FkZXIgSXRlcmF0b3Igb2JqZWN0cy4gVGhlXG4vLz4gYWJzdHJhY3QgaXRlcmF0aW9uIENyZWF0ZUxvYWRlckl0ZXJhdG9yIGlzIHVzZWQgdG8gY3JlYXRlIHN1Y2ggaXRlcmF0b3Jcbi8vPiBvYmplY3RzLiBJdCBwZXJmb3JtcyB0aGUgZm9sbG93aW5nIHN0ZXBzOlxuLy8+XG4vLz4gMS4gIEFzc2VydDogVHlwZShsb2FkZXIpIGlzIE9iamVjdC5cbi8vPiAyLiAgQXNzZXJ0OiBsb2FkZXIgaGFzIGFsbCB0aGUgaW50ZXJuYWwgc2xvdHMgb2YgYSBMb2FkZXIgb2JqZWN0LlxuLy8+IDMuICBMZXQgaXRlcmF0b3IgYmUgdGhlIHJlc3VsdCBvZiBPYmplY3RDcmVhdGUoJUxvYWRlckl0ZXJhdG9yUHJvdG90eXBlJSxcbi8vPiAgICAgKFtbTG9hZGVyXV0sIFtbTW9kdWxlTWFwTmV4dEluZGV4XV0sIFtbTWFwSXRlcmF0aW9uS2luZF1dKSkuXG4vLz4gNC4gIFNldCBpdGVyYXRvci5bW0xvYWRlcl1dIHRvIGxvYWRlci5cbi8vPiA1LiAgU2V0IGl0ZXJhdG9yLltbTW9kdWxlTWFwTmV4dEluZGV4XV0gdG8gMC5cbi8vPiA2LiAgU2V0IGl0ZXJhdG9yLltbTWFwSXRlcmF0aW9uS2luZF1dIHRvIGtpbmQuXG4vLz4gNy4gIFJldHVybiBpdGVyYXRvci5cbi8vPlxuZnVuY3Rpb24gTG9hZGVySXRlcmF0b3IoaXRlcmF0b3IpIHtcbiAgICAkU2V0TG9hZGVySXRlcmF0b3JQcml2YXRlKHRoaXMsIGl0ZXJhdG9yKTtcbn1cblxuLy8+ICMjIyMgVGhlICVMb2FkZXJJdGVyYXRvclByb3RvdHlwZSUgT2JqZWN0XG4vLz5cbi8vPiBBbGwgTG9hZGVyIEl0ZXJhdG9yIE9iamVjdHMgaW5oZXJpdCBwcm9wZXJ0aWVzIGZyb20gdGhlXG4vLz4gJUxvYWRlckl0ZXJhdG9yUHJvdG90eXBlJSBpbnRyaW5zaWMgb2JqZWN0LiAgVGhlICVMb2FkZXJJdGVyYXRvclByb3RvdHlwZSVcbi8vPiBpbnRyaW5zaWMgb2JqZWN0IGlzIGFuIG9yZGluYXJ5IG9iamVjdCBhbmQgaXRzIFtbUHJvdG90eXBlXV0gaW50ZXJuYWwgc2xvdFxuLy8+IGlzIHRoZSAlT2JqZWN0UHJvdG90eXBlJSBpbnRyaW5zaWMgb2JqZWN0LiBJbiBhZGRpdGlvbixcbi8vPiAlTG9hZGVySXRlcmF0b3JQcm90b3R5cGUlIGhhcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4vLz5cbkxvYWRlckl0ZXJhdG9yLnByb3RvdHlwZSA9IHtcbiAgICAvLz4gIyMjIyMgJUxvYWRlckl0ZXJhdG9yUHJvdG90eXBlJS5uZXh0ICggKVxuICAgIC8vPlxuICAgIC8vPiAxLiAgTGV0IE8gYmUgdGhlIHRoaXMgdmFsdWUuXG4gICAgLy8+IDIuICBJZiBUeXBlKE8pIGlzIG5vdCBPYmplY3QsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAvLz4gMy4gIElmIE8gZG9lcyBub3QgaGF2ZSBhbGwgb2YgdGhlIGludGVybmFsIHByb3BlcnRpZXMgb2YgYSBMb2FkZXJcbiAgICAvLz4gICAgIEl0ZXJhdG9yIEluc3RhbmNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgLy8+IDQuICBMZXQgbG9hZGVyIGJlIHRoZSB2YWx1ZSBvZiB0aGUgW1tMb2FkZXJdXSBpbnRlcm5hbCBzbG90IG9mIE8uXG4gICAgLy8+IDUuICBMZXQgaW5kZXggYmUgdGhlIHZhbHVlIG9mIHRoZSBbW01vZHVsZU1hcE5leHRJbmRleF1dIGludGVybmFsIHNsb3RcbiAgICAvLz4gICAgIG9mIE8uXG4gICAgLy8+IDYuICBMZXQgaXRlbUtpbmQgYmUgdGhlIHZhbHVlIG9mIHRoZSBbW01hcEl0ZXJhdGlvbktpbmRdXSBpbnRlcm5hbCBzbG90XG4gICAgLy8+ICAgICBvZiBPLlxuICAgIC8vPiA3LiAgQXNzZXJ0OiBsb2FkZXIgaGFzIGEgW1tNb2R1bGVzXV0gaW50ZXJuYWwgc2xvdCBhbmQgbG9hZGVyIGhhcyBiZWVuXG4gICAgLy8+ICAgICBpbml0aWFsaXNlZCBzbyB0aGUgdmFsdWUgb2YgbG9hZGVyLltbTW9kdWxlc11dIGlzIG5vdCB1bmRlZmluZWQuXG4gICAgLy8+IDguICBSZXBlYXQgd2hpbGUgaW5kZXggaXMgbGVzcyB0aGFuIHRoZSB0b3RhbCBudW1iZXIgb2YgZWxlbWVudHMgb2ZcbiAgICAvLz4gICAgIGxvYWRlci5bW01vZHVsZXNdXSxcbiAgICAvLz4gICAgIDEuICBMZXQgZSBiZSB0aGUgUmVjb3JkIHtbW2tleV1dLCBbW3ZhbHVlXV19IGF0IDAtb3JpZ2luZWRcbiAgICAvLz4gICAgICAgICBpbnNlcnRpb24gcG9zaXRpb24gaW5kZXggb2YgbG9hZGVyLltbTW9kdWxlc11dLlxuICAgIC8vPiAgICAgMi4gIFNldCBpbmRleCB0byBpbmRleCArIDEuXG4gICAgLy8+ICAgICAzLiAgU2V0IHRoZSBbW01vZHVsZU1hcE5leHRJbmRleF1dIGludGVybmFsIHNsb3Qgb2YgTyB0byBpbmRleC5cbiAgICAvLz4gICAgIDQuICBJZiBlLltba2V5XV0gaXMgbm90IGVtcHR5LCB0aGVuXG4gICAgLy8+ICAgICAgICAgMS4gIElmIGl0ZW1LaW5kIGlzIGBcImtleVwiYCwgdGhlbiBsZXQgcmVzdWx0IGJlIGUuW1trZXldXS5cbiAgICAvLz4gICAgICAgICAyLiAgRWxzZSBpZiBpdGVtS2luZCBpcyBgXCJ2YWx1ZVwiYCwgdGhlbiBsZXQgcmVzdWx0IGJlXG4gICAgLy8+ICAgICAgICAgICAgIGUuW1t2YWx1ZV1dLlxuICAgIC8vPiAgICAgICAgIDMuICBFbHNlLFxuICAgIC8vPiAgICAgICAgICAgICAxLiAgQXNzZXJ0OiBpdGVtS2luZCBpcyBgXCJrZXkrdmFsdWVcImAuXG4gICAgLy8+ICAgICAgICAgICAgIDIuICBMZXQgcmVzdWx0IGJlIHRoZSByZXN1bHQgb2YgQXJyYXlDcmVhdGUoMikuXG4gICAgLy8+ICAgICAgICAgICAgIDMuICBBc3NlcnQ6IHJlc3VsdCBpcyBhIG5ldywgd2VsbC1mb3JtZWQgQXJyYXkgb2JqZWN0IHNvXG4gICAgLy8+ICAgICAgICAgICAgICAgICB0aGUgZm9sbG93aW5nIG9wZXJhdGlvbnMgd2lsbCBuZXZlciBmYWlsLlxuICAgIC8vPiAgICAgICAgICAgICA0LiAgQ2FsbCBDcmVhdGVPd25EYXRhUHJvcGVydHkocmVzdWx0LCBgXCIwXCJgLCBlLltba2V5XV0pLlxuICAgIC8vPiAgICAgICAgICAgICA1LiAgQ2FsbCBDcmVhdGVPd25EYXRhUHJvcGVydHkocmVzdWx0LCBgXCIxXCJgLCBlLltbdmFsdWVdXSkuXG4gICAgLy8+ICAgICAgICAgNC4gIFJldHVybiBDcmVhdGVJdGVyUmVzdWx0T2JqZWN0KHJlc3VsdCwgZmFsc2UpLlxuICAgIC8vPiA5LiAgUmV0dXJuIENyZWF0ZUl0ZXJSZXN1bHRPYmplY3QodW5kZWZpbmVkLCB0cnVlKS5cbiAgICAvLz5cbiAgICAvLyBUaGUgaW1wbGVtZW50YXRpb24gaXMgb25lIGxpbmUgb2YgY29kZSwgZGVsZWdhdGluZyB0b1xuICAgIC8vIE1hcEl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0LlxuICAgIC8vXG4gICAgbmV4dDogZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxGdW5jdGlvbihzdGRfTWFwX2l0ZXJhdG9yX25leHQsICRHZXRMb2FkZXJJdGVyYXRvclByaXZhdGUodGhpcykpO1xuICAgIH0sXG5cbiAgICAvLz4gIyMjIyMgJUxvYWRlckl0ZXJhdG9yUHJvdG90eXBlJSBbIEBAaXRlcmF0b3IgXSAoKVxuICAgIC8vPlxuICAgIC8vPiBUaGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAvLz5cbiAgICBcIkBAaXRlcmF0b3JcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLz4gMS4gIFJldHVybiB0aGUgdGhpcyB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvLz5cbiAgICAvLz4gVGhlIHZhbHVlIG9mIHRoZSBgbmFtZWAgcHJvcGVydHkgb2YgdGhpcyBmdW5jdGlvbiBpc1xuICAgIC8vPiBgXCJbU3ltYm9sLml0ZXJhdG9yXVwiYC5cbiAgICAvLz5cbiAgICAvLyBJbXBsZW1lbnRhdGlvbiBidWc6IFwiQEBpdGVyYXRvclwiIHNob3VsZCBvZiBjb3Vyc2UgYmUgW1N5bWJvbC5pdGVyYXRvcl0uXG4gICAgLy8gVGhpcyB3aWxsIGJlIHVwZGF0ZWQgb25jZSBTeW1ib2xzIGFyZSBpbXBsZW1lbnRlZC5cbiAgICAvL1xuXG4gICAgLy8+ICMjIyMjICVMb2FkZXJJdGVyYXRvclByb3RvdHlwZSUgWyBAQHRvU3RyaW5nVGFnIF1cbiAgICAvLz5cbiAgICAvLz4gVGhlIGluaXRpYWwgdmFsdWUgb2YgdGhlIEBAdG9TdHJpbmdUYWcgcHJvcGVydHkgaXMgdGhlIHN0cmluZyB2YWx1ZVxuICAgIC8vPiBgXCJMb2FkZXIgSXRlcmF0b3JcImAuXG4gICAgLy8+XG4gICAgXCJAQHRvU3RyaW5nVGFnXCI6IFwiTG9hZGVyIEl0ZXJhdG9yXCJcbn07XG5cbn0pKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdGhpcyk7XG4iXX0=
function YLoader() {}

//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL3lsb2FkZXIuanMuZXM2Iiwic291cmNlcyI6WyJsaWIveWxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxRQUFTLFFBQUEsQ0FBUyxDQUFFLEVBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyB5bG9hZGVyIHNob3VsZCBjdXN0b21pemUgc3lzdGVtIGxvYWRlclxuXG5mdW5jdGlvbiBZTG9hZGVyICgpIHt9XG4iXX0=